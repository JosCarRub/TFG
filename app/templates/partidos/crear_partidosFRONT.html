{% extends 'base.html' %}
{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!-- Sidebar Navigation -->
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Create Match Content -->
        <div class="container-fluid p-4 bg-dark">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h4 class="text-white mb-2">Crear un nuevo partido</h4>
                            <p class="text-white-50 mb-0">Completa el formulario para organizar un partido y encontrar jugadores</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Form and Map Container -->
            <div class="row">
                <!-- Form Column -->
                <div class="col-lg-7 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <form id="createMatchForm">
                                <!-- Basic Info Section -->
                                <div class="mb-4">
                                    <h5 class="text-white mb-3">Información básica</h5>
                                    
                                    <div class="mb-3">
                                        <label for="matchTitle" class="form-label text-white">Título del partido <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control bg-dark text-white border-secondary" id="matchTitle" placeholder="Ej: Partido amistoso 5vs5 en Campo Norte" required>
                                        <div class="form-text text-white-50">Un título descriptivo ayudará a atraer jugadores.</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="matchDescription" class="form-label text-white">Descripción</label>
                                        <textarea class="form-control bg-dark text-white border-secondary" id="matchDescription" rows="3" placeholder="Describe el partido, reglas especiales, equipamiento necesario, etc."></textarea>
                                    </div>
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="matchType" class="form-label text-white">Tipo de partido <span class="text-danger">*</span></label>
                                            <select class="form-select bg-dark text-white border-secondary" id="matchType" required>
                                                <option value="" selected disabled>Selecciona un formato</option>
                                                <option value="5v5">Fútbol 5 (5 vs 5)</option>
                                                <option value="7v7">Fútbol 7 (7 vs 7)</option>
                                                <option value="11v11">Fútbol 11 (11 vs 11)</option>
                                                <option value="sala">Fútbol sala (5 vs 5)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="matchSkillLevel" class="form-label text-white">Nivel de habilidad <span class="text-danger">*</span></label>
                                            <select class="form-select bg-dark text-white border-secondary" id="matchSkillLevel" required>
                                                <option value="" selected disabled>Nivel requerido</option>
                                                <option value="principiante">Principiante</option>
                                                <option value="intermedio">Intermedio</option>
                                                <option value="avanzado">Avanzado</option>
                                                <option value="todos">Todos los niveles</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Date and Time Section -->
                                <div class="mb-4">
                                    <h5 class="text-white mb-3">Fecha y hora</h5>
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <label for="matchDate" class="form-label text-white">Fecha <span class="text-danger">*</span></label>
                                            <input type="date" class="form-control bg-dark text-white border-secondary" id="matchDate" required>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="matchStartTime" class="form-label text-white">Hora inicio <span class="text-danger">*</span></label>
                                            <input type="time" class="form-control bg-dark text-white border-secondary" id="matchStartTime" required>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="matchEndTime" class="form-label text-white">Hora fin <span class="text-danger">*</span></label>
                                            <input type="time" class="form-control bg-dark text-white border-secondary" id="matchEndTime" required>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label text-white d-block">Periodicidad</label>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input bg-dark border-secondary" type="radio" name="matchPeriodicity" id="matchOneTime" value="oneTime" checked>
                                            <label class="form-check-label text-white" for="matchOneTime">Una vez</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input bg-dark border-secondary" type="radio" name="matchPeriodicity" id="matchWeekly" value="weekly">
                                            <label class="form-check-label text-white" for="matchWeekly">Semanal</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input bg-dark border-secondary" type="radio" name="matchPeriodicity" id="matchBiweekly" value="biweekly">
                                            <label class="form-check-label text-white" for="matchBiweekly">Quincenal</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Location Section -->
                                <div class="mb-4">
                                    <h5 class="text-white mb-3">Ubicación</h5>
                                    
                                    <div class="mb-3">
                                        <label for="matchLocation" class="form-label text-white">Tipo de ubicación <span class="text-danger">*</span></label>
                                        <select class="form-select bg-dark text-white border-secondary" id="matchLocation" required>
                                            <option value="" selected disabled>Selecciona una opción</option>
                                            <option value="existing">Cancha registrada</option>
                                            <option value="new">Nueva ubicación</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Existing Fields - Shows when "Cancha registrada" is selected -->
                                    <div id="existingLocationFields" class="mb-3">
                                        <label for="matchVenue" class="form-label text-white">Selecciona una cancha <span class="text-danger">*</span></label>
                                        <select class="form-select bg-dark text-white border-secondary" id="matchVenue">
                                            <option value="" selected disabled>Selecciona una cancha</option>
                                            <option value="1">Campo Municipal Norte</option>
                                            <option value="2">Estadio Central</option>
                                            <option value="3">Cancha "El Barrio"</option>
                                            <option value="4">Polideportivo Sur</option>
                                            <option value="5">Campo San Jorge</option>
                                        </select>
                                        <div class="form-text text-white-50">Las canchas registradas ya tienen todos los detalles necesarios.</div>
                                    </div>
                                    
                                    <!-- New Location Fields - Shows when "Nueva ubicación" is selected -->
                                    <div id="newLocationFields" class="d-none">
                                        <div class="mb-3">
                                            <label for="matchVenueName" class="form-label text-white">Nombre del lugar <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control bg-dark text-white border-secondary" id="matchVenueName" placeholder="Ej: Campo Municipal Norte">
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="matchVenueAddress" class="form-label text-white">Dirección <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control bg-dark text-white border-secondary" id="matchVenueAddress" placeholder="Dirección completa del lugar">
                                        </div>
                                        
                                        <div class="alert alert-info bg-dark text-info border-info">
                                            Utiliza el mapa a la derecha para seleccionar la ubicación exacta del partido.
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="matchVenueSurface" class="form-label text-white">Superficie</label>
                                            <select class="form-select bg-dark text-white border-secondary" id="matchVenueSurface">
                                                <option value="" selected disabled>Selecciona el tipo de superficie</option>
                                                <option value="natural">Césped natural</option>
                                                <option value="artificial">Césped artificial</option>
                                                <option value="indoor">Fútbol sala (interior)</option>
                                                <option value="dirt">Tierra</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Players Section -->
                                <div class="mb-4">
                                    <h5 class="text-white mb-3">Jugadores</h5>
                                    
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="matchPlayersMin" class="form-label text-white">Mínimo de jugadores <span class="text-danger">*</span></label>
                                            <input type="number" class="form-control bg-dark text-white border-secondary" id="matchPlayersMin" min="2" placeholder="Ej: 10" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="matchPlayersMax" class="form-label text-white">Máximo de jugadores <span class="text-danger">*</span></label>
                                            <input type="number" class="form-control bg-dark text-white border-secondary" id="matchPlayersMax" min="2" placeholder="Ej: 14" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="matchInviteOnly">
                                        <label class="form-check-label text-white-50" for="matchInviteOnly">
                                            Partido privado (solo por invitación)
                                        </label>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="matchInviteFriends" class="form-label text-white">Invitar amigos (opcional)</label>
                                        <select class="form-select bg-dark text-white border-secondary" id="matchInviteFriends" multiple>
                                            <option value="1">Juan Pérez</option>
                                            <option value="2">Ana Martínez</option>
                                            <option value="3">Miguel López</option>
                                            <option value="4">Laura Sánchez</option>
                                            <option value="5">David García</option>
                                        </select>
                                        <div class="form-text text-white-50">Mantén presionada la tecla Ctrl (o Cmd en Mac) para seleccionar varios amigos.</div>
                                    </div>
                                </div>
                                
                                <!-- Cost Section -->
                                <div class="mb-4">
                                    <h5 class="text-white mb-3">Costos</h5>
                                    
                                    <div class="mb-3">
                                        <label for="matchFeeType" class="form-label text-white">Tipo de cuota</label>
                                        <select class="form-select bg-dark text-white border-secondary" id="matchFeeType">
                                            <option value="free" selected>Gratis</option>
                                            <option value="perPlayer">Pago por jugador</option>
                                            <option value="splitTotal">Dividir costo total</option>
                                        </select>
                                    </div>
                                    
                                    <div id="feeAmountField" class="mb-3 d-none">
                                        <label for="matchFeeAmount" class="form-label text-white">Cantidad <span class="text-danger">*</span></label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-dark text-white border-secondary">€</span>
                                            <input type="number" class="form-control bg-dark text-white border-secondary" id="matchFeeAmount" placeholder="0.00" step="0.01" min="0">
                                        </div>
                                        <div class="form-text text-white-50">Para dividir el costo total, ingresa el monto total de alquiler de cancha.</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="matchPaymentMethod" class="form-label text-white">Método de pago</label>
                                        <select class="form-select bg-dark text-white border-secondary" id="matchPaymentMethod">
                                            <option value="cash" selected>Efectivo en el lugar</option>
                                            <option value="bizum">Bizum</option>
                                            <option value="inapp">Pago en la aplicación</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Additional Options Section -->
                                <div class="mb-4">
                                    <h5 class="text-white mb-3">Opciones adicionales</h5>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="matchPhotos">
                                        <label class="form-check-label text-white-50" for="matchPhotos">
                                            Compartir fotos del partido
                                        </label>
                                    </div>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="matchRatings">
                                        <label class="form-check-label text-white-50" for="matchRatings">
                                            Permitir valoraciones de jugadores
                                        </label>
                                    </div>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="matchStats">
                                        <label class="form-check-label text-white-50" for="matchStats">
                                            Habilitar seguimiento de estadísticas
                                        </label>
                                    </div>
                                    
                                    <div class="form-check mb-3">
                                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="matchReminders">
                                        <label class="form-check-label text-white-50" for="matchReminders">
                                            Enviar recordatorios a los jugadores (24h antes)
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Submit Buttons -->
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-light">
                                        <i class="fas fa-save me-2"></i>Guardar borrador
                                    </button>
                                    <button type="submit" class="btn btn-success btn-lg">
                                        <i class="fas fa-check-circle me-2"></i>Crear partido
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Map Column -->
                <div class="col-lg-5 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h5 class="text-white mb-3">Ubicación del partido</h5>
                            
                            <div class="card bg-dark mb-3">
                                <div class="card-body p-2">
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="Buscar ubicación..." id="locationSearch">
                                        <button class="btn btn-success" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Map Container -->
                            <div style="height: 400px; background-color: #1a202c; position: relative; border-radius: 10px; overflow: hidden; margin-bottom: 15px;">
                                <!-- This would be replaced with the actual map implementation -->
                                <div class="d-flex justify-content-center align-items-center h-100">
                                    <div class="text-center">
                                        <i class="fas fa-map-marked-alt text-success mb-3" style="font-size: 3rem;"></i>
                                        <h5 class="text-white">Mapa interactivo</h5>
                                        <p class="text-white-50">Aquí se mostraría el mapa para seleccionar la ubicación</p>
                                    </div>
                                </div>
                                
                                <!-- Sample controls that would appear over the map -->
                                <div class="position-absolute" style="top: 10px; right: 10px;">
                                    <div class="btn-group-vertical">
                                        <button class="btn btn-dark" title="Acercar">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <button class="btn btn-dark" title="Alejar">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="position-absolute" style="bottom: 20px; right: 20px;">
                                    <button class="btn btn-success" title="Mi ubicación">
                                        <i class="fas fa-location-arrow"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Selected Location Preview -->
                            <div class="card bg-dark mb-3">
                                <div class="card-body p-3">
                                    <h6 class="text-white mb-2">Ubicación seleccionada:</h6>
                                    <p class="text-white-50 mb-1" id="selectedLocation">No se ha seleccionado ninguna ubicación</p>
                                    <p class="text-white-50 mb-0" id="selectedCoordinates"></p>
                                </div>
                            </div>
                            
                            <!-- Nearby Amenities -->
                            <h5 class="text-white mb-3">Servicios cercanos</h5>
                            <div class="list-group bg-transparent">
                                <div class="list-group-item bg-dark text-white border-secondary">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-parking text-success me-3"></i>
                                        <div>
                                            <h6 class="mb-0">Parking disponible</h6>
                                            <small class="text-white-50">A 50 metros</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-group-item bg-dark text-white border-secondary">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-shower text-success me-3"></i>
                                        <div>
                                            <h6 class="mb-0">Vestuarios</h6>
                                            <small class="text-white-50">En las instalaciones</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-group-item bg-dark text-white border-secondary">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-utensils text-success me-3"></i>
                                        <div>
                                            <h6 class="mb-0">Bar/Cafetería</h6>
                                            <small class="text-white-50">A 100 metros</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tips Section -->
            <div class="row">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h5 class="text-white mb-3">Consejos para organizar un buen partido</h5>
                            
                            <div class="row g-4">
                                <!-- Tip 1 -->
                                <div class="col-md-6 col-lg-3">
                                    <div class="d-flex">
                                        <div class="flex-shrink-0">
                                            <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 48px; height: 48px;">
                                                <i class="fas fa-clock text-success"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-white">Planifica con tiempo</h6>
                                            <p class="text-white-50 small mb-0">Crea el partido con al menos 48h de antelación para maximizar la asistencia.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Tip 2 -->
                                <div class="col-md-6 col-lg-3">
                                    <div class="d-flex">
                                        <div class="flex-shrink-0">
                                            <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 48px; height: 48px;">
                                                <i class="fas fa-info-circle text-success"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-white">Sé descriptivo</h6>
                                            <p class="text-white-50 small mb-0">Incluye detalles relevantes como el nivel de juego, equipamiento necesario y reglas específicas.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Tip 3 -->
                                <div class="col-md-6 col-lg-3">
                                    <div class="d-flex">
                                        <div class="flex-shrink-0">
                                            <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 48px; height: 48px;">
                                                <i class="fas fa-map-marker-alt text-success"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-white">Ubicación accesible</h6>
                                            <p class="text-white-50 small mb-0">Elige un lugar con buen acceso en transporte público y/o aparcamiento cercano.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Tip 4 -->
                                <div class="col-md-6 col-lg-3">
                                    <div class="d-flex">
                                        <div class="flex-shrink-0">
                                            <div class="bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 48px; height: 48px;">
                                                <i class="fas fa-users text-success"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-white">Confirma asistencia</h6>
                                            <p class="text-white-50 small mb-0">Envía mensajes de recordatorio a los jugadores un día antes del partido.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        
        <!-- JavaScript Form Interaction -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Toggle location fields
                const locationSelect = document.getElementById('matchLocation');
                const existingFields = document.getElementById('existingLocationFields');
                const newFields = document.getElementById('newLocationFields');
                
                locationSelect.addEventListener('change', function() {
                    if (this.value === 'existing') {
                        existingFields.classList.remove('d-none');
                        newFields.classList.add('d-none');
                    } else if (this.value === 'new') {
                        existingFields.classList.add('d-none');
                        newFields.classList.remove('d-none');
                    }
                });
                
                // Toggle fee amount field
                const feeTypeSelect = document.getElementById('matchFeeType');
                const feeAmountField = document.getElementById('feeAmountField');
                
                feeTypeSelect.addEventListener('change', function() {
                    if (this.value === 'free') {
                        feeAmountField.classList.add('d-none');
                        document.getElementById('matchFeeAmount').removeAttribute('required');
                    } else {
                        feeAmountField.classList.remove('d-none');
                        document.getElementById('matchFeeAmount').setAttribute('required', 'required');
                    }
                });
                
                // Form submission (prevent default for demo purposes)
                const form = document.getElementById('createMatchForm');
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('¡Partido creado con éxito! En un entorno real, se enviaría el formulario y se procesarían los datos.');
                    // Here you would submit the form data to the server
                });
                
                // Map interaction simulation (for demo purposes)
                document.querySelector('.btn-success[title="Mi ubicación"]').addEventListener('click', function() {
                    document.getElementById('selectedLocation').textContent = 'Campo Municipal Norte, Calle Ejemplo 123, Madrid';
                    document.getElementById('selectedCoordinates').textContent = 'Lat: 40.4168, Lng: -3.7038';
                });
            });
        </script>
        {% endblock %}                   