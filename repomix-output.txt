This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: app
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)


================================================================
Directory Structure
================================================================
app/
  forms/
    canchas_forms.py
    equipo_forms.py
    partido_forms.py
    user_forms.py
  models/
    __init__.py
    cancha.py
    equipo.py
    historial.py
    inscripcion.py
    partido.py
    resultado.py
    user.py
  static/
    css/
      landing_styles.css
      login_styles.css
      registration_styles.css
  templates/
    auth/
      registration.html
    canchas/
      canchas_lista.html
      detalle_cancha.html
      registro_canchas.html
    components/
      svg/
        landing_location.html
        landing_player.html
        landing_team.html
        logo.html
        logo2_player.html
        logo3_balon_antiguo.html
      audio_toggle.html
      landing_nav.html
      nav.html
      top_nav.html
    equipos/
      crear_equipo_permanente.html
      detalle_equipo.html
      editar_equipo_permanente.html
      mis_equipos_lista.html
    estadisticas/
      estadisticas_generales.html
    global/
      landing_page.html
    partidos/
      buscar_partidos.html
      crear_partidos.html
      detalle_partido.html
      mis_partidos.html
      registrar_resultado.html
    perfil/
      perfil.html
      update_profile.html
    registration/
      logged_out.html
      login.html
      registro.html
    base.html
    canchas.html
    estadisticas.html
    home.html
    landing.html
    torneos.html
  templatetags/
    attribute_filters.py
  views/
    __init__.py
    canchas_views.py
    commons_views.py
    equipo_views.py
    estadisticas_views.py
    mis_partidos_views.py
    partido_views.py
    user_views.py
  admin.py
  apps.py
  context_processors.py
  tests.py
  urls.py

================================================================
Files
================================================================

================
File: app/static/css/landing_styles.css
================
/* ======= Variables CLEAN ======= */
:root {
    --primary: #00d4b1;
    --primary-rgb: 0, 212, 177;
    --accent: #8a5cf7;
    --accent-rgb: 138, 92, 247;
    --mint: #00d4b1;
    --teal: #20c997;
    
    --bg-canvas: #0f0f1a;
    --bg-surface: #1e1e2d;
    --bg-elevated: #262636;
    
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    
    --border-subtle: #374151;
    
    --gradient-primary: linear-gradient(135deg, var(--primary), var(--teal));
    --gradient-accent: linear-gradient(145deg, var(--accent), #8a5cf7);
    --gradient-cta: linear-gradient(145deg, var(--mint), var(--teal));
    
    --shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.24);
    
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    
    --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ======= Reset CLEAN ======= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family);
    background: var(--bg-canvas);
    color: var(--text-primary);
    line-height: 1.6;
    font-weight: 400;
    -webkit-font-smoothing: antialiased;
}

/* ======= Navbar CLEAN ======= */
.navbar {
    background: rgba(15, 15, 26, 0.8);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border-subtle);
    padding: 1rem 0;
    transition: var(--transition);
}

.navbar-brand {
    font-weight: 600;
    font-size: 1.5rem;
    color: var(--text-primary);
    text-decoration: none;
}

.nav-link {
    color: var(--text-secondary);
    font-weight: 500;
    padding: 0.5rem 1rem;
    transition: var(--transition);
    text-decoration: none;
}

.nav-link:hover {
    color: var(--primary);
}

/* ======= Auth Links CLEAN ======= */
.nav-link-auth {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-secondary);
    font-weight: 500;
    padding: 0.5rem 1rem;
    margin-right: 0.5rem;
    transition: var(--transition);
    text-decoration: none;
    border-radius: var(--radius-sm);
}

.nav-link-auth:hover {
    color: var(--primary);
    background: rgba(0, 212, 177, 0.1);
}

.nav-btn-register {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1.25rem;
    background: var(--gradient-cta);
    color: #ffffff;
    font-weight: 600;
    font-size: 0.9rem;
    text-decoration: none;
    border-radius: var(--radius-md);
    transition: var(--transition);
    box-shadow: var(--shadow-subtle);
}

.nav-btn-register:hover {
    color: #ffffff;
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

/* ======= Hero CLEAN ======= */
.hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
}

.hero::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 50%;
    height: 100%;
    background: linear-gradient(135deg, 
        rgba(0, 212, 177, 0.03) 0%, 
        rgba(138, 92, 247, 0.02) 100%);
    z-index: 1;
}

.hero-image {
    position: absolute;
    right: 0;
    bottom: 0;
    top: 0;
    width: 65%;
    z-index: 1;
    opacity: 0.4;
    pointer-events: none;
}

.hero-image img {
    position: absolute;
    right: 5%;
    bottom: 0;
    height: 85%;
    width: auto;
    object-fit: contain;
    filter: drop-shadow(0 0 40px rgba(0, 212, 177, 0.15));
    transition: var(--transition);
}

@media (max-width: 1024px) {
    .hero-image {
        opacity: 0.25;
        width: 40%;
    }
}

@media (max-width: 768px) {
    .hero-image {
        display: none;
    }
    
    .nav-link-auth,
    .nav-btn-register {
        justify-content: center;
        width: 100%;
        margin: 0.25rem 0;
    }
}

.hero-content {
    position: relative;
    z-index: 2;
    max-width: 600px;
}

.hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--bg-surface);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-xl);
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 2rem;
}

.hero-title {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    letter-spacing: -0.02em;
}

.hero-title .gradient-text {
    background: var(--gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.hero-subtitle {
    font-size: 1.25rem;
    color: var(--text-secondary);
    margin-bottom: 3rem;
    font-weight: 400;
}

.hero-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

/* ======= Buttons CLEAN ======= */
.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 2rem;
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 1rem;
    text-decoration: none;
    border: none;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.btn-primary {
    background: var(--gradient-cta);
    color: #ffffff;
    box-shadow: var(--shadow-md);
}

.btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-lg);
    color: #ffffff;
}

.btn-secondary {
    background: var(--bg-surface);
    color: var(--text-primary);
    border: 1px solid var(--border-subtle);
}

.btn-secondary:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
    transform: translateY(-1px);
}

/* ======= Features CLEAN ======= */
.features {
    padding: 6rem 0;
    background: var(--bg-surface);
}

.section-header {
    text-align: center;
    max-width: 600px;
    margin: 0 auto 4rem;
}

.section-title {
    font-size: clamp(2rem, 4vw, 2.5rem);
    font-weight: 700;
    margin-bottom: 1rem;
    letter-spacing: -0.02em;
}

.section-subtitle {
    font-size: 1.125rem;
    color: var(--text-secondary);
    font-weight: 400;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
}

.feature-card {
    background: var(--bg-canvas);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-lg);
    padding: 2rem;
    transition: var(--transition);
}

.feature-card:hover {
    transform: translateY(-2px);
    border-color: var(--primary);
    box-shadow: var(--shadow-md);
}

.feature-icon {
    width: 48px;
    height: 48px;
    background: var(--gradient-primary);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ffffff;
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
}

.feature-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: var(--text-primary);
}

.feature-description {
    color: var(--text-secondary);
    line-height: 1.6;
}

/* ======= Stats CLEAN ======= */
.stats {
    padding: 4rem 0;
    background: var(--bg-canvas);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
}

.stat-item {
    text-align: center;
    padding: 1.5rem;
}

.stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    background: var(--gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: block;
    line-height: 1;
    margin-bottom: 0.5rem;
}

.stat-label {
    color: var(--text-secondary);
    font-weight: 500;
}

/* ======= CTA CLEAN ======= */
.cta {
    padding: 6rem 0;
    background: var(--bg-surface);
    text-align: center;
}

.cta-content {
    max-width: 600px;
    margin: 0 auto;
}

.cta-title {
    font-size: clamp(2rem, 4vw, 2.5rem);
    font-weight: 700;
    margin-bottom: 1rem;
    letter-spacing: -0.02em;
}

.cta-subtitle {
    font-size: 1.125rem;
    color: var(--text-secondary);
    margin-bottom: 2rem;
}

/* ======= Footer CLEAN ======= */
.footer {
    background: var(--bg-canvas);
    border-top: 1px solid var(--border-subtle);
    padding: 3rem 0 2rem;
}

.footer-brand {
    font-weight: 600;
    font-size: 1.25rem;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.footer-description {
    color: var(--text-muted);
    margin-bottom: 2rem;
    max-width: 300px;
}

.footer-links {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.footer-links a {
    color: var(--text-secondary);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition);
}

.footer-links a:hover {
    color: var(--primary);
}

.footer-bottom {
    border-top: 1px solid var(--border-subtle);
    padding-top: 2rem;
    margin-top: 2rem;
    text-align: center;
}

.footer-bottom p {
    color: var(--text-muted);
    margin: 0;
}

/* ======= Animations CLEAN ======= */
.fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease;
}

.fade-in.visible {
    opacity: 1;
    transform: translateY(0);
}

/* ======= Responsive CLEAN ======= */
@media (max-width: 768px) {
    .hero-actions {
        flex-direction: column;
    }

    .btn {
        justify-content: center;
        width: 100%;
    }

    .features-grid {
        grid-template-columns: 1fr;
    }

    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 576px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
}

================
File: app/static/css/login_styles.css
================
/* ======= Variables CLEAN ======= */
:root {
    --primary: #00d4b1;
    --primary-rgb: 0, 212, 177;
    --accent: #8a5cf7;
    --accent-rgb: 138, 92, 247;
    --mint: #00d4b1;
    --teal: #20c997;
    
    --bg-canvas: #0f0f1a;
    --bg-surface: #1e1e2d;
    --bg-elevated: #262636;
    
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    
    --border-subtle: #374151;
    
    --gradient-primary: linear-gradient(135deg, var(--primary), var(--teal));
    --gradient-accent: linear-gradient(145deg, var(--accent), #8a5cf7);
    --gradient-cta: linear-gradient(145deg, var(--mint), var(--teal));
    
    --shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.24);
    
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    
    --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ======= Reset CLEAN ======= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family);
    background: var(--bg-canvas);
    color: var(--text-primary);
    line-height: 1.6;
    font-weight: 400;
    -webkit-font-smoothing: antialiased;
}

/* ======= Navbar CLEAN ======= */
.navbar {
    background: rgba(15, 15, 26, 0.8);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border-subtle);
    padding: 1rem 0;
    transition: var(--transition);
}

.navbar-brand {
    font-weight: 600;
    font-size: 1.5rem;
    color: var(--text-primary);
    text-decoration: none;
}

.nav-link {
    color: var(--text-secondary);
    font-weight: 500;
    padding: 0.5rem 1rem;
    transition: var(--transition);
    text-decoration: none;
}

.nav-link:hover {
    color: var(--primary);
}

/* ======= Register Button CLEAN ======= */
.nav-btn-register {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1.25rem;
    background: var(--gradient-cta);
    color: #ffffff;
    font-weight: 600;
    font-size: 0.9rem;
    text-decoration: none;
    border-radius: var(--radius-md);
    transition: var(--transition);
    box-shadow: var(--shadow-subtle);
}

.nav-btn-register:hover {
    color: #ffffff;
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

/* ======= Login Page CLEAN ======= */
.login-section {
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
    background: var(--bg-canvas);
    padding: 6rem 0 2rem;
}

.login-bg-pattern {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiB4PSIxMDAiIHk9IjI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMjEyLDE3NywwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNTAwIiByPSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMjEyLDE3NywwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIzMDAiIHg9IjEwMCIgeT0iMzUwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwyMTIsMTc3LDAuMDUpIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjMwMCIgeD0iNzIwIiB5PSIzNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDIxMiwxNzcsMC4wNSkiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg==');
    background-size: cover;
    background-position: center;
    opacity: 0.05;
    z-index: 1;
}

.login-hero-image {
    position: absolute;
    right: 0;
    bottom: 0;
    top: 0;
    width: 25%;
    z-index: 1;
    opacity: 0.6;
    pointer-events: none;
}

.login-hero-image img {
    position: absolute;
    right: 0;
    bottom: 0;
    height: 100%;
    width: auto;
    object-fit: contain;
    object-position: right center;
    filter: drop-shadow(0 0 40px rgba(0, 212, 177, 0.15));
}

.login-image-glow {
    position: absolute;
    top: 50%;
    right: 0;
    transform: translateY(-50%);
    width: 300px;
    height: 600px;
    background: radial-gradient(ellipse at center, rgba(0, 212, 177, 0.1) 0%, rgba(0, 212, 177, 0) 70%);
    filter: blur(40px);
    z-index: -1;
}

.login-card {
    background: var(--bg-surface);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-xl);
    padding: 3rem 2rem;
    position: relative;
    z-index: 2;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(20px);
}

.login-card-header {
    text-align: center;
    margin-bottom: 2.5rem;
}

.login-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1rem;
    letter-spacing: -0.02em;
}

.login-divider {
    width: 60px;
    height: 3px;
    background: var(--gradient-primary);
    border-radius: 3px;
    margin: 0 auto 1.5rem;
}

.login-subtitle {
    font-size: 1.125rem;
    color: var(--text-secondary);
    margin: 0;
    max-width: 400px;
    margin: 0 auto;
}

.login-form {
    width: 100%;
}

.form-grid {
    margin-bottom: 1.5rem;
}

.login-remember {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
}

.login-remember .form-check-input {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(0, 212, 177, 0.3);
    border-radius: var(--radius-sm);
}

.login-remember .form-check-input:checked {
    background: var(--gradient-primary);
    border-color: var(--primary);
}

.login-remember .form-check-label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    cursor: pointer;
}

.btn-login {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    width: 100%;
    padding: 1rem 2rem;
    background: var(--gradient-cta);
    color: #ffffff;
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 1.1rem;
    text-decoration: none;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: var(--shadow-md);
    margin-bottom: 1.5rem;
}

.btn-login:hover {
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.login-footer {
    text-align: center;
    color: var(--text-secondary);
}

.login-footer p {
    margin: 0;
    font-size: 0.95rem;
}

.login-link {
    color: var(--primary);
    text-decoration: none;
    font-weight: 600;
    transition: var(--transition);
}

.login-link:hover {
    color: var(--teal);
    text-decoration: underline;
}

.login-footer-section {
    background: var(--bg-canvas);
    border-top: 1px solid var(--border-subtle);
    padding: 2rem 0;
}

.footer-text {
    color: var(--text-muted);
    margin: 0;
    font-size: 0.9rem;
}

/* ======= Gradient Text Utility ======= */
.gradient-text {
    background: var(--gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* ======= Form Styles Integration ======= */
.login-form .form-control,
.login-form .form-select {
    background: var(--bg-canvas);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
    transition: var(--transition);
}

.login-form .form-control:focus,
.login-form .form-select:focus {
    background: var(--bg-canvas);
    border-color: var(--primary);
    box-shadow: 0 0 0 0.2rem rgba(0, 212, 177, 0.25);
    color: var(--text-primary);
}

.login-form .form-control::placeholder {
    color: var(--text-muted);
}

.login-form .form-label {
    color: var(--text-secondary);
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.login-form .invalid-feedback {
    color: #ef4444;
    font-size: 0.875rem;
}

.login-form .form-text {
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* ======= Animations CLEAN ======= */
.fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease;
}

.fade-in.visible {
    opacity: 1;
    transform: translateY(0);
}

/* ======= Responsive Login CLEAN ======= */
@media (max-width: 1200px) {
    .login-hero-image {
        opacity: 0.4;
        width: 20%;
    }
}

@media (max-width: 992px) {
    .login-hero-image {
        display: none;
    }
}

@media (max-width: 768px) {
    .login-section {
        padding: 4rem 0 1rem;
    }
    
    .login-card {
        padding: 2rem 1.5rem;
        margin: 1rem 0;
    }
    
    .login-title {
        font-size: 2rem;
    }
    
    .nav-btn-register {
        justify-content: center;
        width: 100%;
        margin: 0.25rem 0;
    }
}

@media (max-width: 576px) {
    .login-card {
        padding: 1.5rem 1rem;
    }
    
    .login-title {
        font-size: 1.75rem;
    }
}

================
File: app/static/css/registration_styles.css
================
/* ======= Variables CLEAN ======= */
:root {
    --primary: #00d4b1;
    --primary-rgb: 0, 212, 177;
    --accent: #8a5cf7;
    --accent-rgb: 138, 92, 247;
    --mint: #00d4b1;
    --teal: #20c997;
    
    --bg-canvas: #0f0f1a;
    --bg-surface: #1e1e2d;
    --bg-elevated: #262636;
    
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    
    --border-subtle: #374151;
    
    --gradient-primary: linear-gradient(135deg, var(--primary), var(--teal));
    --gradient-accent: linear-gradient(145deg, var(--accent), #8a5cf7);
    --gradient-cta: linear-gradient(145deg, var(--mint), var(--teal));
    
    --shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.24);
    
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    
    --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ======= Reset CLEAN ======= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family);
    background: var(--bg-canvas);
    color: var(--text-primary);
    line-height: 1.6;
    font-weight: 400;
    -webkit-font-smoothing: antialiased;
}

/* ======= Navbar CLEAN ======= */
.navbar {
    background: rgba(15, 15, 26, 0.8);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border-subtle);
    padding: 1rem 0;
    transition: var(--transition);
}

.navbar-brand {
    font-weight: 600;
    font-size: 1.5rem;
    color: var(--text-primary);
    text-decoration: none;
}

.nav-link {
    color: var(--text-secondary);
    font-weight: 500;
    padding: 0.5rem 1rem;
    transition: var(--transition);
    text-decoration: none;
}

.nav-link:hover {
    color: var(--primary);
}

/* ======= Auth Links CLEAN ======= */
.nav-link-auth {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-secondary);
    font-weight: 500;
    padding: 0.5rem 1rem;
    margin-right: 0.5rem;
    transition: var(--transition);
    text-decoration: none;
    border-radius: var(--radius-sm);
}

.nav-link-auth:hover {
    color: var(--primary);
    background: rgba(0, 212, 177, 0.1);
}

/* ======= Register Page CLEAN ======= */
.register-section {
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
    background: var(--bg-canvas);
    padding: 6rem 0 2rem;
}

.register-bg-pattern {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiB4PSIxMDAiIHk9IjI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMjEyLDE3NywwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNTAwIiByPSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMjEyLDE3NywwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIzMDAiIHg9IjEwMCIgeT0iMzUwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwyMTIsMTc3LDAuMDUpIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjMwMCIgeD0iNzIwIiB5PSIzNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDIxMiwxNzcsMC4wNSkiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg==');
    background-size: cover;
    background-position: center;
    opacity: 0.05;
    z-index: 1;
}

.register-hero-image {
    position: absolute;
    right: 0;
    bottom: 0;
    top: 0;
    width: 25%;
    z-index: 1;
    opacity: 0.6;
    pointer-events: none;
}

.register-hero-image img {
    position: absolute;
    right: 0;
    bottom: 0;
    height: 100%;
    width: auto;
    object-fit: contain;
    object-position: right center;
    filter: drop-shadow(0 0 40px rgba(0, 212, 177, 0.15));
}

.register-image-glow {
    position: absolute;
    top: 50%;
    right: 0;
    transform: translateY(-50%);
    width: 300px;
    height: 600px;
    background: radial-gradient(ellipse at center, rgba(0, 212, 177, 0.1) 0%, rgba(0, 212, 177, 0) 70%);
    filter: blur(40px);
    z-index: -1;
}

.register-card {
    background: var(--bg-surface);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-xl);
    padding: 3rem 2rem;
    position: relative;
    z-index: 2;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(20px);
}

.register-card-header {
    text-align: center;
    margin-bottom: 2.5rem;
}

.register-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1rem;
    letter-spacing: -0.02em;
}

.register-divider {
    width: 60px;
    height: 3px;
    background: var(--gradient-primary);
    border-radius: 3px;
    margin: 0 auto 1.5rem;
}

.register-subtitle {
    font-size: 1.125rem;
    color: var(--text-secondary);
    margin: 0;
    max-width: 400px;
    margin: 0 auto;
}

.register-form {
    width: 100%;
}

.form-grid {
    margin-bottom: 2rem;
}

.btn-register {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    width: 100%;
    padding: 1rem 2rem;
    background: var(--gradient-cta);
    color: #ffffff;
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 1.1rem;
    text-decoration: none;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: var(--shadow-md);
    margin-bottom: 1.5rem;
}

.btn-register:hover {
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.register-footer {
    text-align: center;
    color: var(--text-secondary);
}

.register-footer p {
    margin: 0;
    font-size: 0.95rem;
}

.register-link {
    color: var(--primary);
    text-decoration: none;
    font-weight: 600;
    transition: var(--transition);
}

.register-link:hover {
    color: var(--teal);
    text-decoration: underline;
}

.register-footer-section {
    background: var(--bg-canvas);
    border-top: 1px solid var(--border-subtle);
    padding: 2rem 0;
}

.footer-text {
    color: var(--text-muted);
    margin: 0;
    font-size: 0.9rem;
}

/* ======= Gradient Text Utility ======= */
.gradient-text {
    background: var(--gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* ======= Form Styles Integration ======= */
.register-form .form-control,
.register-form .form-select {
    background: var(--bg-canvas);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-sm);
    color: var(--text-primary);
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
    transition: var(--transition);
}

.register-form .form-control:focus,
.register-form .form-select:focus {
    background: var(--bg-canvas);
    border-color: var(--primary);
    box-shadow: 0 0 0 0.2rem rgba(0, 212, 177, 0.25);
    color: var(--text-primary);
}

.register-form .form-control::placeholder {
    color: var(--text-muted);
}

.register-form .form-label {
    color: var(--text-secondary);
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.register-form .invalid-feedback {
    color: #ef4444;
    font-size: 0.875rem;
}

.register-form .form-text {
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* ======= Animations CLEAN ======= */
.fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease;
}

.fade-in.visible {
    opacity: 1;
    transform: translateY(0);
}

/* ======= Responsive Register CLEAN ======= */
@media (max-width: 1200px) {
    .register-hero-image {
        opacity: 0.4;
        width: 20%;
    }
}

@media (max-width: 992px) {
    .register-hero-image {
        display: none;
    }
}

@media (max-width: 768px) {
    .register-section {
        padding: 4rem 0 1rem;
    }
    
    .register-card {
        padding: 2rem 1.5rem;
        margin: 1rem 0;
    }
    
    .register-title {
        font-size: 2rem;
    }
    
    .nav-link-auth {
        justify-content: center;
        width: 100%;
        margin: 0.25rem 0;
    }
}

@media (max-width: 576px) {
    .register-card {
        padding: 1.5rem 1rem;
    }
    
    .register-title {
        font-size: 1.75rem;
    }
}

================
File: app/templates/auth/registration.html
================
{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - FieldConnect</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{% static 'css/registration_styles.css' %}" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="{% url 'landing' %}">FieldConnect</a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <i class="fas fa-bars text-white"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link-auth" href="{% url 'login' %}">
                        <i class="fas fa-sign-in-alt"></i>
                        Iniciar sesión
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Register Section -->
    <section class="register-section">
        <!-- Background Elements -->
        <div class="register-bg-pattern"></div>
        
        <!-- Hero Image -->
        <div class="register-hero-image d-none d-xl-block">
            <img src="https://sportrenders.com/wp-content/uploads/2023/06/David-Beckham-Image-PNG-Render-Manchester-United-Futbol-Sport-Renders.png" alt="David Beckham" loading="lazy">
            <div class="register-image-glow"></div>
        </div>
        
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10 col-lg-8">
                    <div class="register-card fade-in">
                        <div class="register-card-header">
                            <h1 class="register-title">Crea tu cuenta</h1>
                            <div class="register-divider"></div>
                            <p class="register-subtitle">
                                Únete a la comunidad y empieza a disfrutar del fútbol como antes
                            </p>
                        </div>
                        
                        <form method="post" enctype="multipart/form-data" class="register-form">
                            {% csrf_token %}
                            
                            <div class="form-grid">
                                {{ form | crispy }}
                            </div>
                            
                            <button type="submit" class="btn btn-register">
                                <i class="fas fa-user-plus"></i>
                                Crear cuenta
                            </button>
                            
                            <div class="register-footer">
                                <p>¿Ya tienes una cuenta? 
                                    <a href="{% url 'login' %}" class="register-link">Inicia sesión</a>
                                </p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="register-footer-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="footer-text">© 2025 FieldConnect. Simple por diseño.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="footer-text">
                        Reviviendo el fútbol callejero 
                        <i class="fas fa-futbol gradient-text mx-1"></i>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Scroll animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });
    </script>
</body>
</html>

================
File: app/templates/components/svg/logo2_player.html
================
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="512" x="0" y="0" viewBox="0 0 60 60" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><g fill="#3f54ea"><path d="M33.812 15.244a.5.5 0 0 1-.346-.861l1.334-1.276-3.563 2.056a.5.5 0 0 1-.561-.823l2.471-1.972-3.607 2.084a.5.5 0 0 1-.564-.821L33.6 9.886 28.025 13.1a.5.5 0 0 1-.547-.834l3.707-2.752-3.957 2.286a.5.5 0 0 1-.562-.824l5.186-4.128-5.126 2.96a.5.5 0 0 1-.536-.844l.432-.3a.5.5 0 0 1-.425-.878l3.325-2.662-2.252 1.3a.5.5 0 0 1-.615-.776l2.185-2.315a.5.5 0 1 1-.5-.865L31.291.763a.5.5 0 0 1 .614.775l-2.184 2.318L34.73.964a.5.5 0 0 1 .563.823l-3.326 2.662L36.388 1.9a.5.5 0 0 1 .535.844L36.7 2.9l.459-.265a.5.5 0 0 1 .562.824l-5.186 4.123L38.2 4.314a.5.5 0 0 1 .548.834l-3.7 2.75L38.6 5.846a.5.5 0 0 1 .564.821L34.54 10.41l3.89-2.245a.5.5 0 0 1 .561.823l-2.474 1.974 1.391-.8a.5.5 0 0 1 .6.794l-1.665 1.591a.5.5 0 0 1 .177.927l-2.954 1.706a.494.494 0 0 1-.254.064zM22.277 59.238a.5.5 0 0 1-.345-.861l1.619-1.546-2.275 1.313a.5.5 0 0 1-.589-.8l3.3-3.052-3.252 1.877a.5.5 0 0 1-.548-.834l.705-.523a.506.506 0 0 1-.536-.206.5.5 0 0 1 .105-.673l2.123-1.663-1.1.631a.5.5 0 0 1-.574-.813l3.725-3.177-2.509 1.448a.5.5 0 0 1-.57-.816l3.424-2.864-2.253 1.3a.5.5 0 0 1-.571-.815l3.479-2.916-2.3 1.328a.5.5 0 1 1-.5-.865l7.265-4.195a.5.5 0 0 1 .571.815L27.2 44.246l2.285-1.319a.5.5 0 0 1 .571.816l-3.427 2.866 2.241-1.294a.5.5 0 0 1 .574.814l-3.725 3.177 2.5-1.44a.5.5 0 0 1 .559.826l-2.12 1.661 1.08-.624a.5.5 0 0 1 .549.834l-.768.572a.5.5 0 0 1 .432.858l-3.3 3.052 2.015-1.164a.5.5 0 0 1 .6.794l-1.62 1.547.5-.285a.5.5 0 0 1 .5.865l-4.1 2.369a.489.489 0 0 1-.269.067zM50.7 29.981a.5.5 0 0 1-.41-.785l.9-1.292-2.355 1.356a.5.5 0 0 1-.581-.808l.092-.081-.591.341a.5.5 0 0 1-.6-.791l.875-.851-1.642.948a.5.5 0 0 1-.637-.749L47.28 25.4l-2.831 1.634a.5.5 0 0 1-.617-.772l1.355-1.462-2.405 1.389a.5.5 0 0 1-.623-.765l1.494-1.68-2.66 1.536a.5.5 0 0 1-.622-.766l1.527-1.7-2.7 1.556a.5.5 0 0 1-.621-.768l1.566-1.73-2.743 1.583a.5.5 0 0 1-.61-.779l1.459-1.518-2.514 1.451a.5.5 0 0 1-.5-.865l5.572-3.217a.5.5 0 0 1 .61.78l-1.46 1.517 2.444-1.41a.5.5 0 0 1 .621.769l-1.565 1.728 2.666-1.539a.5.5 0 0 1 .622.767l-1.528 1.7 2.621-1.513a.5.5 0 0 1 .623.765l-1.492 1.679 2.583-1.492a.5.5 0 0 1 .617.773l-1.356 1.463 2.335-1.348a.5.5 0 0 1 .637.749l-1.529 1.87 2.749-1.585a.5.5 0 0 1 .6.791l-.875.851 1.418-.819a.5.5 0 0 1 .582.808l-.092.081a.5.5 0 0 1 .644.727l-.908 1.306a.5.5 0 0 1 .422.9l-1.85 1.067a.489.489 0 0 1-.246.069z" fill="#00d4b1" opacity="1" data-original="#3f54ea" class=""></path><path d="M20.187 47.324a.5.5 0 0 1-.309-.893l5.322-4.178-6.876 3.969a.5.5 0 0 1-.528-.848l1.065-.716-1.069.617a.5.5 0 0 1-.537-.841l5.066-3.551-4.644 2.681a.5.5 0 0 1-.541-.838l6.894-4.942-5.724 3.305a.5.5 0 0 1-.538-.842l5.963-4.194-4.844 2.8a.5.5 0 0 1-.532-.853l3.4-2.3-2.413 1.4a.5.5 0 0 1-.539-.841l6.3-4.461-5.16 2.978a.5.5 0 0 1-.537-.841l5.926-4.167-4.809 2.776a.5.5 0 0 1-.523-.856l4.686-3.049-3.708 2.14a.5.5 0 0 1-.524-.85l4.127-2.709-3.15 1.818a.5.5 0 0 1-.527-.849l3.721-2.472-2.741 1.583a.5.5 0 0 1-.542-.839l6.535-4.7-5.358 3.092a.5.5 0 0 1-.53-.847l.8-.539a.5.5 0 0 1-.456-.873l4.052-3.111-2.91 1.68a.5.5 0 0 1-.545-.837l.436-.317-4.327 2.5a.5.5 0 0 1-.565-.821l4.872-3.961-13.272 7.663a.5.5 0 0 1-.532-.846l5.34-3.645-6.713 3.875a.5.5 0 0 1-.553-.83l3.909-2.978-4.2 2.426a.5.5 0 0 1-.623-.766l.859-.964a.51.51 0 0 1-.524-.242.5.5 0 0 1 .183-.683l2.467-1.424a.5.5 0 0 1 .623.766l-.8.9 8.3-4.791a.5.5 0 0 1 .552.83l-3.908 2.978L25.865 13.4a.5.5 0 0 1 .532.846l-5.338 3.645 7.22-4.169a.5.5 0 0 1 .566.82l-4.871 3.961 7.051-4.071a.5.5 0 0 1 .545.836l-.438.319 1.349-.778a.5.5 0 0 1 .555.829l-4.055 3.112 5.8-3.346a.5.5 0 0 1 .53.848l-.657.44 1.4-.8a.5.5 0 0 1 .542.838l-6.536 4.7 7.831-4.53a.5.5 0 0 1 .526.849l-3.725 2.476 4.5-2.6a.5.5 0 0 1 .525.85l-4.119 2.7 4.9-2.83a.5.5 0 0 1 .522.852l-6.183 4.022a.5.5 0 0 1 .235.907L29.146 28.3l4.817-2.781a.5.5 0 0 1 .539.841l-6.3 4.463 5.167-2.983a.5.5 0 0 1 .53.846l-3.4 2.3 2.415-1.386a.5.5 0 0 1 .538.841l-5.967 4.2 4.854-2.8a.5.5 0 0 1 .541.839l-6.889 4.937 5.708-3.3a.5.5 0 0 1 .537.842l-5.073 3.556 4-2.309a.5.5 0 0 1 .528.848l-1.059.712.152-.088a.5.5 0 0 1 .559.826l-7.994 6.278.009.016a.5.5 0 0 1-.182.683l-2.738 1.58a.5.5 0 0 1-.251.063z" fill="#00d4b1" opacity="1" data-original="#3f54ea" class=""></path></g><path fill="#cbcdcf" d="M13.014 59.36a.5.5 0 0 1-.339-.868l.411-.377-1.994 1.151a.5.5 0 0 1-.568-.82l1.428-1.174L9.6 58.634a.5.5 0 0 1-.558-.827l1.673-1.307-2.159 1.246a.5.5 0 0 1-.565-.821l2.764-2.237-3.044 1.756a.5.5 0 0 1-.549-.833l.974-.728-.768.443a.5.5 0 0 1-.561-.823l1.625-1.3-1.119.646a.5.5 0 0 1-.618-.771l1.755-1.912a.5.5 0 0 1-.395-.911l2.681-1.548a.5.5 0 0 1 .618.771L9.629 51.36l4.079-2.354a.5.5 0 0 1 .562.823l-1.624 1.3 2.32-1.339a.5.5 0 0 1 .549.833l-.973.728 1.218-.7a.5.5 0 0 1 .564.821L13.558 53.7l2.912-1.681a.5.5 0 0 1 .557.828l-1.674 1.3 1.356-.783a.5.5 0 0 1 .567.819l-1.428 1.175.659-.381a.5.5 0 0 1 .589.8l-1.175 1.08a.49.49 0 0 1 .207.2.5.5 0 0 1-.183.682l-2.681 1.548a.489.489 0 0 1-.25.073z" opacity="1" data-original="#c0daf0" class=""></path><path fill="#424643" d="M25.363 58.717a4.281 4.281 0 0 0 1.909-3.017l8.448-32.8 8.016 4.093c2.652 1.371 7.288 4.819 9.644 1.2 1.294-2.644-1.284-3.754-3.125-4.778-5.319-2.671-10.191-6.322-15.816-8.31C42.687 12.132 40.71-1.854 30.9.836c-4.909 1.491-6.955 9.105-3.3 12.712-4.156-.239-7.9 2.443-11.8 3.6-2.908 1.523-7.253 1.8-9.276 4.463a2.693 2.693 0 0 0 2.439 3.7c4.592-.666 8.937-2.862 13.424-4.107-1.771 7.377-4.087 14.646-5.712 22.041-.617 3.38 2.864 4.594 5.286 3.447-.742 2.817-1.532 5.635-2.126 8.479-.7 3.348 2.789 5.123 5.528 3.546zm1.985-51.334c.82-8.24 11.343-7.434 10.774.607-.631 9.04-11.952 8.188-10.774-.607zM21.2 55.3c1.188-5.5 2.849-10.929 4.245-16.394-.005-.773-1.377-.551-1.47.1-.515 2.005-1.112 4-1.586 6.012-1.289 2.983-4.641.722-4.308-1.843 1.613-6.444 3.34-12.868 4.99-19.306l.871-3.353c.1-.392-.851-.132-.979-.09l-12.198 4.049a2.235 2.235 0 1 1-1.324-4.265l15.065-5.8c1.969-.617 3.885.082 5.725.734 3.612.323 6.7 1.943 9.727 3.809l8.095 4.5c1.848 1.027 5.22 2.189 3.9 4.935-1.045 1.42-2.669.224-3.868-.389l-4.833-2.469c-1.66-.485-7.883-5.015-8.719-3.365q-4.419 17.151-8.834 34.3c-.627 3.753-4.822 1.902-4.499-1.165z" opacity="1" data-original="#262626" class=""></path><path fill="#424643" d="M14.011 48.926c-9.183-2.177-10.776 11.669-.959 10.2 5.409-.896 6.436-8.563.959-10.2zm-.592 9.63c-5.217 1.423-7.968-6.8-3.1-9.006 5.481-1.85 8.413 6.955 3.1 9.006z" opacity="1" data-original="#262626" class=""></path></g></svg>

================
File: app/templates/components/svg/logo3_balon_antiguo.html
================
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="512" x="0" y="0" viewBox="0 0 66 66" style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M22.2 63.1C9.9 58.7 1 46.9 1 33c0-1.2.1-2.5.2-3.7 4.6 11.9 16.6 19.2 32.4 19.6-1.9 6.2-6.1 11-11.4 14.2z" fill="#00d4b1" opacity="1" data-original="#000000" class=""></path><path d="M2.1 24.9c1.4-5.5 4.3-10.4 8.2-14.3 1 12.9 10.5 23.1 22.1 23.5 2.1 3.9 2.7 8.3 1.8 12.7-16.8-.3-29.1-8.6-32.1-21.9z" fill="#00d4b1" opacity="1" data-original="#000000" class=""></path><path d="M41.4 63.9c-2.7.7-5.5 1.1-8.4 1.1-2.8 0-5.5-.4-8.1-1 10.3-7.1 15.1-20.3 9.4-30.9 2.4-3.8 5.9-6.5 10.1-7.9 8.1 14.6 7 29.3-3 38.7zM18.9 25.6c-4-4.2-6.5-10.3-6.6-16.9C17.9 3.9 25.1 1 33 1c7.1 0 13.7 2.3 19 6.3-12.5-1.9-24.8 4.8-33.1 18.3z" fill="#00d4b1" opacity="1" data-original="#000000" class=""></path><path d="M55.5 10.3c3.9 3.9 6.9 8.8 8.4 14.3-11.2-5.3-25-3-31.4 7.4-4.5-.1-8.6-1.9-11.9-4.8 8.5-14.5 21.8-20.9 34.9-16.9z" fill="#00d4b1" opacity="1" data-original="#000000" class=""></path><path d="M65 33c0 13.1-7.9 24.4-19.3 29.3 7.9-9.9 8.3-23.9.7-37.8 5.7-1.3 12.1-.5 18 2.7.4 1.9.6 3.8.6 5.8z" fill="#00d4b1" opacity="1" data-original="#000000" class=""></path></g></svg>

================
File: app/templates/estadisticas/estadisticas_generales.html
================
{% extends 'base.html' %}
{% load attribute_filters %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
                                <div>
                                    <h4 class="text-white mb-1">{{ titulo_pagina|default:"Estadísticas" }}</h4>
                                    <p class="text-white-50 mb-md-0">Rankings y datos de la comunidad.</p>
                                </div>
                                <!-- Filtro de Periodo -->
                                <div class="btn-group mt-3 mt-md-0" role="group" aria-label="Filtro de periodo">
                                    <a href="?periodo=7dias" class="btn btn-sm {% if periodo_actual_param == '7dias' %}btn-success{% else %}btn-outline-success{% endif %}">7 Días</a>
                                    <a href="?periodo=30dias" class="btn btn-sm {% if periodo_actual_param == '30dias' %}btn-success{% else %}btn-outline-success{% endif %}">Último Mes</a>
                                    <a href="?periodo=todo" class="btn btn-sm {% if periodo_actual_param == 'todo' %}btn-success{% else %}btn-outline-success{% endif %}">Todo</a>
                                </div>
                            </div>
                             {% if periodo_seleccionado != "Todo el tiempo" %}
                                <p class="text-center text-white-50 mt-2"><small>Mostrando estadísticas para: <strong>{{ periodo_seleccionado }}</strong></small></p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show mb-3" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="row g-4">
                <!-- Columna Izquierda: Jugadores -->
                <div class="col-lg-6">
                    <!-- Top ELO Jugadores -->
                    <div class="card mb-4" style="background-color: #2d3748; border-radius: 10px; color:white;">
                        <div class="card-header bg-transparent border-bottom-0 pt-3 pb-0">
                            <h5 class="text-warning"><i class="fas fa-star me-2"></i>Top 10 Jugadores por ELO</h5>
                        </div>
                        <div class="card-body p-3">
                            {% if top_elo_jugadores %}
                                <ul class="list-group list-group-flush">
                                    {% for jugador in top_elo_jugadores %}
                                    <li class="list-group-item bg-transparent border-secondary text-white d-flex justify-content-between align-items-center">
                                        <span>
                                            <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" class="rounded-circle me-2" width="30" height="30" alt="{{ jugador.nombre }}">
                                            {{ forloop.counter }}. {{ jugador.nombre }}
                                        </span>
                                        <span class="badge bg-warning text-dark">{{ jugador.calificacion|floatformat:0 }} ELO</span>
                                    </li>
                                    {% endfor %}
                                </ul>
                                {# <div class="text-center mt-2"><a href="#" class="btn btn-sm btn-outline-light">Ver ranking ELO completo</a></div> #}
                            {% else %}
                                <p class="text-white-50">No hay datos de ELO para mostrar.</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Jugadores más Activos -->
                    <div class="card" style="background-color: #2d3748; border-radius: 10px; color:white;">
                        <div class="card-header bg-transparent border-bottom-0 pt-3 pb-0">
                            <h5 class="text-info"><i class="fas fa-running me-2"></i>Top 10 Jugadores Más Activos <small class="text-white-50">({{ periodo_seleccionado }})</small></h5>
                        </div>
                        <div class="card-body p-3">
                            {% if top_jugadores_activos %}
                                <ul class="list-group list-group-flush">
                                    {% for jugador in top_jugadores_activos %}
                                    <li class="list-group-item bg-transparent border-secondary text-white d-flex justify-content-between align-items-center">
                                        <span>
                                            <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" class="rounded-circle me-2" width="30" height="30" alt="{{ jugador.nombre }}">
                                            {{ forloop.counter }}. {{ jugador.nombre }}
                                        </span>
                                        <span class="badge bg-info text-dark">{{ jugador.num_partidos_periodo }} Partidos</span>
                                    </li>
                                    {% endfor %}
                                </ul>
                                {# <div class="text-center mt-2"><a href="#" class="btn btn-sm btn-outline-light">Ver ranking de actividad completo</a></div> #}
                            {% else %}
                                <p class="text-white-50">No hay datos de actividad de jugadores para este periodo.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Columna Derecha: Equipos y Canchas -->
                <div class="col-lg-6">
                    <!-- Top Equipos -->
                    <div class="card mb-4" style="background-color: #2d3748; border-radius: 10px; color:white;">
                        <div class="card-header bg-transparent border-bottom-0 pt-3 pb-0">
                            <h5 class="text-primary"><i class="fas fa-users me-2"></i>Top 10 Equipos <small class="text-white-50">({{ periodo_seleccionado }})</small></h5>
                            <small class="text-white-50 d-block">Ordenados por victorias, luego por partidos jugados.</small>
                        </div>
                        <div class="card-body p-3">
                            {% if top_equipos_activos %}
                                <ul class="list-group list-group-flush">
                                    {% for equipo_stat in top_equipos_activos %}
                                    <li class="list-group-item bg-transparent border-secondary text-white d-flex justify-content-between align-items-center">
                                        <span>
                                            <img src="{% if equipo_stat.team_shield %}{{ equipo_stat.team_shield.url }}{% else %}{% static 'images/shield_default.png' %}{% endif %}" class="rounded-circle me-2" width="30" height="30" alt="Escudo">
                                            {{ forloop.counter }}. {{ equipo_stat.nombre_equipo }}
                                        </span>
                                        <span class="badge bg-primary">
                                            {% if periodo_actual_param == 'todo' and equipo_stat|hasattr:'victorias_permanente' %}
                                                {{ equipo_stat.victorias_permanente }} Vic. / {{ equipo_stat.partidos_jugados_permanente }} Jug.
                                            {% elif equipo_stat|hasattr:'victorias_periodo' %}
                                                {{ equipo_stat.victorias_periodo }} Vic. / {{ equipo_stat.partidos_jugados_periodo }} Jug.
                                            {% elif equipo_stat|hasattr:'num_victorias' %}
                                                {{ equipo_stat.num_victorias }} Vic. / {{ equipo_stat.num_partidos }} Jug.
                                            {% else %}
                                                N/A
                                            {% endif %}
                                        </span>
                                    </li>
                                    {% endfor %}
                                </ul>
                                {# <div class="text-center mt-2"><a href="#" class="btn btn-sm btn-outline-light">Ver ranking de equipos completo</a></div> #}
                            {% else %}
                                <p class="text-white-50">No hay datos de equipos para este periodo.</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Canchas más Populares -->
                    <div class="card" style="background-color: #2d3748; border-radius: 10px; color:white;">
                        <div class="card-header bg-transparent border-bottom-0 pt-3 pb-0">
                            <h5 class="text-success-emphasis"><i class="fas fa-map-marked-alt me-2"></i>Top 10 Canchas Más Populares <small class="text-white-50">({{ periodo_seleccionado }})</small></h5>
                        </div>
                        <div class="card-body p-3">
                            {% if top_canchas_populares %}
                                <ul class="list-group list-group-flush">
                                    {% for cancha_stat in top_canchas_populares %}
                                    <li class="list-group-item bg-transparent border-secondary text-white d-flex justify-content-between align-items-center">
                                        <span>
                                            <i class="fas fa-map-pin me-2 text-success-emphasis"></i>
                                            {{ forloop.counter }}. {{ cancha_stat.nombre_cancha }}
                                        </span>
                                        <span class="badge bg-success-subtle text-dark-emphasis">{{ cancha_stat.num_partidos_cancha }} Partidos</span>
                                    </li>
                                    {% endfor %}
                                </ul>
                                {# <div class="text-center mt-2"><a href="#" class="btn btn-sm btn-outline-light">Ver listado completo de canchas</a></div> #}
                            {% else %}
                                <p class="text-white-50">No hay datos de popularidad de canchas para este periodo.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/global/landing_page.html
================
{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeRabona - Conecta. Juega. Simple.</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{% static 'css/landing_styles.css' %}" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">De Rabona</a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <i class="fas fa-bars text-white"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav me-auto">
                    <a class="nav-link" href="#inicio">Inicio</a>
                    <a class="nav-link" href="#features">Features</a>
                    <a class="nav-link" href="#stats">Stats</a>
                </div>
                <div class="navbar-nav ms-auto">
                    <a class="nav-link-auth" href="{% url 'login' %}">
                        <i class="fas fa-sign-in-alt"></i>
                        Iniciar sesión
                    </a>
                    <a class="nav-btn-register" href="{% url 'registro' %}">
                        <i class="fas fa-user-plus"></i>
                        Registrarse
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section id="inicio" class="hero">
        <!-- Hero Image - Clean Integration -->
        <div class="hero-image d-none d-md-block">
            <img src="https://sportrenders.com/wp-content/uploads/2023/07/Messi-FC-Barcelona-Image-PNG-Render-Futbol-Sport-Renders-1.png" alt="Ronaldo" loading="lazy">
        </div>
        
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="hero-content">
                        
                        <h1 class="hero-title">
                            Conecta.
                            Juega.<br>
                            <span class="gradient-text">Gana.</span>
                            
                        </h1>
                        
                        <p class="hero-subtitle">
                            El fútbol de los 90 con la<span class="gradient-text"> tecnología</span> del presente<br>
                        </p>
                        
                        <div class="hero-actions">
                            <a href="#register" class="btn btn-primary">
                                <i class="fas fa-play"></i>
                                Comenzar
                            </a>
                            <a href="#features" class="btn btn-secondary">
                                Ver más
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section id="features" class="features">
        <div class="container">
            <div class="section-header fade-in">
                <h2 class="section-title">Simple. Directo. Efectivo.</h2>
                <p class="section-subtitle">
                    Todo lo que necesitas para organizar partidos, nada más.
                </p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card fade-in">
                    <div class="feature-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3 class="feature-title">Encuentra partidos</h3>
                    <p class="feature-description">
                        Localiza partidos cerca de ti en segundos. Filtros simples, resultados precisos.
                    </p>
                </div>
                
                <div class="feature-card fade-in">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3 class="feature-title">Conecta jugadores</h3>
                    <p class="feature-description">
                        Únete a partidos o crea los tuyos. Comunicación directa, confirmación instantánea.
                    </p>
                </div>
                
                <div class="feature-card fade-in">
                    <div class="feature-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3 class="feature-title">Organiza fácil</h3>
                    <p class="feature-description">
                        Programa, invita, confirma. Todo en unos pocos toques. Sin llamadas infinitas.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats -->
    <section id="stats" class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item fade-in">
                    <span class="stat-number">12K+</span>
                    <div class="stat-label">Jugadores activos</div>
                </div>
                <div class="stat-item fade-in">
                    <span class="stat-number">3.2K+</span>
                    <div class="stat-label">Partidos semanales</div>
                </div>
                <div class="stat-item fade-in">
                    <span class="stat-number">450+</span>
                    <div class="stat-label">Canchas activas</div>
                </div>
                <div class="stat-item fade-in">
                    <span class="stat-number">4.8</span>
                    <div class="stat-label">Rating promedio</div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta">
        <div class="container">
            <div class="cta-content fade-in">
                <h2 class="cta-title">¿Listo para jugar?</h2>
                <p class="cta-subtitle">
                    Únete a la comunidad más simple y directa para organizar partidos de fútbol.
                </p>
                <a href="#register" class="btn btn-primary">
                    <i class="fas fa-user-plus"></i>
                    Crear cuenta gratis
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <div class="footer-brand">FieldConnect</div>
                    <p class="footer-description">
                        La forma más simple de conectar con el fútbol que amas.
                    </p>
                </div>
                <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                    <div class="footer-links">
                        <a href="#">Producto</a>
                        <a href="#">Features</a>
                        <a href="#">Precios</a>
                    </div>
                </div>
                <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                    <div class="footer-links">
                        <a href="#">Empresa</a>
                        <a href="#">Blog</a>
                        <a href="#">Contacto</a>
                    </div>
                </div>
                <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                    <div class="footer-links">
                        <a href="#">Legal</a>
                        <a href="#">Privacidad</a>
                        <a href="#">Términos</a>
                    </div>
                </div>
                <div class="col-lg-2 col-6">
                    <div class="footer-links">
                        <a href="#">Soporte</a>
                        <a href="#">FAQ</a>
                        <a href="#">Ayuda</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 DeRabona. Conectando jugadores desde el barrio hasta el estadio.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const navHeight = document.querySelector('.navbar').offsetHeight;
                    window.scrollTo({
                        top: target.offsetTop - navHeight,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Scroll animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Counter animation
        const animateCounters = () => {
            const counters = document.querySelectorAll('.stat-number');
            counters.forEach(counter => {
                const target = parseFloat(counter.textContent.replace(/[^\d.]/g, ''));
                let current = 0;
                const increment = target / 50;
                
                const updateCounter = () => {
                    if (current < target) {
                        current += increment;
                        if (counter.textContent.includes('.')) {
                            counter.textContent = current.toFixed(1);
                        } else {
                            counter.textContent = Math.floor(current).toLocaleString() + 
                                (counter.textContent.includes('K') ? 'K+' : 
                                 counter.textContent.includes('+') ? '+' : '');
                        }
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.textContent = counter.textContent; // restore original
                    }
                };
                updateCounter();
            });
        };

        // Trigger counter animation when stats section is visible
        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounters();
                    statsObserver.unobserve(entry.target);
                }
            });
        });

        const statsSection = document.querySelector('#stats');
        if (statsSection) {
            statsObserver.observe(statsSection);
        }
    </script>
</body>
</html>

================
File: app/templates/partidos/mis_partidos.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4 d-flex justify-content-between align-items-center">
                            <div>
                                <h4 class="text-white mb-1">{{ titulo_pagina|default:"Mis Partidos" }}</h4>
                                <p class="text-white-50 mb-0">Consulta tus próximos partidos y tu historial.</p>
                            </div>
                            <a href="{% url 'crear_partidos' %}" class="btn btn-success">
                                <i class="fas fa-plus-circle me-2"></i>Organizar un Partido
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show mb-3" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Sección Próximos Partidos -->
            <div class="mb-5">
                <h5 class="text-success mb-3"><i class="fas fa-calendar-alt me-2"></i>Próximos Partidos</h5>
                {% if proximos_partidos_info %}
                    <div class="row g-4">
                        {% for item in proximos_partidos_info %}
                            {% with partido=item.partido es_creador=item.es_creador inscripcion_esta_abierta=item.inscripcion_esta_abierta plazas_disponibles=item.plazas_disponibles %}
                            <div class="col-md-6 col-lg-4">
                                <div class="card h-100 {% if es_creador %}border-primary border-2{% endif %}" style="background-color: #2d3748; border-radius: 10px; color:white;">
                                    <div class="card-body d-flex flex-column">
                                        <h6 class="card-title text-white">
                                            <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="text-white text-decoration-none">
                                                {{ partido.cancha.nombre_cancha }}
                                            </a>
                                        </h6>
                                        <p class="small text-white-50 mb-1"><i class="fas fa-calendar-day me-1"></i> {{ partido.fecha|date:"d/m/Y \a \l\a\s H:i" }}</p>
                                        <p class="small text-white-50 mb-1"><i class="fas fa-map-marker-alt me-1"></i> {{ partido.cancha.ubicacion|truncatechars:30 }}</p>
                                        <p class="small text-white-50 mb-2"><i class="fas fa-running me-1"></i> {{ partido.get_tipo_display }} - {{ partido.get_modalidad_display }}</p>
                                        
                                        <div class="progress bg-dark mb-1" style="height: 8px;">
                                            <div class="progress-bar {% if partido.jugadores.count >= partido.max_jugadores %}bg-danger{% else %}bg-success{% endif %}" role="progressbar" style="width: {% widthratio partido.jugadores.count partido.max_jugadores 100 %}%" aria-valuenow="{{ partido.jugadores.count }}" aria-valuemin="0" aria-valuemax="{{ partido.max_jugadores }}"></div>
                                        </div>
                                        <p class="small text-white-50 mb-2">{{ partido.jugadores.count }}/{{ partido.max_jugadores }} jugadores</p>

                                        {% if es_creador %}
                                            <span class="badge bg-primary mb-2">Eres el creador</span>
                                        {% endif %}
                                        {% if inscripcion_esta_abierta %}
                                            <span class="badge bg-info text-dark mb-2">Inscripción Abierta</span>
                                        {% elif partido.estado == 'PROGRAMADO' %}
                                            <span class="badge bg-warning text-dark mb-2">Inscripción Cerrada</span>
                                        {% endif %}
                                        
                                        <div class="mt-auto">
                                            <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-sm btn-outline-light w-100">Ver Detalles</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endwith %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="card" style="background-color: #2d3748; border-radius: 10px;">
                        <div class="card-body text-center text-white-50 p-4">
                            <i class="fas fa-calendar-plus fa-2x mb-2"></i>
                            <p>No tienes próximos partidos programados o en los que estés inscrito.</p>
                            <a href="{% url 'buscar_partidos' %}" class="btn btn-success btn-sm">Buscar Partidos</a>
                        </div>
                    </div>
                {% endif %}
            </div>

            <!-- Sección Historial de Partidos Jugados -->
            <div>
                <h5 class="text-warning mb-3"><i class="fas fa-history me-2"></i>Historial de Partidos Jugados</h5>
                 {% if partidos_jugados_info %}
                    <div class="list-group">
                        {% for item in partidos_jugados_info %}
                         {% with partido=item.partido es_creador=item.es_creador resultado_str=item.resultado_str %}
                            <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="list-group-item list-group-item-action flex-column align-items-start mb-2" style="background-color: #2d3748; border-color: #374151; color:white; border-radius: 8px;">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1 text-white">{{ partido.cancha.nombre_cancha }} - {{ partido.get_tipo_display }}</h6>
                                    <small class="text-white-50">{{ partido.fecha|date:"d/m/Y" }}</small>
                                </div>
                                <p class="mb-1 text-white-75 small">
                                    Modalidad: {{ partido.get_modalidad_display }}.
                                    {% if partido.estado == 'FINALIZADO' %}
                                        Resultado: {{ resultado_str }}
                                    {% else %}
                                        Estado: {{ partido.get_estado_display }}
                                    {% endif %}
                                </p>
                                {% if es_creador and partido.estado == 'PROGRAMADO' %} {# Partido pasado que no se finalizó #}
                                    <small class="text-danger">Este partido pasado no tiene resultado. <span class="badge bg-danger">Registrar Ahora</span></small>
                                {% elif es_creador and partido.estado == 'EN_CURSO' and partido.fecha < ahora %}
                                    <small class="text-danger">Este partido parece haber finalizado. <span class="badge bg-danger">Registrar Resultado</span></small>
                                {% endif %}
                            </a>
                         {% endwith %}
                        {% endfor %}
                    </div>
                {% else %}
                     <div class="card" style="background-color: #2d3748; border-radius: 10px;">
                        <div class="card-body text-center text-white-50 p-4">
                            <i class="fas fa-receipt fa-2x mb-2"></i>
                            <p>Aún no tienes partidos en tu historial.</p>
                        </div>
                    </div>
                {% endif %}
            </div>
            
            <!-- Paginación (si la implementas para cada sección) -->

        </div>
    </div>
</div>
{% endblock %}

================
File: app/templatetags/attribute_filters.py
================
from django import template

register = template.Library()

@register.filter(name='hasattr')
def hasattr_filter(obj, attr_name):
    return hasattr(obj, attr_name)

================
File: app/views/estadisticas_views.py
================
from django.views.generic import TemplateView
from django.contrib.auth.mixins import LoginRequiredMixin
from app.models import User, Partido, Equipo, Cancha 
from django.db.models import Count, F, Q, ExpressionWrapper, DateTimeField, IntegerField, FloatField
from django.utils import timezone
from datetime import timedelta

class EstadisticasView(LoginRequiredMixin, TemplateView):
    template_name = 'estadisticas/estadisticas_generales.html'

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = "Estadísticas de la Comunidad"

        # --- Filtro de Periodo ---
        periodo = self.request.GET.get('periodo', 'todo')
        fecha_desde = None
        now = timezone.now() # Usar el timezone de Django

        if periodo == '7dias':
            fecha_desde = now - timedelta(days=7)
            context['periodo_seleccionado'] = "Últimos 7 días"
        elif periodo == '30dias':
            fecha_desde = now - timedelta(days=30)
            context['periodo_seleccionado'] = "Último mes"
        else:
            periodo = 'todo' # Asegurar que el valor sea consistente para el template
            context['periodo_seleccionado'] = "Todo el tiempo"
        
        context['periodo_actual_param'] = periodo

        # --- 1. Jugadores con más Puntuación ELO (Top 10) ---
        context['top_elo_jugadores'] = User.objects.filter(
            is_active=True
        ).order_by('-calificacion')[:10]

        # --- 2. Jugadores más Activos (más partidos jugados en el periodo) (Top 10) ---
        # Usaremos el related_name 'get_jugadores_partido' de Partido.jugadores
        jugadores_activos_query = User.objects.filter(is_active=True)
        
        if fecha_desde:
            jugadores_activos_query = jugadores_activos_query.annotate(
                num_partidos_periodo=Count(
                    'get_jugadores_partido', # related_name desde User a Partido via Partido.jugadores
                    filter=Q(get_jugadores_partido__estado='FINALIZADO', get_jugadores_partido__fecha__gte=fecha_desde)
                )
            ).filter(num_partidos_periodo__gt=0).order_by('-num_partidos_periodo', '-calificacion')[:10]
        else: # Todo el tiempo
            # Usamos el campo 'partidos_jugados' del modelo User, que se actualiza en registrar_resultado_y_actualizar_stats
            jugadores_activos_query = jugadores_activos_query.filter(
                partidos_jugados__gt=0
            ).order_by('-partidos_jugados', '-calificacion')[:10]
        
        context['top_jugadores_activos'] = jugadores_activos_query


        # --- 3. Equipos Permanentes con más Partidos y Victorias (Top 10) ---
        # Usaremos los campos 'partidos_jugados_permanente' y 'victorias_permanente' si el periodo es 'todo'.
        # Para periodos filtrados, calcularemos dinámicamente.
        equipos_query = Equipo.objects.filter(tipo_equipo='PERMANENTE', activo=True)
        
        # Para pasar al template y decidir qué campos mostrar
        context['equipo_usa_stats_precalculadas_para_periodo_todo'] = hasattr(Equipo, 'partidos_jugados_permanente')

        if fecha_desde:
            equipos_query = equipos_query.annotate(
                partidos_jugados_periodo_local=Count(
                    'get_equipo_local', # related_name de Partido.equipo_local
                    filter=Q(get_equipo_local__estado='FINALIZADO', get_equipo_local__fecha__gte=fecha_desde)
                ),
                partidos_jugados_periodo_visitante=Count(
                    'get_equipo_visitante', # related_name de Partido.equipo_visitante
                    filter=Q(get_equipo_visitante__estado='FINALIZADO', get_equipo_visitante__fecha__gte=fecha_desde)
                ),
                victorias_periodo_local=Count(
                    'get_equipo_local', 
                    filter=Q(get_equipo_local__estado='FINALIZADO', 
                             get_equipo_local__fecha__gte=fecha_desde, 
                             get_equipo_local__goles_local__gt=F('get_equipo_local__goles_visitante'))
                ),
                victorias_periodo_visitante=Count(
                    'get_equipo_visitante', 
                    filter=Q(get_equipo_visitante__estado='FINALIZADO', 
                             get_equipo_visitante__fecha__gte=fecha_desde, 
                             get_equipo_visitante__goles_visitante__gt=F('get_equipo_visitante__goles_local'))
                )
            ).annotate(
                # Sumar los conteos para obtener el total del periodo
                partidos_jugados_periodo=ExpressionWrapper(F('partidos_jugados_periodo_local') + F('partidos_jugados_periodo_visitante'), output_field=IntegerField()),
                victorias_periodo=ExpressionWrapper(F('victorias_periodo_local') + F('victorias_periodo_visitante'), output_field=IntegerField())
            ).filter(partidos_jugados_periodo__gt=0).order_by('-victorias_periodo', '-partidos_jugados_periodo')[:10]
        else: # Todo el tiempo
            if hasattr(Equipo, 'partidos_jugados_permanente') and hasattr(Equipo, 'victorias_permanente'):
                 equipos_query = equipos_query.filter(partidos_jugados_permanente__gt=0).order_by('-victorias_permanente', '-partidos_jugados_permanente')[:10]
            else: # Fallback si no tienes los campos precalculados
                equipos_query = equipos_query.annotate(
                    num_partidos_local=Count('get_equipo_local', filter=Q(get_equipo_local__estado='FINALIZADO')),
                    num_partidos_visitante=Count('get_equipo_visitante', filter=Q(get_equipo_visitante__estado='FINALIZADO')),
                    num_victorias_local=Count('get_equipo_local', filter=Q(get_equipo_local__estado='FINALIZADO', get_equipo_local__goles_local__gt=F('get_equipo_local__goles_visitante'))),
                    num_victorias_visitante=Count('get_equipo_visitante', filter=Q(get_equipo_visitante__estado='FINALIZADO', get_equipo_visitante__goles_visitante__gt=F('get_equipo_visitante__goles_local')))
                ).annotate(
                    num_partidos=ExpressionWrapper(F('num_partidos_local') + F('num_partidos_visitante'), output_field=IntegerField()),
                    num_victorias=ExpressionWrapper(F('num_victorias_local') + F('num_victorias_visitante'), output_field=IntegerField())
                ).filter(num_partidos__gt=0).order_by('-num_victorias', '-num_partidos')[:10]

        context['top_equipos_activos'] = equipos_query

        # --- 4. Canchas más Populares (más partidos jugados en el periodo) (Top 10) ---
        # related_name de Partido.cancha es 'get_cancha_partido'
        canchas_query = Cancha.objects.filter(disponible=True)
        if fecha_desde:
            canchas_query = canchas_query.annotate(
                num_partidos_cancha=Count(
                    'get_cancha_partido', 
                    filter=Q(get_cancha_partido__estado='FINALIZADO', get_cancha_partido__fecha__gte=fecha_desde)
                )
            ).filter(num_partidos_cancha__gt=0).order_by('-num_partidos_cancha')[:10]
        else: # Todo el tiempo
            canchas_query = canchas_query.annotate(
                num_partidos_cancha=Count(
                    'get_cancha_partido',
                    filter=Q(get_cancha_partido__estado='FINALIZADO')
                )
            ).filter(num_partidos_cancha__gt=0).order_by('-num_partidos_cancha')[:10]
            
        context['top_canchas_populares'] = canchas_query

        return context

================
File: app/views/mis_partidos_views.py
================
from django.views.generic import ListView
from django.contrib.auth.mixins import LoginRequiredMixin
from app.models.partido import Partido
from django.utils import timezone as django_timezone
from django.db.models import Q 


class MisPartidosView(LoginRequiredMixin, ListView):
    model = Partido # Modelo base, aunque filtraremos mucho
    template_name = 'partidos/mis_partidos.html'
    context_object_name = 'partidos_list' # No lo usaremos directamente, pero ListView lo necesita
    paginate_by = 10 

    def get_queryset(self):
        """
        Este queryset base no se usará directamente para renderizar,
        pero ListView lo necesita. Podemos devolver un queryset vacío
        o uno genérico, ya que la lógica principal estará en get_context_data.
        """
        return Partido.objects.none()

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        usuario_actual = self.request.user
        ahora = django_timezone.now()

        # Partidos en los que el usuario está inscrito o es creador
        partidos_del_usuario = Partido.objects.filter(
            Q(jugadores=usuario_actual) | Q(creador=usuario_actual)
        ).distinct().select_related('cancha', 'creador', 'equipo_local', 'equipo_visitante').prefetch_related('jugadores').order_by('fecha')

        # 1. Próximos Partidos Inscritos/Creados
        #    (Estado PROGRAMADO o EN_CURSO y fecha de inicio futura o actual)
        context['proximos_partidos'] = partidos_del_usuario.filter(
            Q(estado='PROGRAMADO') | Q(estado='EN_CURSO'),
            fecha__gte=ahora
        ).order_by('fecha')

        # 2. Partidos Jugados (Historial)
        #    (Estado FINALIZADO o partidos pasados)
        context['partidos_jugados'] = partidos_del_usuario.filter(
            Q(estado='FINALIZADO') | Q(fecha__lt=ahora, estado__in=['PROGRAMADO', 'EN_CURSO', 'CANCELADO'])
            # Incluimos programados/en_curso/cancelados pasados por si acaso
        ).order_by('-fecha') # Los más recientes primero
        
        # Añadir información contextual a cada lista si es necesario (como en BuscarPartidos)
        # Por ejemplo, para 'proximos_partidos':
        proximos_info = []
        for partido in context['proximos_partidos']:
            proximos_info.append({
                'partido': partido,
                'es_creador': (partido.creador == usuario_actual),
                'plazas_disponibles': partido.max_jugadores - partido.jugadores.count(),
                'inscripcion_esta_abierta': partido.inscripcion_abierta
            })
        context['proximos_partidos_info'] = proximos_info

        historial_info = []
        for partido in context['partidos_jugados']:
            historial_info.append({
                'partido': partido,
                'es_creador': (partido.creador == usuario_actual),
                # Para partidos finalizados, mostrar el resultado
                'resultado_str': f"{partido.goles_local or '-'} : {partido.goles_visitante or '-'}" if partido.estado == 'FINALIZADO' else "No finalizado"
            })
        context['partidos_jugados_info'] = historial_info


        context['titulo_pagina'] = "Mis Partidos"
        return context

================
File: app/forms/canchas_forms.py
================
from django import forms
from app.models.cancha import Cancha



class CanchasForm(forms.ModelForm):
    class Meta:
        model = Cancha
        fields = ['nombre_cancha', 'ubicacion', 'tipo', 'propiedad', 'superficie',
                 'costo_partido', 'descripcion', 'disponible', 'imagen']
        
        def __init__(self, *args, **kwargs):
            super(CanchasForm, self).__init__(*args, **kwargs)
        
            # Nombres personalizados para los campos
            self.fields['nombre_cancha'].label = "Nombre de la cancha"
            self.fields['ubicacion'].label = "Dirección completa"
            self.fields['tipo'].label = "Tipo de cancha"
            self.fields['propiedad'].label = "Tipo de propiedad"
            self.fields['costo_por_hora'].label = "Precio por hora"
            self.fields['descripcion'].label = "Descripción"
            self.fields['disponible'].label = "Disponible para reservas"
            self.fields['imagen'].label = "Imagen de la cancha"

================
File: app/forms/user_forms.py
================
from django import forms
from app.models.user import User 
from django.contrib.auth import get_user_model
from django.contrib.auth.forms import UserCreationForm




class UserRegisterForm(UserCreationForm):
    class Meta:
        model = get_user_model()
        fields = ( 'username', 'nombre')


    def clean_email(self):
        email = self.cleaned_data.get('username')  
        if email and User.objects.filter(email=email).exclude(id=self.instance.id).exists():
            raise forms.ValidationError('El email introducido ya está registrado, ¡debes introducir otro!')
        return email

class UserUpdateProfilelForm(forms.ModelForm):

    fecha_nacimiento = forms.DateField(widget=forms.DateInput(attrs={'type': 'date'}),required=False)
    imagen_perfil = forms.ImageField(required=False) 
    banner_perfil = forms.ImageField(required=False)
    
    class Meta:
        model = User
        fields = ('nombre','fecha_nacimiento', 'genero','posicion','ubicacion', 'imagen_perfil', 'banner_perfil' )

    def __init__(self, *args, **kwargs):

        super(UserUpdateProfilelForm, self).__init__(*args, **kwargs)
        
        self.fields['nombre'].widget.attrs.update({'placeholder': 'Tu nombre completo'})

        self.fields['ubicacion'].widget.attrs.update({'placeholder': 'Ciudad, Provincia'})

================
File: app/models/__init__.py
================
from .user import User
from .cancha import Cancha
from .equipo import Equipo
from .partido import Partido
from .inscripcion import Inscripcion
from .historial import HistorialELO
from .resultado import Resultado

__all__ = [
    "User",
    "Cancha",
    "Equipo",
    "Partido",
    "Inscripcion",
    "HistorialELO",
    "Resultado",
]

================
File: app/models/cancha.py
================
import uuid
from django.db import models

class Cancha(models.Model):
    TIPO_CHOICES = [
        ('SALA', 'Fútbol Sala'),
        ('F7', 'Fútbol 7'),
        ('F11', 'Fútbol 11'),
    ]
    
    PROPIEDAD_CHOICES = [
        ('PUBLICA', 'Pública'),
        ('PRIVADA', 'Privada'),
    ]

    SUPERFICIE_CHOICES = [
        ('FUTBOL SALA','Fútbol sala'),
        ('CESPED ARTIFICIAL','Césped artificial'),
        ('CESPED NATURAL','Césped natural'),
        ('TIERRA','Tierra'),
        ('CEMENTO','Cemento')
    ]
    
    id_cancha = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    nombre_cancha = models.CharField(max_length=100)
    ubicacion = models.CharField(max_length=255)
    tipo = models.CharField(max_length=4, choices=TIPO_CHOICES)
    superficie = models.CharField(max_length=50,choices=SUPERFICIE_CHOICES)
    propiedad = models.CharField(max_length=7, choices=PROPIEDAD_CHOICES)
    costo_partido = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    descripcion = models.TextField(null=True, blank=True)
    disponible = models.BooleanField(default=True, null=True, blank=True)
    imagen = models.ImageField(upload_to='images/canchas_pictures/', null=True, blank=True)
    
    def __str__(self):
        return f"{self.nombre_cancha} - {self.get_tipo_display()}"

================
File: app/models/historial.py
================
from django.db import models



class HistorialELO(models.Model):
    user = models.ForeignKey("app.User", on_delete=models.CASCADE, related_name='get_user_historialElo')
    partido = models.ForeignKey('app.Partido', on_delete=models.CASCADE)  
    calificacion_antes = models.FloatField()
    calificacion_despues = models.FloatField()
    fecha = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"{self.user.nombre} ({self.fecha.strftime('%d/%m/%Y')}) - {self.calificacion_antes} → {self.calificacion_despues}"

================
File: app/models/inscripcion.py
================
import uuid
from django.db import models



class Inscripcion(models.Model):
    TIPO_CHOICES = [
        ('JUGADOR_PARTIDO', 'Jugador a Partido'),
    ]
    
    ESTADO_CHOICES = [
        ('PENDIENTE', 'Pendiente'),
        ('ACEPTADA', 'Aceptada'),
        ('RECHAZADA', 'Rechazada'),
    ]
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    tipo = models.CharField(max_length=15, choices=TIPO_CHOICES)
    fecha_inscripcion = models.DateTimeField(auto_now_add=True)
    estado = models.CharField(max_length=10, choices=ESTADO_CHOICES, default='PENDIENTE')
    
    # Para inscripciones de jugadores a partidos
    jugador = models.ForeignKey("app.User", on_delete=models.CASCADE, null=True, blank=True, related_name='get_jugador_inscripcion')
    partido = models.ForeignKey("app.Partido", on_delete=models.CASCADE, null=True, blank=True, related_name='get_partido_inscripcion')
    
    
    pago_confirmado = models.BooleanField(default=False)
    comentarios = models.TextField(blank=True)
    
    def __str__(self):
        if self.tipo == 'JUGADOR_PARTIDO':
            return f"{self.jugador.username} - {self.partido}"
        return f"{self.equipo.nombre} - {self.torneo.nombre}"

================
File: app/models/partido.py
================
from datetime import timedelta
import uuid
from django.db import models
from django.utils import timezone
from django.core.validators import MinValueValidator

from app.models.historial import HistorialELO
from app.models.user import User




class Partido(models.Model):
    TIPO_CHOICES = [
        ('SALA', 'Fútbol Sala'),
        ('F7', 'Fútbol 7'),
        ('F11', 'Fútbol 11'),
    ]
    
    MODALIDAD_CHOICES = [
        ('AMISTOSO', 'Amistoso'),
        ('COMPETITIVO', 'Competitivo'),
    ]
    
    NIVEL_CHOICES = [ 
        ('', 'Cualquier nivel'),
        ('PRINCIPIANTE', 'Principiante'),
        ('INTERMEDIO', 'Intermedio'),
        ('AVANZADO', 'Avanzado'),
        ('PRO', 'Profesional/Muy Alto'),
    ]

    ESTADO_CHOICES = [
        ('PROGRAMADO', 'Programado'),
        ('EN_CURSO', 'En curso'),
        ('FINALIZADO', 'Finalizado'),
        ('CANCELADO', 'Cancelado'),
    ]
    
    METODO_PAGO_CHOICES = [
        ('EFECTIVO', 'Efectivo'),
        ('Bizum', 'Bizum'),
        ('GRATIS', 'Gratuito'),
    ]

    id_partido = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    fecha = models.DateTimeField(verbose_name="Fecha y Hora de Inicio")
    fecha_limite_inscripcion = models.DateTimeField(
        verbose_name="Fecha Límite de Inscripción",
        blank=True, null=True,
        help_text="Hasta cuándo se pueden inscribir los jugadores. Si se deja en blanco, se calculará una hora antes del partido."
    )

    cancha = models.ForeignKey("app.Cancha", on_delete=models.CASCADE, related_name='get_cancha_partido')
    tipo = models.CharField(max_length=4, choices=TIPO_CHOICES)
    nivel = models.CharField(max_length=50, choices=NIVEL_CHOICES, blank=True, null=True)
    modalidad = models.CharField(max_length=11, choices=MODALIDAD_CHOICES, blank=True, null=True)
    max_jugadores = models.PositiveIntegerField(validators=[MinValueValidator(2)])
    costo = models.DecimalField(max_digits=10, decimal_places=2, default=0, blank=True, null=True)
    metodo_pago = models.CharField(max_length=13, choices=METODO_PAGO_CHOICES, blank=True, null=True)
    creador = models.ForeignKey("app.User", on_delete=models.CASCADE, related_name='get_user_creador')
    jugadores = models.ManyToManyField("app.User", related_name='get_jugadores_partido', blank=True)
    equipo_local = models.ForeignKey("app.Equipo", on_delete=models.SET_NULL, null=True, blank=True, related_name='get_equipo_local')
    equipo_visitante = models.ForeignKey("app.Equipo", on_delete=models.SET_NULL, null=True, blank=True, related_name='get_equipo_visitante')
    goles_local = models.PositiveIntegerField(null=True, blank=True)
    goles_visitante = models.PositiveIntegerField(null=True, blank=True)
    estado = models.CharField(max_length=10, choices=ESTADO_CHOICES, default='PROGRAMADO')
    calificacion_actualizada = models.BooleanField(default=False)
    comentarios = models.TextField(blank=True, null=True)

    @property
    def fecha_fin_calculada(self): # Propiedad para calcular la hora de finalización (1 hora después)
        if self.fecha:
            return self.fecha + timedelta(hours=1)
        return None
    
    @property
    def inscripcion_abierta(self): #Determina si la inscripción al partido sigue abierta.
        
        ahora = timezone.now()
        limite = self.fecha_limite_inscripcion_efectiva
        return self.estado == 'PROGRAMADO' and ahora < limite and self.jugadores.count() < self.max_jugadores
    
    @property
    def fecha_limite_inscripcion_efectiva(self): #Devuelve la fecha límite de inscripción, calculándola si no está definida.
        
        if self.fecha_limite_inscripcion:
            return self.fecha_limite_inscripcion
        if self.fecha:
            return self.fecha - timedelta(hours=1) # Por defecto, 1 hora antes del partido
        return None
    
    def save(self, *args, **kwargs): # Calcular fecha_limite_inscripcion por defecto si no se provee

        if not self.fecha_limite_inscripcion and self.fecha:
            self.fecha_limite_inscripcion = self.fecha - timedelta(hours=1)
        super().save(*args, **kwargs)


    def actualizar_calificaciones(self):
        if self.calificacion_actualizada or self.modalidad == 'AMISTOSO':
            return

        if not self.equipo_local or not self.equipo_visitante:
            return  

        if self.goles_local is None or self.goles_visitante is None:
            return

        K = 32  # Constante de sensibilidad ELO

        rating_local = self.equipo_local.calificacion_promedio()
        rating_visitante = self.equipo_visitante.calificacion_promedio()

        if self.goles_local > self.goles_visitante:
            score_local = 1
        elif self.goles_local < self.goles_visitante:
            score_local = 0
        else:
            score_local = 0.5

        score_visitante = 1 - score_local

        expected_local = 1 / (1 + 10 ** ((rating_visitante - rating_local) / 400))
        expected_visitante = 1 - expected_local

        for jugador in self.equipo_local.jugadores.all():
            calificacion_antes = jugador.calificacion
            jugador.calificacion += K * (score_local - expected_local)
            jugador.save()

            HistorialELO.objects.create(
                user=jugador,
                partido=self,
                calificacion_antes=calificacion_antes,
                calificacion_despues=jugador.calificacion
            )

        for jugador in self.equipo_visitante.jugadores.all():
            calificacion_antes = jugador.calificacion
            jugador.calificacion += K * (score_visitante - expected_visitante)
            jugador.save()

            HistorialELO.objects.create(
                user=jugador,
                partido=self,
                calificacion_antes=calificacion_antes,
                calificacion_despues=jugador.calificacion
            )

        self.calificacion_actualizada = True
        self.save(update_fields=['calificacion_actualizada'])

    def registrar_resultado_y_actualizar_stats(self, goles_local, goles_visitante):
        if self.estado == 'FINALIZADO':
        # Podrías permitir actualizar un resultado, pero cuidado con recalcular ELO y stats
        # messages.info(request, "El resultado de este partido ya fue registrado.")
        # return
            pass

        self.goles_local = goles_local
        self.goles_visitante = goles_visitante
        self.estado = 'FINALIZADO'
    
    # Actualizar estadísticas de equipos permanentes
        if self.equipo_local and self.equipo_local.tipo_equipo == 'PERMANENTE':
            self.equipo_local.partidos_jugados_permanente += 1
            if self.goles_local > self.goles_visitante:
                self.equipo_local.victorias_permanente += 1

            self.equipo_local.save()

        if self.equipo_visitante and self.equipo_visitante.tipo_equipo == 'PERMANENTE':
            self.equipo_visitante.partidos_jugados_permanente += 1
            if self.goles_visitante > self.goles_local:
                self.equipo_visitante.victorias_permanente += 1
            self.equipo_visitante.save()

    
    
    # Por ejemplo:
        jugadores_del_partido = list(self.equipo_local.jugadores.all()) + list(self.equipo_visitante.jugadores.all()) if self.equipo_local and self.equipo_visitante else list(self.jugadores.all())
    
        for jugador_obj in User.objects.filter(pk__in=[j.pk for j in set(jugadores_del_partido)]): # set() para evitar duplicados
            jugador_obj.partidos_jugados +=1
            if self.equipo_local and jugador_obj in self.equipo_local.jugadores.all():
                if self.goles_local > self.goles_visitante:
                    jugador_obj.victorias +=1
                elif self.goles_local == self.goles_visitante:
                    jugador_obj.empates +=1
                else:
                    jugador_obj.derrotas +=1
            elif self.equipo_visitante and jugador_obj in self.equipo_visitante.jugadores.all():
                if self.goles_visitante > self.goles_local:
                    jugador_obj.victorias +=1
                elif self.goles_local == self.goles_visitante:
                    jugador_obj.empates +=1
                else:
                    jugador_obj.derrotas +=1
            jugador_obj.save()


        self.save() # Guardar el partido con resultado y estado
    
    # Llamar a la actualización de ELO si no es amistoso
        if self.modalidad != 'AMISTOSO':
            self.actualizar_calificaciones()



    def __str__(self):
        hora_inicio_str = self.fecha.strftime('%d/%m/%Y %H:%M') if self.fecha else "Fecha no definida"
        hora_fin_str = self.fecha_fin_calculada.strftime('%H:%M') if self.fecha_fin_calculada else ""
        nombre_cancha_str = self.cancha.nombre_cancha if self.cancha else "Cancha no definida"
        
        return f"Partido en {nombre_cancha_str} - {hora_inicio_str} a {hora_fin_str}"

================
File: app/models/resultado.py
================
from django.db import models

class Resultado(models.Model):
    partido = models.OneToOneField('app.Partido', on_delete=models.CASCADE, related_name='get_partido_resultado')
    goles_local = models.PositiveIntegerField(default=0)
    goles_visitante = models.PositiveIntegerField(default=0)
    fecha_registro = models.DateTimeField(auto_now_add=True)
    
    def __str__(self):
        return f"Resultado: {self.partido}"

================
File: app/models/user.py
================
import uuid
from django.db import models
from django.contrib.auth.models import AbstractUser

class User(AbstractUser):
    TIPO_GENERO = [
        ('MASCULINO', 'Masculino'),
        ('FEMENINO', 'Femenino'),
        ('NO_ESPECIFICADO', 'Prefiero no decirlo'),
        ('OTRO', 'Otro'),
    ]

    TIPO_POSICION = [
        ('DELANTERO', 'Delantero'),
        ('CENTROCAMPISTA', 'Centrocampista'),
        ('DEFENSA', 'Defensa'),
        ('PORTERO', 'Portero')
    ]
    

    username = models.EmailField(max_length=150, unique=True, verbose_name="email", help_text="Introduce un email válido",)
    nombre = models.CharField(max_length=150)
    fecha_nacimiento = models.DateField(null=True, blank=True)

    genero = models.CharField(max_length=20, choices=TIPO_GENERO, default='NO_ESPECIFICADO', blank=True, null=True)
    
    posicion = models.CharField(max_length=50,choices=TIPO_POSICION, blank=True, null=True)
    partidos_jugados = models.IntegerField(default=0)
    victorias = models.IntegerField(default=0)
    derrotas = models.IntegerField(default=0)
    empates = models.IntegerField(default=0)
     
    calificacion = models.FloatField(default=1000.0)  # ELO

    imagen_perfil = models.ImageField(upload_to='profile_pictures/', blank=True, null=True)
    banner_perfil = models.ImageField(upload_to='banner_perfil/', blank=True, null=True)
    ubicacion = models.CharField(max_length=255, blank=True, null=True)
    #HAY QUE MANEJAR LA FOTO DE PERFIL Y BANNER POR DEFECTO Y SI NO LA PONE
    #QUE SE PONGA UNA SEGUN EL NIVEL QUE TENGA DE UN JUGADOR U OTRO


    def __str__(self):
        return self.nombre
    
    def save(self, *args, **kwargs):
        #CASO DE QUE USUARIO CAMBIE DE EMAIL POR PERDIDA DE CONTRASEÑA
        if self.pk:  # Si ya es un usuario existente
            originalUser = User.objects.get(pk=self.pk)
            if originalUser.email != self.email:  # si cambia el email
                self.username = self.email  # actualizo el username

        super().save(*args, **kwargs)

================
File: app/templates/canchas/detalle_cancha.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="card border-0 shadow-sm mb-4" style="background-color: #2d3748; border-radius: 15px; color: white;">
                <div class="row g-0">
                    <div class="col-md-4">
                        <img src="{% if cancha.imagen %}{{ cancha.imagen.url }}{% else %}{% static 'images/cancha_default_large.jpg' %}{% endif %}" class="img-fluid rounded-start" alt="{{ cancha.nombre_cancha }}" style="object-fit: cover; height: 100%;">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body p-4">
                            <h3 class="card-title text-success mb-3">{{ cancha.nombre_cancha }}</h3>
                            <p><i class="fas fa-map-marker-alt me-2"></i><strong>Ubicación:</strong> {{ cancha.ubicacion }}</p>
                            <p><i class="fas fa-futbol me-2"></i><strong>Tipo:</strong> {{ cancha.get_tipo_display }}</p>
                            <p><i class="fas fa-layer-group me-2"></i><strong>Superficie:</strong> {{ cancha.get_superficie_display }}</p>
                            <p><i class="fas fa-building me-2"></i><strong>Propiedad:</strong> {{ cancha.get_propiedad_display }}</p>
                            {% if cancha.costo_partido is not None %}
                            <p><i class="fas fa-euro-sign me-2"></i><strong>Costo:</strong> 
                                {% if cancha.costo_partido > 0 %}
                                    {{ cancha.costo_partido|floatformat:2 }}€
                                {% else %}
                                    Gratis
                                {% endif %}
                            </p>
                            {% endif %}
                            <p><i class="fas fa-info-circle me-2"></i><strong>Descripción:</strong> {{ cancha.descripcion|linebreaksbr|default:"No hay descripción adicional." }}</p>
                            <p><i class="fas fa-check-circle me-2"></i><strong>Disponible:</strong> {% if cancha.disponible %}Sí{% else %}No{% endif %}</p>
                            
                            {% if cancha.propiedad == 'PRIVADA' %}
                                <a href="#" class="btn btn-success mt-3"><i class="fas fa-calendar-plus me-2"></i>Contactar para Reservar</a>
                                {# Aquí iría la lógica o información de contacto para canchas privadas #}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color: white;">
                <div class="card-header bg-transparent border-bottom border-secondary py-3">
                    <h5 class="mb-0 text-white"><i class="fas fa-calendar-alt me-2"></i>Próximos Partidos Programados en esta Cancha</h5>
                </div>
                <div class="card-body p-3">
                    {% if proximos_partidos %}
                        <div class="list-group list-group-flush">
                            {% for partido_item in proximos_partidos %}
                                <a href="{% url 'detalle_partido' pk=partido_item.id_partido %}" class="list-group-item list-group-item-action bg-transparent border-secondary text-white d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>{{ partido_item.fecha|date:"d/m/Y H:i" }}</strong> - {{ partido_item.get_tipo_display }}
                                        <small class="d-block text-white-50">Modalidad: {{ partido_item.get_modalidad_display }} | Nivel: {{ partido_item.get_nivel_display|default:"Todos" }}</small>
                                    </div>
                                    <span class="badge bg-success rounded-pill">{{ partido_item.jugadores.count }}/{{ partido_item.max_jugadores }}</span>
                                </a>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-white-50 text-center py-3">No hay partidos programados próximamente en esta cancha.</p>
                    {% endif %}
                </div>
                 <div class="card-footer bg-transparent border-top border-secondary text-center py-3">
                    <a href="{% url 'canchas_lista' %}" class="btn btn-outline-light"><i class="fas fa-arrow-left me-2"></i>Volver al listado de canchas</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/canchas/registro_canchas.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %} {# Si usas crispy_forms #}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card border-0 shadow-sm" style="background-color: #797a7d; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h4 class="text-white mb-0 text-center">{{ titulo_pagina|default:"Registrar Nueva Cancha" }}</h4>
                        </div>
                        <div class="card-body p-4 p-md-5">
                            <!-- Advertencia para dueños (opcional, si quieres mantenerla) -->
                            <div class="alert alert-info bg-info bg-opacity-10 border-info mb-4" role="alert">
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-info-circle text-info me-2"></i>
                                    </div>
                                    <div>
                                        <h6 class="text-info mb-1">Añadir una cancha a la comunidad</h6>
                                        <p class="mb-0 text-info small">Completa los detalles de la cancha. La información será visible para otros jugadores. Si eres dueño o administrador y quieres más opciones, contáctanos.</p>
                                    </div>
                                </div>
                            </div>

                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                
                                {{ form|crispy }} {# Esto renderizará todos los campos del CanchasForm con el estilo de Crispy + Bootstrap5 #}
                                
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'canchas_lista' %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-plus-circle me-2"></i>Registrar Cancha
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/components/svg/landing_location.html
================
<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
    <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/>
</svg>

================
File: app/templates/components/svg/landing_player.html
================
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="60" height="60" x="0" y="0" viewBox="0 0 323.788 323.788" style="enable-background:new 0 0 512 512" xml:space="preserve" class="">
    <g>
    <path d="M199.177 0c12.914 0 23.39 10.47 23.39 23.39 0 12.917-10.476 23.39-23.39 23.39-12.92 0-23.39-10.473-23.39-23.39 0-12.92 10.47-23.39 23.39-23.39z" fill="#ffffff" opacity="1" data-original="#000000"></path>
    <path d="M78.842 189.281c-7.482-4.79-17.424-2.61-22.211 4.872-4.79 7.473-2.61 17.425 4.873 22.209l46.23 29.608c7.017 4.484 16.296 2.88 21.391-3.707l56.547-73.104 43.921 56.674 6.432 78.081c.688 8.399 7.726 14.758 16.006 14.758.439 0 .891-.021 1.336-.052 8.849-.73 15.436-8.492 14.705-17.347l-6.819-82.829a16.099 16.099 0 0 0-3.313-8.533l-35.828-54.21 2.895-73.589s.813-4.236.969-9.448c4.552-5.333 10.543-12.79 18.543-23.289 11.987-15.726 23.017-31.115 23.131-31.268 3.525-4.927 2.392-11.772-2.532-15.299-4.92-3.524-11.771-2.39-15.297 2.53-11.992 16.756-25.952 35.294-36.117 47.807-12.914-1.504-31.115-1.543-41.808.461-3.807.717-6.204 2.361-7.726 4.254-.365.381-.72.779-1.033 1.225-19.04 26.598-43.041 57.7-48.941 62.036a10.962 10.962 0 0 0-4.624 14.435 10.964 10.964 0 0 0 9.867 6.172c1.613 0 3.247-.354 4.79-1.108 2.98-1.453 7.974-3.881 33.611-37.498.922-1.211 1.836-2.413 2.742-3.611l-1.347 40.588.249.065-46.79 70.798-33.852-21.681z" fill="#ffffff" opacity="1" data-original="#000000"></path>
    <path d="M184.921 273.348c13.93 0 25.218 11.294 25.218 25.223 0 13.924-11.288 25.218-25.218 25.218-13.924 0-25.217-11.294-25.217-25.218 0-13.929 11.293-25.223 25.217-25.223z" fill="#ffffff" opacity="1" data-original="#000000"></path>
    </g>
</svg>

================
File: app/templates/components/svg/landing_team.html
================
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" x="0" y="0" viewBox="0 0 511.999 511.999" style="enable-background:new 0 0 350 350" xml:space="preserve" class="">
    <g>
    <path d="M438.09 273.32h-39.596c4.036 11.05 6.241 22.975 6.241 35.404v149.65c0 5.182-.902 10.156-2.543 14.782h65.461c24.453 0 44.346-19.894 44.346-44.346v-81.581c.001-40.753-33.155-73.909-73.909-73.909zM107.265 308.725c0-12.43 2.205-24.354 6.241-35.404H73.91c-40.754 0-73.91 33.156-73.91 73.91v81.581c0 24.452 19.893 44.346 44.346 44.346h65.462a44.144 44.144 0 0 1-2.543-14.783v-149.65zM301.261 234.815h-90.522c-40.754 0-73.91 33.156-73.91 73.91v149.65c0 8.163 6.618 14.782 14.782 14.782h208.778c8.164 0 14.782-6.618 14.782-14.782v-149.65c0-40.754-33.156-73.91-73.91-73.91zM256 38.84c-49.012 0-88.886 39.874-88.886 88.887 0 33.245 18.349 62.28 45.447 77.524 12.853 7.23 27.671 11.362 43.439 11.362s30.586-4.132 43.439-11.362c27.099-15.244 45.447-44.28 45.447-77.524 0-49.012-39.874-88.887-88.886-88.887zM99.918 121.689c-36.655 0-66.475 29.82-66.475 66.475 0 36.655 29.82 66.475 66.475 66.475a66.095 66.095 0 0 0 26.195-5.388c13.906-5.987 25.372-16.585 32.467-29.86a66.05 66.05 0 0 0 7.813-31.227c0-36.654-29.82-66.475-66.475-66.475zM412.082 121.689c-36.655 0-66.475 29.82-66.475 66.475a66.045 66.045 0 0 0 7.813 31.227c7.095 13.276 18.561 23.874 32.467 29.86a66.095 66.095 0 0 0 26.195 5.388c36.655 0 66.475-29.82 66.475-66.475 0-36.655-29.82-66.475-66.475-66.475z" fill="#ffffff" opacity="1" data-original="#000000" class=""></path>
    </g>
</svg>

================
File: app/templates/components/svg/logo.html
================
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="35" x="0" y="35" viewBox="0 0 497 497" style="enable-background:new 0 0 512 512" xml:space="preserve" class="">
    <g transform="matrix(0.9800000000000006,0,0,0.9800000000000006,4.96999999999997,4.970010070800811)">
        <path fill="#b8b4b3" d="M441.231 91.644 338.209 16.701C310.38 5.923 280.134 0 248.5 0l55.991 488.75h7.687c60.503-15.995 111.961-54.229 145.096-105.435l39.35-121.196c.244-4.51.376-9.049.376-13.619 0-59.484-20.911-114.078-55.769-156.856z" opacity="1" data-original="#b8b4b3" class=""></path>
        <path fill="#d0cdcd" d="M467 248.5C467 111.257 369.174 0 248.5 0c-31.634 0-61.88 5.923-89.709 16.701L55.769 91.643C20.911 134.422 0 189.016 0 248.5c0 4.57.132 9.11.376 13.619l39.35 121.196c33.135 51.206 84.592 89.44 145.096 105.435h119.669C398.035 460.626 467 363.729 467 248.5z" opacity="1" data-original="#d0cdcd" class=""></path>
        <path fill="#e7e6e6" d="m248.5 248.5-30 109.25 30 109.25c97.103 0 179.396-63.348 207.846-150.967L352.423 248.5z" opacity="1" data-original="#e7e6e6" class=""></path>
        <path fill="#f7f7f7" d="M40.654 316.033C69.104 403.652 151.397 467 248.5 467V248.5H144.577z" opacity="1" data-original="#f7f7f7"></path>
        <path fill="#ffffff" d="M376.931 71.73H120.069C65.488 111.454 30 175.828 30 248.5c0 23.571 3.748 46.264 10.654 67.533L248.5 248.5l207.846 67.533C463.252 294.764 467 272.071 467 248.5c0-72.672-35.488-137.046-90.069-176.77z" opacity="1" data-original="#ffffff" class=""></path>
        <path fill="#e7e6e6" d="M376.931 71.73C340.879 45.491 296.502 30 248.5 30s-92.379 15.491-128.431 41.73L248.5 248.5z" opacity="1" data-original="#e7e6e6" class=""></path>
        <path fill="#026353" d="M248.5 497c22.014 0 43.354-2.876 63.678-8.25l2.311-3.297z" opacity="1" data-original="#292827" class=""></path>
        <path fill="#00d4b1" d="m248.5 407-93.679 38.944 30.001 42.807c20.325 5.373 41.664 8.25 63.678 8.25 23.001 0 45.167-4.053 65.989-11.546l27.69-39.51z" opacity="1" data-original="#464342" class=""></path>
        <path fill="#026353" d="m465.661 220.994-39.234 171.767 30.847-9.445c22.818-35.262 36.944-76.669 39.35-121.196z" opacity="1" data-original="#292827" class=""></path>
        <path fill="#00d4b1" d="m465.661 220.994-.432-.574-65.986 77.06 8.089 101.128 19.095-5.847C451.968 352.087 467 302.291 467 248.5c0-9.299-.464-18.473-1.339-27.506z" opacity="1" data-original="#464342" class=""></path>
        <path fill="#026353" d="m338.209 16.701-6.175 2.123 108.545 111.125.652-38.306c-27.029-33.17-62.446-59.228-103.022-74.942z" opacity="1" data-original="#292827" class=""></path>
        <g fill="#464342">
            <path d="m332.034 18.824-43.267 14.878 52.897 86.569 98.678 23.557.236-13.878c-23.807-49.789-62.151-89.277-108.544-111.126zM155.336 120.271l52.897-86.569-49.442-17.001C118.215 32.415 82.798 58.473 55.769 91.643l.889 52.185zM97.758 297.479l-65.986-77.06-31.396 41.7c2.405 44.527 16.532 85.934 39.35 121.196l49.943 15.292zM248.5 347l93.679-68.062-35.782-110.126H190.603l-35.782 110.126z" fill="#00d4b1" opacity="1" data-original="#464342" class=""></path>
        </g>
    </g>
</svg>

================
File: app/templates/components/audio_toggle.html
================
<div class="audio-container">
    <h3 class="audio-title">Control de Audio</h3>
    
    <!-- Audio oculto -->
    <audio id="{id_prefix}Player">
        <source src="media/audio/canal+ copia.m4a" type="audio/mp4">
        Tu navegador no soporta el elemento de audio.
    </audio>
    
    <!-- Control personalizado -->
    <div>
        <input type="checkbox" id="{id_prefix}CheckboxInput" />
        <label for="{id_prefix}CheckboxInput" class="toggleSwitch">
            <div class="speaker">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.0" viewBox="0 0 75 75">
                    <path
                        d="M39.389,13.769 L22.235,28.606 L6,28.606 L6,47.699 L21.989,47.699 L39.389,62.75 L39.389,13.769z"
                        style="stroke:#fff;stroke-width:5;stroke-linejoin:round;fill:#fff;"
                    ></path>
                    <path
                        d="M48,27.6a19.5,19.5 0 0 1 0,21.4M55.1,20.5a30,30 0 0 1 0,35.6M61.6,14a38.8,38.8 0 0 1 0,48.6"
                        style="fill:none;stroke:#fff;stroke-width:5;stroke-linecap:round"
                    ></path>
                </svg>
            </div>
            <div class="mute-speaker">
                <svg version="1.0" viewBox="0 0 75 75" stroke="#fff" stroke-width="5">
                    <path
                        d="m39,14-17,15H6V48H22l17,15z"
                        fill="#fff"
                        stroke-linejoin="round"
                    ></path>
                    <path
                        d="m49,26 20,24m0-24-20,24"
                        fill="#fff"
                        stroke-linecap="round"
                    ></path>
                </svg>
            </div>
        </label>
    </div>
    
    <div class="audio-status" id="{audio}AudioStatus">Audio desactivado</div>
</div>

================
File: app/templates/equipos/crear_equipo_permanente.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color:white;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h4 class="text-white mb-0 text-center">{{ titulo_pagina }}</h4>
                        </div>
                        <div class="card-body p-4 p-md-5">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                {{ form|crispy }}
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'home' %}" class="btn btn-outline-light me-2">Cancelar</a> {# Ajustar URL de cancelar #}
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-users-cog me-2"></i>Crear Equipo
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/equipos/detalle_equipo.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color: white;">
                <div class="position-relative">
                    <img src="{% if equipo.team_banner %}{{ equipo.team_banner.url }}{% else %}{% static 'images/banner_equipo_default.jpg' %}{% endif %}" class="card-img-top" alt="Banner de {{ equipo.nombre_equipo }}" style="height: 250px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;">
                    <div class="position-absolute bottom-0 start-0 p-3 d-flex align-items-end" style="background: linear-gradient(to top, rgba(0,0,0,0.7), transparent); width:100%; border-bottom-left-radius: 15px;">
                        {% if equipo.team_shield %}
                            <img src="{{ equipo.team_shield.url }}" class="rounded-circle me-3" alt="Escudo" width="100" height="100" style="border: 3px solid #dee2e6; margin-bottom: -30px; background-color: #2d3748;">
                        {% else %}
                            <div class="rounded-circle bg-secondary me-3 d-flex align-items-center justify-content-center" style="width: 100px; height: 100px; border: 3px solid #dee2e6; margin-bottom: -30px;">
                                <i class="fas fa-users fa-3x text-white-50"></i>
                            </div>
                        {% endif %}
                        <div>
                            <h2 class="text-white mb-0">{{ equipo.nombre_equipo }}</h2>
                            <p class="text-white-50 mb-0">Capitán: {{ equipo.capitan.nombre }}</p>
                        </div>
                    </div>
                </div>
                <div class="card-body p-4" style="margin-top: 40px;"> {# Espacio para el escudo superpuesto #}
                    <div class="d-flex justify-content-end mb-3">
                        {% if es_capitan %}
                            <a href="{% url 'editar_equipo_permanente' pk=equipo.id_equipo %}" class="btn btn-outline-warning btn-sm me-2"><i class="fas fa-edit"></i> Editar Equipo</a>
                            {# Botón para gestionar miembros, invitar, etc. #}
                            <a href="#" class="btn btn-outline-info btn-sm"><i class="fas fa-user-plus"></i> Gestionar Miembros</a>
                        {% elif not es_miembro %}
                            {# Lógica para solicitar unirse al equipo #}
                            <a href="#" class="btn btn-success btn-sm"><i class="fas fa-plus"></i> Solicitar Unirse</a>
                        {% else %}
                            <span class="badge bg-success p-2"><i class="fas fa-check"></i> Eres Miembro</span>
                            {# Lógica para abandonar equipo #}
                        {% endif %}
                    </div>

                    <h5 class="text-success">Descripción</h5>
                    <p class="text-white-75">{{ equipo.descripcion|linebreaksbr|default:"Este equipo aún no tiene una descripción." }}</p>
                    
                    <hr class="border-secondary">

                    <h5 class="text-success">Miembros del Equipo ({{ equipo.jugadores.count }})</h5>
                    <div class="row g-3">
                        {% for jugador in equipo.jugadores.all %}
                        <div class="col-md-6 col-lg-4">
                            <div class="d-flex align-items-center p-2 rounded" style="background-color: #3a4454;">
                                <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" class="rounded-circle me-2" width="40" height="40" alt="{{ jugador.nombre }}">
                                <div>
                                    <span class="text-white">{{ jugador.nombre }}</span><br>
                                    <small class="text-white-50">{{ jugador.get_posicion_display|default:"Sin posición" }}</small>
                                </div>
                                {% if jugador == equipo.capitan %}
                                    <span class="badge bg-primary ms-auto">Capitán</span>
                                {% endif %}
                            </div>
                        </div>
                        {% empty %}
                        <p class="text-white-50">Este equipo aún no tiene jugadores asignados (además del capitán).</p>
                        {% endfor %}
                    </div>
                    
                    <hr class="border-secondary mt-4">
                    <h5 class="text-success">Estadísticas del Equipo (Próximamente)</h5>
                    <p class="text-white-50">Aquí se mostrarán los partidos jugados, victorias, ELO promedio del equipo, etc.</p>

                </div>
                <div class="card-footer bg-transparent border-top border-secondary text-center py-3">
                    <a href="{% url 'lista_mis_equipos' %}" class="btn btn-outline-light"><i class="fas fa-arrow-left me-2"></i>Volver a Mis Equipos</a>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}

================
File: app/templates/equipos/editar_equipo_permanente.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color:white;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h4 class="text-white mb-0 text-center">{{ titulo_pagina|default:"Editar Equipo" }}</h4>
                        </div>
                        <div class="card-body p-4 p-md-5">
                            {% if messages %}
                                {% for message in messages %}
                                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                        {{ message }}
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                {% endfor %}
                            {% endif %}

                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                {{ form|crispy }}
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'detalle_equipo' pk=equipo.id_equipo %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-save me-2"></i>Guardar Cambios
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/equipos/mis_equipos_lista.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="text-white">{{ titulo_pagina }}</h4>
                <a href="{% url 'crear_equipo_permanente' %}" class="btn btn-success">
                    <i class="fas fa-plus-circle me-2"></i>Crear Nuevo Equipo
                </a>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            {% if equipos_list %}
                <div class="row g-4">
                    {% for equipo in equipos_list %}
                    <div class="col-md-6 col-lg-4">
                        <div class="card h-100" style="background-color: #2d3748; border-radius: 10px; color:white;">
                            {% if equipo.team_banner %}
                                <img src="{{ equipo.team_banner.url }}" class="card-img-top" alt="Banner de {{ equipo.nombre_equipo }}" style="height: 150px; object-fit: cover; border-top-left-radius: 10px; border-top-right-radius: 10px;">
                            {% else %}
                                <div class="bg-secondary card-img-top d-flex align-items-center justify-content-center" style="height: 150px; border-top-left-radius: 10px; border-top-right-radius: 10px;">
                                    <i class="fas fa-shield-alt fa-3x text-white-50"></i>
                                </div>
                            {% endif %}
                            <div class="card-body d-flex flex-column">
                                <div class="d-flex align-items-center mb-2">
                                    {% if equipo.team_shield %}
                                        <img src="{{ equipo.team_shield.url }}" class="rounded-circle me-2" alt="Escudo" width="40" height="40" style="border: 2px solid #4a5568;">
                                    {% else %}
                                        <div class="rounded-circle bg-secondary me-2 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; border: 2px solid #4a5568;">
                                            <i class="fas fa-users text-white-50"></i>
                                        </div>
                                    {% endif %}
                                    <h5 class="card-title mb-0 text-white">{{ equipo.nombre_equipo }}</h5>
                                </div>
                                <p class="card-text text-white-50 small flex-grow-1">{{ equipo.descripcion|truncatewords:15|default:"Sin descripción." }}</p>
                                <p class="card-text small mb-1"><i class="fas fa-user-shield me-1 text-success"></i> Capitán: {{ equipo.capitan.nombre }}</p>
                                <p class="card-text small mb-3"><i class="fas fa-users me-1 text-success"></i> Jugadores: {{ equipo.jugadores.count }}</p>
                                <a href="{% url 'detalle_equipo' pk=equipo.id_equipo %}" class="btn btn-outline-light btn-sm mt-auto w-100">Ver Detalles del Equipo</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <!-- Paginación si es necesaria -->
            {% else %}
                <div class="text-center py-5">
                    <i class="fas fa-users-slash fa-4x text-white-50 mb-3"></i>
                    <h5 class="text-white">Aún no perteneces ni capitaneas ningún equipo permanente.</h5>
                    <p class="text-white-50">¡Anímate y crea el tuyo!</p>
                    <a href="{% url 'crear_equipo_permanente' %}" class="btn btn-success mt-2">
                        <i class="fas fa-plus-circle me-2"></i>Crear Mi Equipo
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
</div>
{% endblock %}

================
File: app/templates/partidos/crear_partidos.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %} {# Si usas crispy-forms #}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4 bg-dark">
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h4 class="text-white mb-2">{{ titulo_pagina|default:"Crear un nuevo partido" }}</h4>
                            <p class="text-white-50 mb-0">Completa el formulario para organizar un partido y encontrar jugadores</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card border-0 shadow-sm" style="background-color: #6f7173; border-radius: 15px;">
                        <div class="card-body p-4 p-md-5">
                            <form method="post" enctype="multipart/form-data"> 
                                {% csrf_token %}
                                
                                {{ form | crispy }}
                                 
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'buscar_partidos' %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success btn-lg">
                                        <i class="fas fa-check-circle me-2"></i>Crear Partido
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sección de Consejos -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h5 class="text-white mb-3">Consejos para organizar un buen partido</h5>
                            <div class="row g-4">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/partidos/registrar_resultado.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-6 col-md-8">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color: white;">
                        <div class="card-header bg-transparent border-bottom border-secondary py-3">
                            <h4 class="mb-0 text-center">{{ titulo_pagina }}</h4>
                        </div>
                        <div class="card-body p-4">
                            <p class="text-white-50">Estás registrando el resultado para el partido del <strong>{{ partido.fecha|date:"d/m/Y \a \l\a\s H:i" }}</strong> en <strong>{{ partido.cancha.nombre_cancha }}</strong>.</p>
                            
                            {% if partido.equipo_local and partido.equipo_visitante %}
                                <p class="text-center h5 mb-3">
                                    {{ partido.equipo_local.nombre_equipo|default:"Equipo Local" }} vs {{ partido.equipo_visitante.nombre_equipo|default:"Equipo Visitante" }}
                                </p>
                            {% else %}
                                <p class="text-center text-warning small">
                                    Nota: Los equipos no están asignados a este partido. Las calificaciones ELO no se actualizarán.
                                </p>
                            {% endif %}

                            <form method="post">
                                {% csrf_token %}
                                {{ form|crispy }}
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-save me-2"></i>Guardar Resultado
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/perfil/perfil.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<!-- Dashboard Layout -->
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark"> 
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Profile Content -->
        <div class="container-fluid p-4">
            <!-- Profile header/banner -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-0">
                            <!-- Cover image -->
                            <div class="position-relative">
                                <img src="{% if user.banner_perfil %}{{ user.banner_perfil.url }}{% else %}{% static 'images/banner_default.png' %}{% endif %}" class="w-100" style="height: 200px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;" alt="Banner del perfil">
                                <!-- Profile image -->
                                <div class="position-absolute" style="bottom: -50px; left: 30px;">
                                    <div class="position-relative">
                                        <img src="{% if user.imagen_perfil %}{{ user.imagen_perfil.url }}{% else %}{% static '/images/avatar_default.png' %}{% endif %}" class="rounded-circle border border-4 border-dark" width="100" height="100" alt="Avatar de {{ user.nombre }}">
                                    </div>
                                </div>
                            </div>
                            <!-- Profile info -->
                            <div class="p-4 mt-5">
                                <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                    <div>
                                        <h3 class="text-white mb-1">{{ user.nombre|default:"Nombre no especificado" }}</h3>
                                        <p class="text-success mb-0">
                                            {% if user.posicion %}
                                                <i class="fas fa-futbol me-2"></i>{{ user.get_posicion_display }} | 
                                            {% endif %}
                                            {% if user.ubicacion %}
                                                <i class="fas fa-map-marker-alt me-2"></i>{{ user.ubicacion }} |
                                            {% endif %}
                                            <i class="fas fa-star me-2"></i>ELO: {{ user.calificacion|floatformat:0 }}
                                        </p>
                                    </div>
                                    <div class="mt-3 mt-md-0">
                                        <a href="{% url 'update_profile' %}" class="btn btn-outline-light">
                                            <i class="fas fa-edit me-2"></i>Editar perfil
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile content tabs and details -->
            <div class="row">
                <div class="col-12">
                    <!-- Tabs navigation -->
                    <ul class="nav nav-tabs mb-4 border-0 gap-2" id="profileTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active text-white" style="background-color: #2d3748; border: none;" id="info-tab" data-bs-toggle="tab" data-bs-target="#info-tab-pane" type="button" role="tab" aria-controls="info-tab-pane" aria-selected="true">
                                <i class="fas fa-info-circle me-2"></i>Información
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link text-white" style="background-color: #2d3748; border: none;" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats-tab-pane" type="button" role="tab" aria-controls="stats-tab-pane" aria-selected="false">
                                <i class="fas fa-chart-bar me-2"></i>Estadísticas
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link text-white" style="background-color: #2d3748; border: none;" id="elo-history-tab" data-bs-toggle="tab" data-bs-target="#elo-history-tab-pane" type="button" role="tab" aria-controls="elo-history-tab-pane" aria-selected="false">
                                <i class="fas fa-trophy me-2"></i>Historial ELO
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link text-white" style="background-color: #2d3748; border: none;" id="teams-tab" data-bs-toggle="tab" data-bs-target="#teams-tab-pane" type="button" role="tab" aria-controls="teams-tab-pane" aria-selected="false">
                                <i class="fas fa-users me-2"></i>Mis Equipos
                            </button>
                        </li>
                    </ul>

                    <!-- Tab content -->
                    <div class="tab-content" id="profileTabsContent">
                        <!-- Info Tab -->
                        <div class="tab-pane fade show active" id="info-tab-pane" role="tabpanel" aria-labelledby="info-tab" tabindex="0">
                            <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                                    <h5 class="text-white mb-0">Información personal</h5>
                                    <a href="{% url 'update_profile' %}" class="btn btn-sm btn-dark text-success">
                                        <i class="fas fa-edit me-1"></i>Editar
                                    </a>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush" style="background-color: transparent;">
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Nombre</span>
                                            <span class="text-white">{{ user.nombre|default:"No especificado" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Email</span>
                                            <span class="text-white">{{ user.username }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Fecha de nacimiento</span>
                                            <span class="text-white">{{ user.fecha_nacimiento|date:"d/m/Y"|default:"No especificada" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Género</span>
                                            <span class="text-white">{{ user.get_genero_display|default:"No especificado" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Posición Preferida</span>
                                            <span class="text-white">{{ user.get_posicion_display|default:"No especificada" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Ubicación</span>
                                            <span class="text-white">{{ user.ubicacion|default:"No especificada" }}</span>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Stats Tab -->
                        <div class="tab-pane fade" id="stats-tab-pane" role="tabpanel" aria-labelledby="stats-tab" tabindex="0">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-header bg-transparent border-0 py-3">
                                    <h5 class="text-white mb-0">Mis Estadísticas</h5>
                                </div>
                                <div class="card-body p-0">
                                    <div class="row g-0 text-center">
                                        <div class="col-md-3 col-6 p-3 border-end border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-success mb-1">{{ user.calificacion|floatformat:0 }}</h4>
                                            <p class="text-white-50 mb-0">ELO Actual</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-end border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-success mb-1">{{ user.partidos_jugados }}</h4>
                                            <p class="text-white-50 mb-0">Partidos Jugados</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-end border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-success mb-1">{{ user.victorias }}</h4>
                                            <p class="text-white-50 mb-0">Victorias</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-warning mb-1">{{ user.empates }}</h4>
                                            <p class="text-white-50 mb-0">Empates</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-end" style="border-color: #3f495e !important;">
                                            <h4 class="text-danger mb-1">{{ user.derrotas }}</h4>
                                            <p class="text-white-50 mb-0">Derrotas</p>
                                        </div>
                                        {% with total_partidos=user.partidos_jugados %}
                                            {% if total_partidos > 0 %}
                                                <div class="col-md-3 col-6 p-3 border-end" style="border-color: #3f495e !important;">
                                                    <h4 class="text-info mb-1">{{ user.victorias}}</h4>
                                                    <p class="text-white-50 mb-0">% Victorias</p>
                                                </div>
                                            {% else %}
                                                <div class="col-md-3 col-6 p-3 border-end" style="border-color: #3f495e !important;">
                                                    <h4 class="text-info mb-1">N/A</h4>
                                                    <p class="text-white-50 mb-0">% Victorias</p>
                                                </div>
                                            {% endif %}
                                        {% endwith %}
                                        {# Puedes añadir más estadísticas aquí #}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ELO History Tab (placeholder) -->
                        <div class="tab-pane fade" id="elo-history-tab-pane" role="tabpanel" aria-labelledby="elo-history-tab" tabindex="0">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-body p-4">
                                    <h5 class="text-white mb-3">Historial de Calificación (ELO)</h5>
                                    <p class="text-white-50">Próximamente: Gráfico de evolución de tu ELO y listado de cambios por partido.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Teams Tab (placeholder) -->
                        <div class="tab-pane fade" id="teams-tab-pane" role="tabpanel" aria-labelledby="teams-tab" tabindex="0">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-body p-4">
                                    <h5 class="text-white mb-3">Mis Equipos</h5>
                                    <p class="text-white-50">Próximamente: Listado de equipos a los que perteneces.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    //SE HARÁ DESDE EL BACKEND EN SU MOMENTO
    document.addEventListener('DOMContentLoaded', function() {
        const fechaNacimientoStr = "{{ user.fecha_nacimiento|date:'Y-m-d' }}";
        if (fechaNacimientoStr) {
            const fechaNacimiento = new Date(fechaNacimientoStr);
            const hoy = new Date();
            let edad = hoy.getFullYear() - fechaNacimiento.getFullYear();
            const m = hoy.getMonth() - fechaNacimiento.getMonth();
            if (m < 0 || (m === 0 && hoy.getDate() < fechaNacimiento.getDate())) {
                edad--;
            }
            
        }
    });
</script>
{% endblock %}

================
File: app/templates/perfil/update_profile.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %} 

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h4 class="text-white mb-0">{{ titulo_pagina|default:"Editar Perfil" }}</h4>
                        </div>
                        <div class="card-body p-4">
                            {% if messages %}
                                {% for message in messages %}
                                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                        {{ message }}
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                {% endfor %}
                            {% endif %}

                            <form method="post" enctype="multipart/form-data"> {# enctype es crucial para subir archivos #}
                                {% csrf_token %}
                                
                                {{ form.non_field_errors }}

                                <div class="mb-3">
                                    <label for="{{ form.nombre.id_for_label }}" class="form-label text-white">{{ form.nombre.label }}</label>
                                    {{ form.nombre }}
                                    {% if form.nombre.help_text %}
                                        <small class="form-text text-white-50">{{ form.nombre.help_text }}</small>
                                    {% endif %}
                                    {% for error in form.nombre.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.fecha_nacimiento.id_for_label }}" class="form-label text-white">{{ form.fecha_nacimiento.label }}</label>
                                        {{ form.fecha_nacimiento }}
                                        {% for error in form.fecha_nacimiento.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.genero.id_for_label }}" class="form-label text-white">{{ form.genero.label }}</label>
                                        {{ form.genero }}
                                        {% for error in form.genero.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.posicion.id_for_label }}" class="form-label text-white">{{ form.posicion.label }}</label>
                                        {{ form.posicion }}
                                        {% for error in form.posicion.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.ubicacion.id_for_label }}" class="form-label text-white">{{ form.ubicacion.label }}</label>
                                        {{ form.ubicacion }}
                                        {% for error in form.ubicacion.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.imagen_perfil.id_for_label }}" class="form-label text-white">{{ form.imagen_perfil.label }}</label>
                                    {% if user.imagen_perfil %}
                                        <p class="text-white-50">Actual: <a href="{{ user.imagen_perfil.url }}" target="_blank">{{ user.imagen_perfil.name|truncatechars:30 }}</a></p>
                                    {% endif %}
                                    {{ form.imagen_perfil }}
                                    {% for error in form.imagen_perfil.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>

                                <div class="mb-4">
                                    <label for="{{ form.banner_perfil.id_for_label }}" class="form-label text-white">{{ form.banner_perfil.label }}</label>
                                     {% if user.banner_perfil %}
                                        <p class="text-white-50">Actual: <a href="{{ user.banner_perfil.url }}" target="_blank">{{ user.banner_perfil.name|truncatechars:30 }}</a></p>
                                    {% endif %}
                                    {{ form.banner_perfil }}
                                    {% for error in form.banner_perfil.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>

                                   
                                
                                <div class="d-flex justify-content-end">
                                    <a href="{% url 'perfil' %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-save me-2"></i>Guardar Cambios
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/registration/logged_out.html
================
{% extendsn 'basesite.html' %}
    {% block base %}
    
    <h1>Sesión cerrada</h1>
    <p>Has cerrado sesión correctamente. <a href="{% url 'login' %}">Iniciar sesión de nuevo</a>.</p>
    {% endblock %}

================
File: app/templates/base.html
================
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TFG</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    {% block base %}

    {% endblock %}
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

================
File: app/templates/canchas.html
================
{% extends 'base.html' %}
{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!-- Sidebar Navigation -->
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Venues Section -->
        <div class="container-fluid p-4 bg-dark">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                <div>
                                    <h4 class="text-white mb-1">Canchas disponibles</h4>
                                    <p class="text-white-50 mb-md-0">Encuentra las mejores canchas para tus partidos</p>
                                </div>
                                <div class="d-flex gap-2 mt-3 mt-md-0">
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="Buscar canchas...">
                                        <button class="btn btn-success" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addVenueModal">
                                        <i class="fas fa-plus-circle me-md-2"></i><span class="d-none d-md-inline">Añadir cancha</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- View Toggle and Filters -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-3">
                            <div class="d-flex justify-content-between align-items-center flex-wrap">
                                <div class="d-flex flex-wrap gap-2 mb-3 mb-md-0">
                                    <button class="btn btn-success" id="allVenuesBtn">Todas</button>
                                    <button class="btn btn-dark" id="verifiedVenuesBtn">Verificadas</button>
                                    <button class="btn btn-dark" id="communityVenuesBtn">Comunitarias</button>
                                    <button class="btn btn-outline-light" data-bs-toggle="collapse" data-bs-target="#venueFilters">
                                        <i class="fas fa-filter me-2"></i>Filtros
                                    </button>
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-dark active" id="listViewBtn" title="Vista de lista">
                                        <i class="fas fa-list-ul"></i>
                                    </button>
                                    <button class="btn btn-dark" id="mapViewBtn" title="Vista de mapa">
                                        <i class="fas fa-map-marked-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filters (Collapsible) -->
            <div class="collapse mb-4" id="venueFilters">
                <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Superficie</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todas las superficies</option>
                                    <option>Césped natural</option>
                                    <option>Césped artificial</option>
                                    <option>Fútbol sala</option>
                                    <option>Tierra</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Tamaño</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todos los tamaños</option>
                                    <option>Fútbol 5</option>
                                    <option>Fútbol 7</option>
                                    <option>Fútbol 11</option>
                                    <option>Fútbol sala</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Servicios</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todos</option>
                                    <option>Con vestuarios</option>
                                    <option>Con parking</option>
                                    <option>Con iluminación</option>
                                    <option>Con cafetería</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Distancia</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Cualquier distancia</option>
                                    <option>Menos de 2 km</option>
                                    <option>Menos de 5 km</option>
                                    <option>Menos de 10 km</option>
                                    <option>Menos de 20 km</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Precio</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Cualquier precio</option>
                                    <option>Gratuito</option>
                                    <option>Hasta 30€/h</option>
                                    <option>Hasta 60€/h</option>
                                    <option>Hasta 100€/h</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Disponibilidad</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Cualquier disponibilidad</option>
                                    <option>Disponible hoy</option>
                                    <option>Disponible este fin de semana</option>
                                    <option>Disponible entre semana</option>
                                    <option>Disponible por la noche</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Valoración</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todas las valoraciones</option>
                                    <option>4 estrellas o más</option>
                                    <option>3 estrellas o más</option>
                                    <option>2 estrellas o más</option>
                                </select>
                            </div>
                            <div class="col-12 text-end mt-3">
                                <button class="btn btn-outline-light me-2">Limpiar filtros</button>
                                <button class="btn btn-success">Aplicar filtros</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- List View (Active by default) -->
            <div id="venueListView">
                <!-- Verified Venues Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h5 class="text-white mb-3">
                            <i class="fas fa-check-circle text-success me-2"></i>Canchas verificadas
                            <span class="badge bg-success ms-2">Premium</span>
                        </h5>
                        <p class="text-white-50 mb-4">Instalaciones oficiales con acuerdos de colaboración. Reserva garantizada y servicios verificados.</p>
                    </div>
                </div>

                <div class="row g-4 mb-5">
                    <!-- Verified Venue Card 1 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Campo Municipal Norte">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-success d-flex align-items-center">
                                        <i class="fas fa-check-circle me-1"></i>Verificada
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>1.2 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Campo Municipal Norte</h5>
                                </div>
                            </div>

                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                    </div>
                                    <span class="text-white">4.5</span>
                                    <span class="text-white-50 ms-2">(32 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-success me-3"></i>
                                    <span class="text-white">Av. del Deporte, 123, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-success me-3"></i>
                                    <span class="text-white">Césped artificial</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-success me-3"></i>
                                    <span class="text-white">Fútbol 7 y 11</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-success me-3"></i>
                                    <span class="text-white">Desde 60€/hora</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-lightbulb me-1"></i>Iluminación</span>
                                    <span class="badge bg-dark"><i class="fas fa-utensils me-1"></i>Cafetería</span>
                                </div>
                                
                                <!-- Special Offer -->
                                <div class="alert alert-success bg-success bg-opacity-10 border-success d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-tag me-2 text-success"></i>
                                    <div class="text-success">10% de descuento para usuarios de FútbolConnect</div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                    <a href="#" class="btn btn-success">
                                        <i class="fas fa-calendar-alt me-2"></i>Reservar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Verified Venue Card 2 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Estadio Central">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-success d-flex align-items-center">
                                        <i class="fas fa-check-circle me-1"></i>Verificada
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>3.5 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Estadio Central</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <span class="text-white">5.0</span>
                                    <span class="text-white-50 ms-2">(48 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-success me-3"></i>
                                    <span class="text-white">Calle Central, 45, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-success me-3"></i>
                                    <span class="text-white">Césped natural</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-success me-3"></i>
                                    <span class="text-white">Fútbol 11</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-success me-3"></i>
                                    <span class="text-white">Desde 90€/hora</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-lightbulb me-1"></i>Iluminación</span>
                                    <span class="badge bg-dark"><i class="fas fa-utensils me-1"></i>Cafetería</span>
                                    <span class="badge bg-dark"><i class="fas fa-first-aid me-1"></i>Primeros auxilios</span>
                                </div>
                                
                                <!-- Special Offer -->
                                <div class="alert alert-success bg-success bg-opacity-10 border-success d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-tag me-2 text-success"></i>
                                    <div class="text-success">15% de descuento en horario matutino</div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                    <a href="#" class="btn btn-success">
                                        <i class="fas fa-calendar-alt me-2"></i>Reservar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Verified Venue Card 3 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Polideportivo Sur">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-success d-flex align-items-center">
                                        <i class="fas fa-check-circle me-1"></i>Verificada
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>4.1 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Polideportivo Sur</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">4.0</span>
                                    <span class="text-white-50 ms-2">(27 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-success me-3"></i>
                                    <span class="text-white">Paseo Sur, 78, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-success me-3"></i>
                                    <span class="text-white">Fútbol sala (interior)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-success me-3"></i>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-success me-3"></i>
                                    <span class="text-white">Desde 40€/hora</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-utensils me-1"></i>Cafetería</span>
                                </div>
                                
                                <!-- Special Offer -->
                                <div class="alert alert-success bg-success bg-opacity-10 border-success d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-tag me-2 text-success"></i>
                                    <div class="text-success">Oferta 2x1 en horario de mañana entre semana</div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                    <a href="#" class="btn btn-success">
                                        <i class="fas fa-calendar-alt me-2"></i>Reservar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Venues Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h5 class="text-white mb-3">
                            <i class="fas fa-users text-info me-2"></i>Canchas comunitarias
                            <span class="badge bg-info text-dark ms-2">Añadidas por usuarios</span>
                        </h5>
                        <p class="text-white-50 mb-4">Canchas añadidas por la comunidad. La información puede variar y se recomienda confirmar los detalles antes de acudir.</p>
                    </div>
                </div>
                
                <div class="row g-4 mb-5">
                    <!-- Community Venue Card 1 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Cancha El Barrio">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-info text-dark d-flex align-items-center">
                                        <i class="fas fa-users me-1"></i>Comunitaria
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>0.7 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Cancha "El Barrio"</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">3.5</span>
                                    <span class="text-white-50 ms-2">(12 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-info me-3"></i>
                                    <span class="text-white">Calle Vecina, 15, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-info me-3"></i>
                                    <span class="text-white">Tierra</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-info me-3"></i>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-info me-3"></i>
                                    <span class="text-white">Gratuito</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking cercano</span>
                                </div>
                                
                                <!-- Warning Notice -->
                                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2 text-warning"></i>
                                    <div class="text-warning">Cancha pública, disponibilidad no garantizada</div>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <small class="text-white-50">
                                            <i class="fas fa-user me-1"></i>Añadida por: Miguel S.
                                        </small>
                                    </div>
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Community Venue Card 2 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Campo San Jorge">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-info text-dark d-flex align-items-center">
                                        <i class="fas fa-users me-1"></i>Comunitaria
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>2.3 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Campo San Jorge</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">4.0</span>
                                    <span class="text-white-50 ms-2">(8 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-info me-3"></i>
                                    <span class="text-white">Calle San Jorge, 34, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-info me-3"></i>
                                    <span class="text-white">Césped artificial</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-info me-3"></i>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-info me-3"></i>
                                    <span class="text-white">25€/hora (aprox.)</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-lightbulb me-1"></i>Iluminación</span>
                                </div>
                                
                                <!-- Warning Notice -->
                                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2 text-warning"></i>
                                    <div class="text-warning">Reserva por teléfono, no integrada en la plataforma</div>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <small class="text-white-50">
                                            <i class="fas fa-user me-1"></i>Añadida por: Laura M.
                                        </small>
                                    </div>
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Community Venue Card 3 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Pista Municipal Este">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-info text-dark d-flex align-items-center">
                                        <i class="fas fa-users me-1"></i>Comunitaria
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>5.6 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Pista Municipal Este</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">3.0</span>
                                    <span class="text-white-50 ms-2">(5 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-info me-3"></i>
                                    <span class="text-white">Parque Este, s/n, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-info me-3"></i>
                                    <span class="text-white">Cemento</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-info me-3"></i>
                                    <span class="text-white">Fútbol sala</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-info me-3"></i>
                                    <span class="text-white">Gratuito</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                </div>
                                
                                <!-- Warning Notice -->
                                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2 text-warning"></i>
                                    <div class="text-warning">Pista pública, no se puede reservar</div>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <small class="text-white-50">
                                            <i class="fas fa-user me-1"></i>Añadida por: Carlos R.
                                        </small>
                                    </div>
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Add More Button -->
                <div class="text-center mb-5">
                    <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#addVenueModal">
                        <i class="fas fa-plus-circle me-2"></i>Añadir nueva cancha
                    </button>
                </div>
                
                <!-- Map View (Hidden by default) -->
                <div id="venueMapView" style="display: none;">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="card-body p-0">
                            <div style="height: 600px; background-color: #1a202c; position: relative;">
                                <!-- This would be replaced with the actual map implementation -->
                                <div class="d-flex justify-content-center align-items-center h-100">
                                    <div class="text-center">
                                        <i class="fas fa-map-marked-alt text-success mb-3" style="font-size: 3rem;"></i>
                                        <h5 class="text-white">Mapa de canchas</h5>
                                        <p class="text-white-50">Aquí se cargaría el mapa interactivo con todas las canchas</p>
                                    </div>
                                </div>
                                
                                <!-- Sample controls that would appear over the map -->
                                <div class="position-absolute" style="top: 10px; right: 10px;">
                                    <div class="btn-group-vertical">
                                        <button class="btn btn-dark" title="Acercar">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <button class="btn btn-dark" title="Alejar">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="position-absolute" style="top: 10px; left: 10px;">
                                    <div class="btn-group">
                                        <button class="btn btn-success active" title="Mostrar canchas verificadas">
                                            <i class="fas fa-check-circle me-md-2"></i><span class="d-none d-md-inline">Verificadas</span>
                                        </button>
                                        <button class="btn btn-info" title="Mostrar canchas comunitarias">
                                            <i class="fas fa-users me-md-2"></i><span class="d-none d-md-inline">Comunitarias</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="position-absolute" style="bottom: 20px; right: 20px;">
                                    <button class="btn btn-success" title="Mi ubicación">
                                        <i class="fas fa-location-arrow"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
                </div>
                </div>
                
            <!-- MODAL AÑADIR CANCHA -->
             <!-- Modal añadir cancha -->
<div class="modal fade" id="addVenueModal" tabindex="-1" aria-labelledby="addVenueModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0" style="background-color: #2d3748; border-radius: 15px;">
            <div class="modal-header border-bottom border-secondary">
                <h5 class="modal-title text-white" id="addVenueModalLabel">Añadir nueva cancha comunitaria</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Tipo de usuario -->
                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning mb-4" role="alert">
                    <div class="d-flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-warning me-2"></i>
                        </div>
                        <div>
                            <h6 class="text-warning mb-1">¿Eres dueño o administrador de una cancha?</h6>
                            <p class="mb-2 text-warning">Este formulario es solo para usuarios que quieren compartir canchas que conocen con la comunidad. Las canchas añadidas aquí serán "no verificadas".</p>
                            <a href="/registrar-cancha-verificada" class="btn btn-warning btn-sm">
                                <i class="fas fa-building me-2"></i>Registrar mi cancha como negocio
                            </a>
                        </div>
                    </div>
                </div>
                
                <form>
                    <div class="alert alert-info bg-info bg-opacity-10 border-info mb-4" role="alert">
                        <div class="d-flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-info-circle text-info me-2"></i>
                            </div>
                            <div>
                                <h6 class="text-info mb-1">Añadir una cancha a la comunidad</h6>
                                <p class="mb-0 text-info">Comparte tus canchas favoritas con otros jugadores. La información será revisada por nuestro equipo.</p>
                            </div>
                        </div>
                    </div>
                
                    <!-- Basic Information -->
                    <h6 class="text-white mb-3">Información básica</h6>
                    
                    <div class="mb-3">
                        <label for="venueName" class="form-label text-white">Nombre de la cancha <span class="text-danger">*</span></label>
                        <input type="text" class="form-control bg-dark text-white border-secondary" id="venueName" placeholder="Ej: Campo San Jorge" required>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="venueAddress" class="form-label text-white">Dirección <span class="text-danger">*</span></label>
                            <input type="text" class="form-control bg-dark text-white border-secondary" id="venueAddress" placeholder="Dirección completa" required>
                        </div>
                        <div class="col-md-6">
                            <label for="venueCity" class="form-label text-white">Ciudad <span class="text-danger">*</span></label>
                            <input type="text" class="form-control bg-dark text-white border-secondary" id="venueCity" placeholder="Ej: Madrid" required>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label text-white">Ubicación en el mapa <span class="text-danger">*</span></label>
                        <div style="height: 200px; background-color: #1a202c; position: relative; border-radius: 10px; overflow: hidden; margin-bottom: 15px;">
                            <!-- This would be replaced with the actual map implementation -->
                            <div class="d-flex justify-content-center align-items-center h-100">
                                <div class="text-center">
                                    <i class="fas fa-map-marked-alt text-info mb-3" style="font-size: 2rem;"></i>
                                    <p class="text-white-50">Haz clic en el mapa para seleccionar la ubicación exacta</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Venue Details -->
                    <h6 class="text-white mb-3 mt-4">Detalles de la cancha</h6>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="venueType" class="form-label text-white">Tipo de cancha <span class="text-danger">*</span></label>
                            <select class="form-select bg-dark text-white border-secondary" id="venueType" required>
                                <option value="" selected disabled>Seleccionar tipo</option>
                                <option value="football5">Fútbol 5</option>
                                <option value="football7">Fútbol 7</option>
                                <option value="football11">Fútbol 11</option>
                                <option value="futsal">Fútbol sala</option>
                                <option value="multi">Multiuso</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="venueSurface" class="form-label text-white">Superficie <span class="text-danger">*</span></label>
                            <select class="form-select bg-dark text-white border-secondary" id="venueSurface" required>
                                <option value="" selected disabled>Seleccionar superficie</option>
                                <option value="natural">Césped natural</option>
                                <option value="artificial">Césped artificial</option>
                                <option value="indoor">Fútbol sala (interior)</option>
                                <option value="dirt">Tierra</option>
                                <option value="concrete">Cemento</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="venuePrice" class="form-label text-white">Precio aproximado (por hora)</label>
                            <div class="input-group">
                                <span class="input-group-text bg-dark text-white border-secondary">€</span>
                                <input type="number" class="form-control bg-dark text-white border-secondary" id="venuePrice" placeholder="0.00" min="0">
                            </div>
                            <div class="form-text text-white-50">Deja en blanco si es gratuito</div>
                        </div>
                        <div class="col-md-6">
                            <label for="venueBooking" class="form-label text-white">Método de reserva</label>
                            <select class="form-select bg-dark text-white border-secondary" id="venueBooking">
                                <option value="" selected disabled>Seleccionar método</option>
                                <option value="none">No se puede reservar (libre acceso)</option>
                                <option value="phone">Por teléfono</option>
                                <option value="inperson">En persona</option>
                                <option value="web">Página web</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="venueContactContainer" class="mb-3 d-none">
                        <label for="venueContact" class="form-label text-white">Contacto para reservas</label>
                        <input type="text" class="form-control bg-dark text-white border-secondary" id="venueContact" placeholder="Ej: Número de teléfono o web">
                    </div>
                    
                    <!-- Amenities -->
                    <h6 class="text-white mb-3 mt-4">Instalaciones y servicios</h6>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueParking">
                                <label class="form-check-label text-white-50" for="venueParking">
                                    Parking disponible
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueShowers">
                                <label class="form-check-label text-white-50" for="venueShowers">
                                    Vestuarios/Duchas
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueLighting">
                                <label class="form-check-label text-white-50" for="venueLighting">
                                    Iluminación nocturna
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueCafeteria">
                                <label class="form-check-label text-white-50" for="venueCafeteria">
                                    Bar/Cafetería
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueEquipment">
                                <label class="form-check-label text-white-50" for="venueEquipment">
                                    Alquiler de equipamiento
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueFirstAid">
                                <label class="form-check-label text-white-50" for="venueFirstAid">
                                    Primeros auxilios
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional Info -->
                    <div class="mb-3">
                        <label for="venueDescription" class="form-label text-white">Descripción adicional</label>
                        <textarea class="form-control bg-dark text-white border-secondary" id="venueDescription" rows="3" placeholder="Información adicional, horarios, consejos, etc."></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="venuePhotos" class="form-label text-white">Fotos de la cancha</label>
                        <input type="file" class="form-control bg-dark text-white border-secondary" id="venuePhotos" multiple accept="image/*">
                        <div class="form-text text-white-50">Puedes subir hasta 5 fotos (máx. 5MB cada una)</div>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-top border-secondary">
                <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-info">
                    <i class="fas fa-plus-circle me-2"></i>Añadir cancha comunitaria
                </button>
            </div>
        </div>
    </div>
</div>
<!-- JavaScript for Toggle Views -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle between list and map views
        const listViewBtn = document.getElementById('listViewBtn');
        const mapViewBtn = document.getElementById('mapViewBtn');
        const listView = document.getElementById('venueListView');
        const mapView = document.getElementById('venueMapView');
        
        listViewBtn.addEventListener('click', function() {
            listView.style.display = 'block';
            mapView.style.display = 'none';
            listViewBtn.classList.add('active');
            mapViewBtn.classList.remove('active');
        });
        
        mapViewBtn.addEventListener('click', function() {
            listView.style.display = 'none';
            mapView.style.display = 'block';
            mapViewBtn.classList.add('active');
            listViewBtn.classList.remove('active');
        });
        
        // Toggle venue category filters
        const allBtn = document.getElementById('allVenuesBtn');
        const verifiedBtn = document.getElementById('verifiedVenuesBtn');
        const communityBtn = document.getElementById('communityVenuesBtn');
        
        allBtn.addEventListener('click', function() {
            allBtn.classList.add('btn-success');
            allBtn.classList.remove('btn-dark');
            verifiedBtn.classList.add('btn-dark');
            verifiedBtn.classList.remove('btn-success');
            communityBtn.classList.add('btn-dark');
            communityBtn.classList.remove('btn-success');
        });
        
        verifiedBtn.addEventListener('click', function() {
            verifiedBtn.classList.add('btn-success');
            verifiedBtn.classList.remove('btn-dark');
            allBtn.classList.add('btn-dark');
            allBtn.classList.remove('btn-success');
            communityBtn.classList.add('btn-dark');
            communityBtn.classList.remove('btn-success');
        });
        
        communityBtn.addEventListener('click', function() {
            communityBtn.classList.add('btn-success');
            communityBtn.classList.remove('btn-dark');
            allBtn.classList.add('btn-dark');
            allBtn.classList.remove('btn-success');
            verifiedBtn.classList.add('btn-dark');
            verifiedBtn.classList.remove('btn-success');
        });
        
        // Show/hide venue contact field based on booking method
        const bookingSelect = document.getElementById('venueBooking');
        const contactContainer = document.getElementById('venueContactContainer');
        
        bookingSelect.addEventListener('change', function() {
            if (this.value === 'none') {
                contactContainer.classList.add('d-none');
            } else {
                contactContainer.classList.remove('d-none');
            }
        });
    });
</script>
{% endblock %}

================
File: app/templates/estadisticas.html
================
{% extends 'base.html' %}
{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!-- Sidebar Navigation -->
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Statistics Content -->
        <div class="container-fluid p-4 bg-dark">
            <!-- Main Stats -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h4 class="text-white mb-3">Estadísticas de la comunidad</h4>
                            <div class="row text-center g-3">
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">3,426</h2>
                                        <p class="text-white-50 mb-0">Jugadores activos</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">1,857</h2>
                                        <p class="text-white-50 mb-0">Partidos jugados</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">312</h2>
                                        <p class="text-white-50 mb-0">Equipos formados</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">186</h2>
                                        <p class="text-white-50 mb-0">Canchas registradas</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Date Period Filter -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-3">
                            <div class="d-flex flex-wrap align-items-center">
                                <span class="text-white me-3">Periodo:</span>
                                <div class="btn-group me-3 mb-2 mb-md-0">
                                    <button class="btn btn-dark">Últimos 7 días</button>
                                    <button class="btn btn-success">Último mes</button>
                                    <button class="btn btn-dark">Último año</button>
                                    <button class="btn btn-dark">Todo el tiempo</button>
                                </div>
                                <div class="ms-auto">
                                    <button class="btn btn-dark">
                                        <i class="fas fa-sync-alt me-2"></i>Actualizar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Players Section -->
            <div class="row mb-4">
                <div class="col-12 mb-4">
                    <h5 class="text-white mb-3">
                        <i class="fas fa-trophy text-warning me-2"></i>Jugadores destacados
                    </h5>
                </div>

                <!-- Top Rated Players -->
                <div class="col-md-6 col-xl-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Mejor valorados</h5>
                            <span class="badge bg-warning text-dark">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <ul class="list-group list-group-flush" style="background-color: transparent;">
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-warning text-dark rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">1</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Miguel Sánchez</h6>
                                            <p class="text-success mb-0">Delantero</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">5.0</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">2</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Laura Gómez</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.9</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">3</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">David Martín</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.8</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">4</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Ana Rodríguez</h6>
                                            <p class="text-success mb-0">Delantera</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.7</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">5</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Javier López</h6>
                                            <p class="text-success mb-0">Portero</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.6</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-warning">
                                Ver ranking completo <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Most Active Players -->
                <div class="col-md-6 col-xl-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Más activos</h5>
                            <span class="badge bg-info text-dark">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <ul class="list-group list-group-flush" style="background-color: transparent;">
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-info text-dark rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">1</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Sergio Moreno</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">78</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">2</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Pablo García</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">72</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">3</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Carmen Ruiz</h6>
                                            <p class="text-success mb-0">Delantera</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">65</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">4</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Luis Torres</h6>
                                            <p class="text-success mb-0">Portero</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">61</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">5</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Elena Martínez</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">59</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-info">
                                Ver ranking completo <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Most Reliable Players -->
                <div class="col-md-6 col-xl-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Más fiables</h5>
                            <span class="badge bg-success">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <ul class="list-group list-group-flush" style="background-color: transparent;">
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-success text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">1</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Roberto Díaz</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">100%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">2</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">María López</h6>
                                            <p class="text-success mb-0">Portera</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">98%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">3</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Carlos Pérez</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">97%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">4</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Sofía García</h6>
                                            <p class="text-success mb-0">Delantera</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">95%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">5</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Fernando Silva</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">95%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-success">
                                Ver ranking completo <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teams & Venues Section -->
            <div class="row mb-4">
                <div class="col-12 mb-4">
                    <h5 class="text-white mb-3">
                        <i class="fas fa-chart-line text-info me-2"></i>Equipos y Canchas
                    </h5>
                </div>

                <!-- Top Teams -->
                <div class="col-md-6 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Equipos mejor valorados</h5>
                            <span class="badge bg-primary">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover mb-0" style="background-color: #2d3748;">
                                    <thead>
                                        <tr>
                                            <th scope="col" class="border-0" style="width: 60px;">#</th>
                                            <th scope="col" class="border-0">Equipo</th>
                                            <th scope="col" class="border-0">Partidos</th>
                                            <th scope="col" class="border-0" style="width: 100px;">Valoración</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <span class="badge bg-primary">1</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">FC</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">FC Barcelona Fans</h6>
                                                        <small class="text-white-50">Madrid Este</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>42</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.9</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">2</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-danger rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">RT</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Real Tekkers</h6>
                                                        <small class="text-white-50">Madrid Centro</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>38</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.8</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">3</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">LF</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Las Fieras FC</h6>
                                                        <small class="text-white-50">Madrid Norte</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>35</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.7</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">4</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-warning rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-dark fw-bold">GP</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Galácticos del Parque</h6>
                                                        <small class="text-white-50">Madrid Sur</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>29</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.6</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">5</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-info rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">AC</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Atlético de Chamartín</h6>
                                                        <small class="text-white-50">Madrid Este</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>27</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.5</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-primary">
                                Ver todos los equipos <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Most Popular Venues -->
                <div class="col-md-6 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Canchas más populares</h5>
                            <span class="badge bg-success">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover mb-0" style="background-color: #2d3748;">
                                    <thead>
                                        <tr>
                                            <th scope="col" class="border-0" style="width: 60px;">#</th>
                                            <th scope="col" class="border-0">Cancha</th>
                                            <th scope="col" class="border-0">Partidos</th>
                                            <th scope="col" class="border-0" style="width: 100px;">Valoración</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <span class="badge bg-success">1</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Campo Municipal Norte</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-check-circle text-success me-1"></i>Verificada
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>126</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.8</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">2</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Estadio Central</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-check-circle text-success me-1"></i>Verificada
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>98</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.9</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">3</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Polideportivo Sur</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-check-circle text-success me-1"></i>Verificada
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>87</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.6</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">4</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Cancha "El Barrio"</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-users text-info me-1"></i>Comunitaria
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>65</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.2</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">5</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Campo San Jorge</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-users text-info me-1"></i>Comunitaria
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>54</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.0</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-success">
                                Ver todas las canchas <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Trends & Match Types -->
            <div class="row">
                <div class="col-12 mb-4">
                    <h5 class="text-white mb-3">
                        <i class="fas fa-chart-pie text-primary me-2"></i>Tendencias y Análisis
                    </h5>
                </div>

                <!-- Weekly Activity Chart -->
                <div class="col-lg-8 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Actividad semanal</h5>
                            <div class="btn-group">
                                <button class="btn btn-dark btn-sm">Partidos</button>
                                <button class="btn btn-dark btn-sm active">Jugadores</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="weeklyActivityChart" height="250"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Match Types Distribution -->
                <div class="col-lg-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h5 class="text-white mb-0">Tipos de partido</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="matchTypesChart" height="250"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Personal Stats Section -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4">
                                <h4 class="text-white mb-3 mb-md-0">Tus estadísticas personales</h4>
                                <a href="/mis-estadisticas" class="btn btn-success">
                                    <i class="fas fa-chart-line me-2"></i>Ver estadísticas detalladas
                                </a>
                            </div>
                            <div class="row text-center g-3">
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">24</h2>
                                        <p class="text-white-50 mb-0">Partidos jugados</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">4.7</h2>
                                        <p class="text-white-50 mb-0">Valoración media</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">95%</h2>
                                        <p class="text-white-50 mb-0">Asistencia</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">7</h2>
                                        <p class="text-white-50 mb-0">Partidos creados</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chart Scripts -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Weekly Activity Chart
        const weeklyCtx = document.getElementById('weeklyActivityChart').getContext('2d');
        const weeklyChart = new Chart(weeklyCtx, {
            type: 'line',
            data: {
                labels: ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'],
                datasets: [{
                    label: 'Jugadores activos',
                    data: [128, 86, 94, 145, 168, 312, 287],
                    backgroundColor: 'rgba(56, 178, 172, 0.2)',
                    borderColor: 'rgba(56, 178, 172, 1)',
                    borderWidth: 2,
                    tension: 0.4,
                    pointBackgroundColor: 'rgba(56, 178, 172, 1)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(113, 128, 150, 0.2)'
                        },
                        ticks: {
                            color: '#718096'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#718096'
                        }
                    }
                }
            }
        });

        // Match Types Chart
        const typesCtx = document.getElementById('matchTypesChart').getContext('2d');
        const typesChart = new Chart(typesCtx, {
            type: 'doughnut',
            data: {
                labels: ['Fútbol 5', 'Fútbol 7', 'Fútbol 11', 'Fútbol sala'],
                datasets: [{
                    data: [42, 28, 15, 15],
                    backgroundColor: [
                        'rgba(56, 178, 172, 0.7)',  // Verde - Success
                        'rgba(49, 130, 206, 0.7)',  // Azul - Info
                        'rgba(237, 100, 166, 0.7)', // Rosa - Danger
                        'rgba(236, 201, 75, 0.7)'   // Amarillo - Warning
                    ],
                    borderColor: [
                        'rgba(56, 178, 172, 1)',
                        'rgba(49, 130, 206, 1)',
                        'rgba(237, 100, 166, 1)',
                        'rgba(236, 201, 75, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#cbd5e0',
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });
    });
</script>
{% endblock %}

================
File: app/templates/torneos.html
================
{% extends 'base.html' %}
{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!-- Nav -->
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Tournaments Section -->
        <div class="container-fluid p-4 bg-dark">
            <!-- Section Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                <div>
                                    <h4 class="card-title text-white mb-1">Torneos oficiales</h4>
                                    <p class="card-text text-white-50">Competiciones organizadas por FútbolConnect para toda la comunidad</p>
                                </div>
                                <div class="mt-3 mt-md-0">
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="Buscar torneos...">
                                        <button class="btn btn-success" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tournament Categories/Filters -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-3">
                            <div class="d-flex flex-wrap gap-2">
                                <button class="btn btn-success">Todos los torneos</button>
                                <button class="btn btn-dark">Próximos</button>
                                <button class="btn btn-dark">En curso</button>
                                <button class="btn btn-dark">Finalizados</button>
                                <button class="btn btn-dark">Fútbol 5</button>
                                <button class="btn btn-dark">Fútbol 7</button>
                                <button class="btn btn-dark">Fútbol 11</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Featured Tournament -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm overflow-hidden" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="position-relative">
                            <img src="https://via.placeholder.com/1200x300" class="w-100" style="height: 200px; object-fit: cover;" alt="Copa FútbolConnect">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-danger">Destacado</span>
                            </div>
                            <div class="position-absolute top-0 end-0 m-3">
                                <span class="badge bg-warning text-dark">¡Inscripciones abiertas!</span>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <div class="row">
                                <div class="col-md-8">
                                    <h3 class="text-white mb-2">Copa FútbolConnect - Edición Verano 2023</h3>
                                    <p class="text-white-50">El torneo más importante de nuestra plataforma. Reúne a los mejores equipos para competir por el título y premios en efectivo.</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6">
                                            <ul class="list-group list-group-flush bg-transparent mb-3">
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-calendar-alt text-success me-2"></i>Fecha de inicio</span>
                                                    <span class="text-white">15 de Julio, 2023</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-hourglass-end text-success me-2"></i>Fin de inscripciones</span>
                                                    <span class="text-white">10 de Julio, 2023</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-users text-success me-2"></i>Formato</span>
                                                    <span class="text-white">Fútbol 7</span>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <ul class="list-group list-group-flush bg-transparent mb-3">
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-map-marker-alt text-success me-2"></i>Ubicación</span>
                                                    <span class="text-white">Complejo Deportivo Norte</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-trophy text-success me-2"></i>Premio</span>
                                                    <span class="text-white">1.500€ + Trofeo</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-shield-alt text-success me-2"></i>Equipos</span>
                                                    <span class="text-white">16 (6 plazas disponibles)</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mt-3 mt-md-0 text-center">
                                    <div class="d-flex flex-column h-100 justify-content-between">
                                        <div>
                                            <div class="p-3 mb-3 rounded" style="background-color: #1a202c;">
                                                <h5 class="text-white mb-3">Requisitos mínimos</h5>
                                                <ul class="list-unstyled text-start text-white-50">
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Equipo de 7-10 jugadores</li>
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Nivel intermedio o superior</li>
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Equipación uniforme</li>
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Cuota de inscripción: 150€</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <a href="#" class="btn btn-success btn-lg">
                                            <i class="fas fa-clipboard-list me-2"></i>Inscribir equipo
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tournament List -->
            <div class="row g-4">
                <!-- Tournament Card 1 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-success">Inscripciones abiertas</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-success" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Liga Barrios Unidos</h5>
                            <p class="text-white-50 mb-3">Torneo amistoso entre equipos de diferentes barrios de la ciudad.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">5 de Agosto, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">12 (5 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">800€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Equipo de 7-9 jugadores</li>
                                    <li>Todos los niveles</li>
                                    <li>Cuota: 100€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-success w-100">Ver detalles</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 2 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-info">En curso</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-info" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Torneo Empresarial</h5>
                            <p class="text-white-50 mb-3">Competición entre empresas y organizaciones locales.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">15 de Junio, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">10 (Completo)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">500€ + Donación benéfica</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Equipo de 5-7 jugadores</li>
                                    <li>Representar a una empresa</li>
                                    <li>Cuota: 200€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-info w-100">Ver clasificación</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 3 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-warning text-dark">Próximamente</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-warning" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Copa Veterans</h5>
                            <p class="text-white-50 mb-3">Torneo exclusivo para jugadores mayores de 35 años.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 11</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">10 de Septiembre, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">8 (8 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">1.000€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Jugadores +35 años</li>
                                    <li>Equipo de 11-15 jugadores</li>
                                    <li>Cuota: 250€ por equipo</li>
                                </ul>
                            </div>
                            
                            <button class="btn btn-warning text-dark w-100" disabled>
                                Inscripciones pronto
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 4 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-success">Inscripciones abiertas</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-success" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Torneo Femenino</h5>
                            <p class="text-white-50 mb-3">Competición exclusiva para equipos femeninos de todos los niveles.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">20 de Julio, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">12 (7 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">1.200€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Equipo femenino (7-10 jugadoras)</li>
                                    <li>Todos los niveles</li>
                                    <li>Cuota: 120€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-success w-100">Ver detalles</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 5 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-secondary">Finalizado</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-secondary" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Torneo Primavera</h5>
                            <p class="text-white-50 mb-3">Torneo amistoso celebrado durante la primavera de 2023.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha</span>
                                    <span class="text-white">15 Marzo - 30 Abril, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">16 (Completo)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Campeón</span>
                                    <span class="text-white">Leones FC</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio entregado</span>
                                    <span class="text-white">750€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <a href="#" class="btn btn-secondary w-100">Ver resultados</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 6 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-success">Inscripciones abiertas</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-success" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Copa Rookie</h5>
                            <p class="text-white-50 mb-3">Torneo exclusivo para equipos principiantes y recién formados.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">12 de Agosto, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">10 (4 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">500€ + Equipamiento</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Nivel principiante</li>
                                    <li>Equipo de 7-10 jugadores</li>
                                    <li>Equipos formados hace < 6 meses</li>
                                    <li>Cuota: 80€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-success w-100">Ver detalles</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="d-flex justify-content-center mt-5">
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item disabled">
                            <a class="page-link bg-dark border-secondary text-secondary" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item active"><a class="page-link bg-success border-success" href="#">1</a></li>
                        <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="#">2</a></li>
                        <li class="page-item">
                            <a class="page-link bg-dark border-secondary text-white" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            
            <!-- Tournament Registration CTA -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="row align-items-center">
                                <div class="col-lg-7">
                                    <h4 class="text-white mb-2">¿Quieres organizar tu propio torneo?</h4>
                                    <p class="text-white-50 mb-0">Si representas a una organización, club o empresa y quieres organizar un torneo en nuestra plataforma, ponte en contacto con nosotros. Te ofrecemos gestión completa, arbitraje, promoción y más.</p>
                                </div>
                                <div class="col-lg-5 mt-3 mt-lg-0 text-lg-end">
                                    <button class="btn btn-success btn-lg" data-bs-toggle="modal" data-bs-target="#tournamentRequestModal">
                                        <i class="fas fa-handshake me-2"></i>Solicitar organización
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tournament Request Modal -->
<div class="modal fade" id="tournamentRequestModal" tabindex="-1" aria-labelledby="tournamentRequestModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0" style="background-color: #2d3748; border-radius: 15px;">
            <div class="modal-header border-bottom border-secondary">
                <h5 class="modal-title text-white" id="tournamentRequestModalLabel">Solicitar organización de torneo</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="organizationName" class="form-label text-white">Nombre de la organización</label>
                        <input type="text" class="form-control bg-dark text-white border-secondary" id="organizationName" placeholder="Nombre de tu organización, club o empresa">
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="contactName" class="form-label text-white">Nombre de contacto</label>
                            <input type="text" class="form-control bg-dark text-white border-secondary" id="contactName" placeholder="Tu nombre completo">
                        </div>
                        <div class="col-md-6">
                            <label for="contactEmail" class="form-label text-white">Email de contacto</label>
                            <input type="email" class="form-control bg-dark text-white border-secondary" id="contactEmail" placeholder="email@ejemplo.com">
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="tournamentFormat" class="form-label text-white">Formato de torneo</label>
                            <select class="form-select bg-dark text-white border-secondary" id="tournamentFormat">
                                <option selected disabled>Selecciona un formato</option>
                                <option value="5v5">Fútbol 5 (5 vs 5)</option>
                                <option value="7v7">Fútbol 7 (7 vs 7)</option>
                                <option value="11v11">Fútbol 11 (11 vs 11)</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="teamCount" class="form-label text-white">Número de equipos</label>
                            <select class="form-select bg-dark text-white border-secondary" id="teamCount">
                                <option selected disabled>Selecciona una opción</option>
                                <option value="8">8 equipos</option>
                                <option value="12">12 equipos</option>
                                <option value="16">16 equipos</option>
                                <option value="24">24 equipos</option>
                                <option value="32">32 equipos</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="startDate" class="form-label text-white">Fecha aproximada de inicio</label>
                            <input type="date" class="form-control bg-dark text-white border-secondary" id="startDate">
                        </div>
                        <div class="col-md-6">
                            <label for="duration" class="form-label text-white">Duración aproximada</label>
                            <select class="form-select bg-dark text-white border-secondary" id="duration">
                                <option selected disabled>Selecciona una opción</option>
                                <option value="1day">1 día (torneo intensivo)</option>
                                <option value="1weekend">1 fin de semana</option>
                                <option value="2weeks">2 semanas</option>
                                <option value="1month">1 mes</option>
                                <option value="3months">3 meses (liga)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="tournamentDescription" class="form-label text-white">Descripción del torneo</label>
                        <textarea class="form-control bg-dark text-white border-secondary" id="tournamentDescription" rows="3" placeholder="Describe brevemente el tipo de torneo que quieres organizar, objetivos, público objetivo, etc."></textarea>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="needVenues">
                        <label class="form-check-label text-white-50" for="needVenues">
                            Necesito ayuda para encontrar instalaciones deportivas
                        </label>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="needReferees">
                        <label class="form-check-label text-white-50" for="needReferees">
                            Necesito servicio de arbitraje
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-top border-secondary">
                <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success">
                    <i class="fas fa-paper-plane me-2"></i>Enviar solicitud
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/views/canchas_views.py
================
from django.contrib import messages
from django.urls import reverse_lazy
from app.forms.canchas_forms import CanchasForm
from app.models.cancha import Cancha
from django.views.generic import CreateView, ListView, DetailView
from django.contrib.auth.mixins import LoginRequiredMixin
from django.utils import timezone as now_timezone


from app.models.partido import Partido

#CANCHAS



class CanchasView(LoginRequiredMixin, ListView):
    model = Cancha
    template_name = 'canchas/canchas_lista.html' # Nueva plantilla para listar
    context_object_name = 'canchas_list'
    paginate_by = 9 # O el número que prefieras

    def get_queryset(self):
        
        return Cancha.objects.filter(disponible=True).order_by('nombre_cancha')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = "Descubre Nuestras Canchas"
        return context
    
class RegistrarCanchaView(LoginRequiredMixin, CreateView):
    model = Cancha
    form_class = CanchasForm
    template_name = 'canchas/registro_canchas.html' 
    success_url = reverse_lazy('canchas_lista') 

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = "Registrar Nueva Cancha"
        return context

    def form_valid(self, form):
        # Aquí podrías añadir lógica si el usuario que crea es el "propietario"
        # form.instance.propietario = self.request.user # Si tuvieras un campo así en el modelo Cancha
        cancha = form.save()
        messages.success(self.request, f"¡Cancha '{cancha.nombre_cancha}' registrada con éxito!")
        return super().form_valid(form)

    def form_invalid(self, form):
        messages.error(self.request, "Hubo errores al registrar la cancha. Por favor, revisa el formulario.")
        return super().form_invalid(form)

class DetalleCanchaView(LoginRequiredMixin, DetailView):
    model = Cancha
    template_name = 'canchas/detalle_cancha.html' # Nueva plantilla
    context_object_name = 'cancha'
    pk_url_kwarg = 'pk_cancha' # Para que coincida con la URL

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        cancha = self.get_object()
        context['titulo_pagina'] = f"Detalles de la Cancha: {cancha.nombre_cancha}"
        
        # Próximos partidos en esta cancha
        context['proximos_partidos'] = Partido.objects.filter(
            cancha=cancha,
            fecha__gte=now_timezone.now(), # Usar django_timezone.now()
            estado='PROGRAMADO'
        ).order_by('fecha')[:10] # Limitar a los próximos 10, por ejemplo

        # Podrías añadir un formulario para reservar directamente si es privada y lo implementas
        # context['form_reserva'] = ...
        return context

================
File: app/views/commons_views.py
================
from django.views.generic import TemplateView
from django.contrib.auth.mixins import LoginRequiredMixin


# LANDING
class Landing(TemplateView):
    template_name = 'global/landing_page.html'


#HOME
class Home(LoginRequiredMixin, TemplateView):
    template_name = 'home.html'

class Estadisticas(LoginRequiredMixin, TemplateView):
    template_name = 'estadisticas.html'

================
File: app/views/user_views.py
================
from django.contrib import messages
from django.urls import reverse_lazy
from django.views.generic import TemplateView,CreateView,UpdateView
from django.contrib.auth.mixins import LoginRequiredMixin

from app.forms.user_forms import UserRegisterForm, UserUpdateProfilelForm
from app.models.user import User


#REGISTRO
class UserRegister(CreateView):
    form_class = UserRegisterForm
    template_name = 'auth/registration.html'
    success_url = reverse_lazy('home')

    def form_valid(self, form):
        
        return super().form_valid(form)
    
    


#PERFIL
class Perfil(LoginRequiredMixin, TemplateView):
    model = User
    template_name = 'perfil/perfil.html'

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        return context

class UserUpdateProfile(LoginRequiredMixin, UpdateView):

    model = User
    form_class = UserUpdateProfilelForm
    template_name = 'perfil/update_profile.html'
    success_url = reverse_lazy('perfil')

    def get_object(self, queryset=None):
        return self.request.user
    
    def form_valid(self, form):

        messages.success(self.request, '¡Tu perfil ha sido actualizado con éxito!')

        return super().form_valid(form)
    
    def form_invalid(self, form):

        messages.error(self.request, 'No ha sido posible actuliazar tu perfil, revisa los campos que has querido actulizar por que debe haber un error.')

        return super().form_invalid(form)

================
File: app/apps.py
================
from django.apps import AppConfig


class AppConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'app'

================
File: app/context_processors.py
================
def common_user_info(request):
    context = {}
    if request.user.is_authenticated:
        context['current_user_nombre'] = request.user.nombre
        context['current_user_posicion'] = request.user.get_posicion_display() if request.user.posicion else "Sin especificar"
        if request.user.imagen_perfil:
            context['current_user_avatar_url'] = request.user.imagen_perfil.url
        else:
            # Lógica para avatar por defecto según nivel
            
            if request.user.calificacion >= 1500:
                context['current_user_avatar_url'] = '/static/images/avatar_pro.png' 
            elif request.user.calificacion >= 1200:
                context['current_user_avatar_url'] = '/static/images/avatar_mid.png' 
            else:
                context['current_user_avatar_url'] = '/static/images/avatar_default.png' 
    return context

================
File: app/tests.py
================
from django.test import TestCase

# Create your tests here.

================
File: app/forms/equipo_forms.py
================
from django import forms

from app.models.equipo import Equipo
from django.contrib.auth import get_user_model; User = get_user_model()
from django.db.models import Q



class EquipoPermanenteForm(forms.ModelForm):

    miembros_iniciales = forms.ModelMultipleChoiceField(
        queryset=User.objects.all().order_by('nombre'), # Podrías filtrar esto
        widget=forms.SelectMultiple(attrs={'class': 'form-select bg-dark text-white border-secondary', 'size': '5'}),
        required=False,
        label="Añadir Miembros Iniciales (Opcional)",
        help_text="Mantén presionada la tecla Ctrl (o Cmd en Mac) para seleccionar varios."
    )

    class Meta:
        model = Equipo
        fields = [
            'nombre_equipo', 'descripcion', 
            'team_shield', 'team_banner',
        ]
        widgets = {
            'nombre_equipo': forms.TextInput(attrs={'class': 'form-control bg-dark text-white border-secondary', 'placeholder': 'Nombre de tu escuadra'}),
            'descripcion': forms.Textarea(attrs={'rows': 3, 'class': 'form-control bg-dark text-white border-secondary', 'placeholder': 'Lema, historia, objetivos...'}),
            'team_shield': forms.ClearableFileInput(attrs={'class': 'form-control form-control-sm bg-dark text-white border-secondary'}),
            'team_banner': forms.ClearableFileInput(attrs={'class': 'form-control form-control-sm bg-dark text-white border-secondary'}),
        }
        labels = {
            'nombre_equipo': "Nombre del Equipo",
            'descripcion': "Descripción del Equipo",
            'team_shield': "Escudo del Equipo (Opcional)",
            'team_banner': "Banner del Equipo (Opcional)",
        }

    def __init__(self, *args, **kwargs):
        self.user = kwargs.pop('user', None) # Recibir el usuario actual
        super().__init__(*args, **kwargs)
        
        # Excluir al usuario actual de la lista de miembros iniciales seleccionables,
        # ya que se añadirá automáticamente como capitán y miembro.
        if self.user:
            self.fields['miembros_iniciales'].queryset = User.objects.exclude(pk=self.user.pk).order_by('nombre')


    def clean_nombre_equipo(self):
        nombre = self.cleaned_data.get('nombre_equipo')
        query = Equipo.objects.filter(nombre_equipo__iexact=nombre, tipo_equipo='PERMANENTE')
        
        # Si estamos editando (self.instance.pk existe), excluimos el propio equipo de la comprobación
        if self.instance and self.instance.pk:
            query = query.exclude(pk=self.instance.pk)
            
        if query.exists():
            raise forms.ValidationError("Ya existe un equipo permanente con este nombre. Por favor, elige otro.")
        return nombre



class AsignarEquiposForm(forms.Form):
    def __init__(self, *args, **kwargs):
        jugadores_inscritos = kwargs.pop('jugadores_inscritos', None)
        partido = kwargs.pop('partido', None)
        super().__init__(*args, **kwargs)

        EQUIPO_CHOICES = [
            ('', 'Sin Asignar'), 
            ('local', 'Equipo Local'),
            ('visitante', 'Equipo Visitante'),
        ]

        if jugadores_inscritos:
            for jugador in jugadores_inscritos:
                initial_assignment = ''
                if partido and partido.equipo_local and jugador in partido.equipo_local.jugadores.all():
                    initial_assignment = 'local'
                elif partido and partido.equipo_visitante and jugador in partido.equipo_visitante.jugadores.all():
                    initial_assignment = 'visitante'
                

                self.fields[f'jugador_{jugador.id}'] = forms.ChoiceField(
                    choices=EQUIPO_CHOICES,
                    required=False,
                    label=jugador.nombre,
                    initial=initial_assignment,
                    widget=forms.Select(attrs={'class': 'form-select form-select-sm mb-1 d-none player-assignment-select', 'data-jugador-id': jugador.id}) 
                )

================
File: app/forms/partido_forms.py
================
from datetime import datetime, time, timedelta
from django import forms
from app.models.cancha import Cancha
from app.models.equipo import Equipo
from app.models.partido import Partido
from django.db.models import Q


from django.utils import timezone as django_timezone
from django.utils.timezone import make_aware


# PartidoForm && ResultadoPartidoForm


class PartidoForm(forms.ModelForm):
    
    dia_partido = forms.DateField(
        widget=forms.DateInput(
            attrs={
                'type': 'date',
                'class': 'form-control bg-dark text-white border-secondary',
                
            }
        ),
        label="Día del Partido"
    )

    HORARIOS_CHOICES = [] #PONER TAMBIEN EN EL MODELO
    for hora in range(10, 23): 
        HORARIOS_CHOICES.append((time(hora, 0).strftime('%H:%M'), f"{hora:02d}:00"))
        

    hora_inicio_partido = forms.ChoiceField(
        choices=HORARIOS_CHOICES,
        widget=forms.Select(attrs={'class': 'form-select bg-dark text-white border-secondary'}),
        label="Hora de Inicio del Partido"
    )
    equipo_local = forms.ModelChoiceField(
        queryset=Equipo.objects.filter(tipo_equipo='PERMANENTE', activo=True), 
        required=False,
        label="Equipo Local (Opcional)",
        widget=forms.Select(attrs={'class': 'form-select bg-dark text-white border-secondary'}),
        empty_label=" (Ninguno - Partido Abierto/Equipos por formar)"
    )

    equipo_visitante = forms.ModelChoiceField(
        queryset=Equipo.objects.filter(tipo_equipo='PERMANENTE', activo=True), 
        required=False,
        label="Equipo Visitante (Opcional)",
        widget=forms.Select(attrs={'class': 'form-select bg-dark text-white border-secondary'}),
        empty_label=" (Ninguno - Partido Abierto/Equipos por formar)"
    )

    cancha = forms.ModelChoiceField(
        queryset=Cancha.objects.filter(disponible=True).order_by('nombre_cancha'),
        widget=forms.Select(attrs={'class': 'form-select bg-dark text-white border-secondary'}),
        label="Cancha",
        empty_label="Selecciona una cancha"
    )
    
    nivel = forms.ChoiceField(
        choices=Partido.NIVEL_CHOICES,
        required=False,
        widget=forms.Select(),
        label="Nivel Estimado del Partido"
    )

    class Meta:
        model = Partido
        fields = [
            'cancha', 'tipo', 'nivel', 'modalidad',
            'max_jugadores', 'costo', 'metodo_pago', 'comentarios',
            'equipo_local', 'equipo_visitante'
        ]

    def __init__(self, *args, **kwargs):
        self.user = kwargs.pop('user', None)
        super().__init__(*args, **kwargs)
        #para 'equipo_local', solo los equipos del usuario
        if self.user:
            self.fields['equipo_local'].queryset = Equipo.objects.filter(
                Q(capitan=self.user) | Q(jugadores=self.user),
                tipo_equipo='PERMANENTE', activo=True
            ).distinct().order_by('nombre_equipo')


    def clean(self):
        cleaned_data = super().clean()
        dia = cleaned_data.get('dia_partido')
        hora_str = cleaned_data.get('hora_inicio_partido') 
        cancha = cleaned_data.get('cancha')

        dia_limite_str = cleaned_data.get('fecha_limite_inscripcion_dia')
        hora_limite_str = cleaned_data.get('fecha_limite_inscripcion_hora')


        equipo_local = cleaned_data.get('equipo_local')
        equipo_visitante = cleaned_data.get('equipo_visitante')

        #logica para que no existan auto-enfrentamientos
        if equipo_local and equipo_visitante and equipo_local == equipo_visitante:
            self.add_error('equipo_visitante', "El equipo visitante no puede ser el mismo que el equipo local.")
        
        if (equipo_local and not equipo_visitante) or (not equipo_local and equipo_visitante):
            self.add_error(None, "Si eliges un equipo permanente, debes seleccionar tanto el local como el visitante, o ninguno para un partido abierto.")


        if not dia:
            self.add_error('dia_partido', "Debes seleccionar un día para el partido.")
            return cleaned_data
        
        if not hora_str:
            self.add_error('hora_inicio_partido', "Debes seleccionar una hora de inicio.")
            return cleaned_data

        # Convertir la hora_str a un objeto time
        try:
            hora_obj = datetime.strptime(hora_str, '%H:%M').time()
        except ValueError:
            self.add_error('hora_inicio_partido', "Hora de inicio inválida.")
            return cleaned_data

        # Combinar día y hora para crear el datetime de inicio
        naive_datetime = datetime.combine(dia, hora_obj)
        fecha_inicio = make_aware(naive_datetime)

        # Validar que la fecha de inicio no sea en el pasado
        if fecha_inicio < django_timezone.now():
            self.add_error('dia_partido', 'La fecha y hora de inicio del partido no puede ser en el pasado.')
            self.add_error('hora_inicio_partido', 'La fecha y hora de inicio del partido no puede ser en el pasado.')
            return cleaned_data # Detener si la fecha es inválida

        # Guardar el datetime combinado en cleaned_data para que la vista lo use
        cleaned_data['fecha'] = fecha_inicio

        if dia_limite_str and hora_limite_str: # Si el usuario proporcionó ambos
            try:
                hora_limite_obj = datetime.strptime(hora_limite_str, '%H:%M').time()
                naive_limite_dt = datetime.combine(dia_limite_str, hora_limite_obj)
                fecha_limite = django_timezone.make_aware(naive_limite_dt)
                if fecha_limite >= fecha_inicio:
                    self.add_error('fecha_limite_inscripcion_dia', 'La fecha límite de inscripción debe ser anterior a la fecha del partido.')
                else:
                    cleaned_data['fecha_limite_inscripcion'] = fecha_limite
            except ValueError:
                self.add_error('fecha_limite_inscripcion_hora', 'Hora límite de inscripción inválida.')
        elif dia_limite_str or hora_limite_str: # Si solo proporcionó uno
             self.add_error('fecha_limite_inscripcion_dia', 'Debes proporcionar tanto el día como la hora para la fecha límite, o dejar ambos en blanco para usar el valor por defecto (1h antes del partido).')
        else:
            # Si se dejan en blanco, el modelo lo calculará en save()
            cleaned_data['fecha_limite_inscripcion'] = None # Indicar que se use el default del modelo/save

        
        if cancha: 
            fecha_fin_propuesta = fecha_inicio + timedelta(hours=1)

            partidos_conflictivos_query = Partido.objects.filter(
                cancha=cancha,
                estado__in=['PROGRAMADO', 'EN_CURSO'],
                fecha__lt=fecha_fin_propuesta, 
            )

            if self.instance and self.instance.pk: 
                partidos_conflictivos_query = partidos_conflictivos_query.exclude(pk=self.instance.pk)
            
            for partido_existente in partidos_conflictivos_query:
                fin_existente = partido_existente.fecha + timedelta(hours=1)
                if fin_existente > fecha_inicio:
                    self.add_error('hora_inicio_partido', forms.ValidationError(
                        f"La cancha '{cancha.nombre_cancha}' ya está reservada de "
                        f"{partido_existente.fecha.strftime('%H:%M')} a {fin_existente.strftime('%H:%M')} "
                        f"el {partido_existente.fecha.strftime('%d/%m/%Y')}. "
                        f"Por favor, elige otro horario o cancha.",
                        code='solapamiento'
                    ))
                    self.add_error('cancha', "Horario no disponible.")
                    break 
        
        # Lógica de costo y método de pago 
        costo = cleaned_data.get("costo")
        metodo_pago = cleaned_data.get("metodo_pago")
        if costo is not None:
            if costo > 0 and metodo_pago == 'GRATIS':
                self.add_error('metodo_pago', 'Si el partido tiene un costo, el método de pago no puede ser "Gratis".')
            elif costo == 0 and metodo_pago != 'GRATIS' and metodo_pago is not None:
                 cleaned_data['metodo_pago'] = 'GRATIS'
        elif metodo_pago != 'GRATIS' and metodo_pago is not None:
             self.add_error('costo', 'Debes especificar un costo o seleccionar "Gratis" como método de pago si el campo costo está vacío.')

        return cleaned_data





class ResultadoPartidoForm(forms.Form):
    goles_local = forms.IntegerField(
        label="Goles del Equipo Local",
        min_value=0,
        widget=forms.NumberInput(attrs={'class': 'form-control bg-dark text-white border-secondary', 'placeholder': '0'})
    )
    goles_visitante = forms.IntegerField(
        label="Goles del Equipo Visitante",
        min_value=0,
        widget=forms.NumberInput(attrs={'class': 'form-control bg-dark text-white border-secondary', 'placeholder': '0'})
    )

================
File: app/models/equipo.py
================
import uuid
from django.db import models

from app.models.user import User


class Equipo(models.Model):

    TIPO_EQUIPO_CHOICES = [
        ('PARTIDO', 'Equipo para un partido'),
        ('PERMANENTE', 'Equipo permanente'),
    ]
    
    id_equipo = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    nombre_equipo = models.CharField(max_length=100)
    capitan = models.ForeignKey("app.User", on_delete=models.CASCADE, related_name='get_user_captain_equipo')
    jugadores = models.ManyToManyField("app.User", related_name='get_jugadores_equipo')
    fecha_creacion = models.DateTimeField(auto_now_add=True)
    descripcion = models.TextField(blank=True, null=True) 
    team_shield = models.ImageField(upload_to='images/team_shields/', null=True, blank=True) 
    team_banner = models.ImageField(upload_to='images/team_banners/', null=True, blank=True) 
    tipo_equipo = models.CharField(max_length=10, choices=TIPO_EQUIPO_CHOICES)
    activo = models.BooleanField(default=True)

    partidos_jugados_permanente = models.PositiveIntegerField(default=0)
    victorias_permanente = models.PositiveIntegerField(default=0)

    partido_asociado = models.ForeignKey("app.Partido", on_delete=models.CASCADE, null=True, blank=True, related_name='get_partido_equipos')
    
    def __str__(self):
        return self.nombre_equipo
    
    def calificacion_promedio(self):
        jugadores = self.jugadores.all()
        if not jugadores.exists():
            return 1000.0
        return sum(j.calificacion for j in jugadores) / jugadores.count()
    
    def clean(self):
        super().clean()
        if self.tipo_equipo == 'PARTIDO' and not self.partido_asociado:
            # Un equipo de tipo PARTIDO debería siempre tener un partido_asociado.
            pass 
        if self.tipo_equipo == 'PERMANENTE' and self.partido_asociado:

            self.partido_asociado = None 

    def save(self, *args, **kwargs):
        if self.tipo_equipo == 'PERMANENTE':
            self.partido_asociado = None
        super().save(*args, **kwargs)

================
File: app/templates/canchas/canchas_lista.html
================
{% extends 'base.html' %}
{% load static %} {# Para la imagen por defecto de la cancha #}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                <div>
                                    <h4 class="text-white mb-1">{{ titulo_pagina|default:"Canchas Disponibles" }}</h4>
                                    <p class="text-white-50 mb-md-0">Encuentra o registra las mejores canchas para tus partidos</p>
                                </div>
                                <div class="d-flex gap-2 mt-3 mt-md-0">
                                    <!-- Buscador (funcionalidad futura) -->
                                    <form method="get" action="{% url 'canchas_lista' %}" class="input-group">
                                        <input type="text" name="q" class="form-control bg-dark text-white border-secondary" placeholder="Buscar canchas por nombre..." value="{{ request.GET.q }}">
                                        <button class="btn btn-success" type="submit">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </form>
                                    <!-- Botón para ir a la página de registrar cancha -->
                                    <a href="{% url 'canchas_registrar' %}" class="btn btn-success">
                                        <i class="fas fa-plus-circle me-md-2"></i><span class="d-none d-md-inline">Añadir cancha</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filtros (puedes mantener tu sección de filtros aquí si la implementas) -->
            {% comment %}
            <div class="row mb-4"> ... Tu código de filtros ... </div>
            {% endcomment %}

            <!-- Mensajes de Django (para éxito/error tras registrar) -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Lista de Canchas -->
            <div id="venueListView">
                <div class="row g-4 mb-5">
                    {% if canchas_list %}
                        {% for cancha in canchas_list %}
                        <div class="col-md-6 col-xl-4">
                            <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                                <div class="position-relative">
                                    <img src="{% if cancha.imagen %}{{ cancha.imagen.url }}{% else %}{% static 'images/cancha_default.jpg' %}{% endif %}" class="card-img-top" alt="{{ cancha.nombre_cancha }}" style="height: 200px; object-fit: cover;">
                                    <div class="position-absolute top-0 start-0 m-3">
                                        <span class="badge {% if cancha.propiedad == 'PRIVADA' %}bg-warning text-dark{% else %}bg-info text-dark{% endif %} d-flex align-items-center">
                                            <i class="fas {% if cancha.propiedad == 'PRIVADA' %}fa-lock{% else %}fa-futbol{% endif %} me-1"></i>{{ cancha.get_propiedad_display }}
                                        </span>
                                    </div>
                                    <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                        <h5 class="text-white mb-0">{{ cancha.nombre_cancha }}</h5>
                                    </div>
                                </div>
                                <div class="card-body p-4 d-flex flex-column">
                                    <div class="mb-3">
                                        <p class="text-white mb-1"><i class="fas fa-map-marker-alt text-success me-2"></i>{{ cancha.ubicacion }}</p>
                                        <p class="text-white mb-1"><i class="fas fa-futbol text-success me-2"></i>{{ cancha.get_tipo_display }}</p>
                                        <p class="text-white mb-1"><i class="fas fa-layer-group text-success me-2"></i>{{ cancha.get_superficie_display }}</p>
                                        {% if cancha.costo_partido is not None %}
                                        <p class="text-white mb-1">
                                            <i class="fas fa-euro-sign text-success me-2"></i>
                                            {% if cancha.costo_partido > 0 %}
                                                {{ cancha.costo_partido|floatformat:2 }}€
                                            {% else %}
                                                Gratis
                                            {% endif %}
                                        </p>
                                        {% endif %}
                                    </div>
                                    <p class="text-white-50 small mb-3 flex-grow-1">{{ cancha.descripcion|truncatewords:20|default:"Sin descripción." }}</p>
                                    <div class="mt-auto d-flex justify-content-between">
                                        <a href="{% url 'detalle_cancha' pk_cancha=cancha.id_cancha %}" class="btn btn-outline-light btn-sm">
                                            <i class="fas fa-info-circle me-1"></i>Detalles
                                        </a>
                                        {% if cancha.propiedad == 'PRIVADA' %}
                                        <a href="#" class="btn btn-success btn-sm"> {/* Reemplazar # con URL de reserva */}
                                            <i class="fas fa-calendar-alt me-1"></i>Reservar
                                        </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                                                
                    {% endfor %}
                    {% else %}
                        <div class="col-12">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-body p-5 text-center">
                                    <i class="fas fa-search-location fa-3x text-white-50 mb-3"></i>
                                    <h5 class="text-white">No hay canchas disponibles</h5>
                                    <p class="text-white-50">Parece que no hay canchas que coincidan con tu búsqueda o aún no se han registrado. <br>¡Intenta añadir una!</p>
                                    <a href="{% url 'canchas_registrar' %}" class="btn btn-success mt-3">
                                        <i class="fas fa-plus-circle me-2"></i>Añadir Nueva Cancha
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>

                <!-- Paginación -->
                {% if is_paginated %}
                    <div class="d-flex justify-content-center mt-4">
                        <nav aria-label="Page navigation">
                            <ul class="pagination">
                                {% if page_obj.has_previous %}
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page=1{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">« Primera</a></li>
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ page_obj.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Anterior</a></li>
                                {% else %}
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">« Primera</span></li>
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">Anterior</span></li>
                                {% endif %}

                                {% for num in page_obj.paginator.page_range %}
                                    {% if page_obj.number == num %}
                                        <li class="page-item active"><span class="page-link bg-success border-success">{{ num }}</span></li>
                                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                        <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ num }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">{{ num }}</a></li>
                                    {% endif %}
                                {% endfor %}

                                {% if page_obj.has_next %}
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ page_obj.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Siguiente</a></li>
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Última »</a></li>
                                {% else %}
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">Siguiente</span></li>
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">Última »</span></li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/components/landing_nav.html
================
<!-- Navbar con espaciador para mantener la posición de los botones -->
<nav class="navbar navbar-expand-lg navbar-dark sticky-top py-3" style="background-color: #0a0a0a;">
    <div class="container-fluid px-4">
        <!-- Logo y Marca -->
        <a class="navbar-brand d-flex align-items-center" href="{% url 'landing'%}">
            {% include 'components/svg/logo.html' %}
            <span class="fw-bold fs-4">XXX</span>
        </a>
        
        <!-- Toggle para móviles -->
        <button class="navbar-toggler border-success" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <!-- Contenedor con estructura fija -->
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <!-- División en tres partes con flexbox -->
            <div class="d-flex justify-content-between align-items-center w-100">
                <!-- Primera parte: espacio vacío a la izquierda -->
                <div class="flex-grow-1 d-lg-block d-none" style="width: 160px;"></div>
                
                <!-- Segunda parte: enlaces -->
                <ul class="navbar-nav" id="enlaces">
                    <li class="nav-item px-2">
                        <a class="nav-link fs-5 active" href="#inicio">Inicio</a>
                    </li>
                    <li class="nav-item px-2">
                        <a class="nav-link fs-5" href="#caracteristicas">Características</a>
                    </li>
                    <li class="nav-item px-2">
                        <a class="nav-link fs-5" href="#como-funciona">Cómo Funciona</a>
                    </li>
                </ul>
                
                <!-- Elemento espaciador invisible que toma el lugar de los enlaces cuando se ocultan -->
                <div id="enlaces-placeholder" class="flex-grow-1 d-none"></div>
                
                <!-- Tercera parte: botones de login siempre a la derecha -->
                <div class="d-flex gap-3">
                    <a href="{% url 'login' %}" class="btn btn-outline-success px-4" id="btn-login">
                        <i class="fas fa-sign-in-alt me-2"></i>Acceder
                    </a>
                    <a href="{% url 'registro' %}" class="btn btn-success px-4" id="btn-reg">
                        <i class="fas fa-user-plus me-2"></i>Registrarse
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    
    const enlaces = document.getElementById('enlaces');
    const enlacesPlaceholder = document.getElementById('enlaces-placeholder');
    const botonLogin = document.getElementById('btn-login');
    const botonReg = document.getElementById('btn-reg');
    
    const currentPath = window.location.pathname;
    
    if (currentPath.includes('/login') || currentPath.includes('/registro')) {

        enlaces.style.display = 'none';

        enlacesPlaceholder.classList.remove('d-none');

    }else if (currentPath.includes('/login')) {

        botonLogin.style.display = 'none';

    }else if (currentPath.includes('/registro')) {

        botonReg.style.display = 'none';

    } else {
        
        enlacesPlaceholder.classList.remove('d-none');
    }

    
});
</script>

================
File: app/templates/partidos/buscar_partidos.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
   {% include "components/nav.html" %}

   <div class="flex-grow-1 overflow-auto p-0 bg-dark">
       {% include "components/top_nav.html" %}
       
       <div class="container-fluid p-4 bg-dark">
           <!-- ... (Cabecera y Filtros sin cambios significativos) ... -->
           <div class="row mb-4">
               <div class="col-12">
                   <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                       <div class="card-body p-4">
                           <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                               <div>
                                   <h4 class="card-title text-white mb-1">{{ titulo_pagina|default:"Partidos Disponibles" }}</h4>
                                   <p class="card-text text-white-50">Encuentra partidos cerca de ti y únete a la comunidad</p>
                               </div>
                               <div class="mt-3 mt-md-0">
                                   <a href="{% url 'crear_partidos' %}" class="btn btn-success ms-3">
                                       <i class="fas fa-plus-circle me-2"></i>Crear partido
                                   </a>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

           <div id="listView">
                {% if partidos_info_list %} {# Cambiado a partidos_info_list #}
                    <div class="row g-4">
                        {% for item_info in partidos_info_list %} {# Iterar sobre la nueva variable #}
                            {% with partido=item_info.partido es_creador=item_info.es_creador esta_inscrito=item_info.esta_inscrito inscripcion_esta_abierta=item_info.inscripcion_esta_abierta plazas_disponibles=item_info.plazas_disponibles %}
                            <div class="col-md-6 col-xl-4">
                                <div class="card border-0 shadow-sm h-100 {% if es_creador %}border-2 border-primary{% elif esta_inscrito %}border-2 border-success{% endif %}" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                                    <div class="position-relative">
                                        <div class="bg-dark text-center py-4">
                                            <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                                                <i class="fas fa-futbol text-success fs-1"></i>
                                            </div>
                                        </div>
                                        {% if es_creador %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-primary">Tu Partido</span>
                                        {% elif esta_inscrito %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-success">Inscrito</span>
                                        {% elif not inscripcion_esta_abierta and partido.jugadores.count >= partido.max_jugadores %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-danger">Completo</span>
                                        {% elif not inscripcion_esta_abierta %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-secondary">Inscripción Cerrada</span>
                                        {% endif %}
                                        <span class="position-absolute top-0 end-0 m-2 badge bg-info">{{ partido.get_modalidad_display|default:"Amistoso" }}</span>
                                    </div>
                                    <div class="card-body p-4 d-flex flex-column">
                                        <h5 class="text-white mb-2">
                                            <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="text-white text-decoration-none stretched-link">
                                                Partido en {{ partido.cancha.nombre_cancha }}
                                            </a>
                                        </h5>
                                        <div class="text-white-50 small mb-1"><i class="fas fa-calendar-alt text-success me-1"></i> {{ partido.fecha|date:"d/m/Y H:i" }}</div>
                                        <div class="text-white-50 small mb-1"><i class="fas fa-clock text-success me-1"></i> Límite inscripción: {{ partido.fecha_limite_inscripcion_efectiva|date:"d/m/Y H:i" }}</div>
                                        <div class="text-white-50 small mb-2"><i class="fas fa-map-marker-alt text-success me-1"></i> {{ partido.cancha.ubicacion }}</div>
                                        <div class="text-white-50 small mb-2"><i class="fas fa-running text-success me-1"></i> {{ partido.get_tipo_display }} | Nivel: {{ partido.get_nivel_display|default:"Todos" }}</div>

                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between mb-1">
                                                <span class="text-white small">Jugadores:</span>
                                                <span class="text-white small">{{ partido.jugadores.count }}/{{ partido.max_jugadores }}</span>
                                            </div>
                                            <div class="progress bg-dark" style="height: 10px;">
                                                <div class="progress-bar bg-success" role="progressbar" style="width: {% widthratio partido.jugadores.count partido.max_jugadores 100 %}%"></div>
                                            </div>
                                            {% if inscripcion_esta_abierta %}
                                                <small class="text-success">{{ plazas_disponibles }} plazas disponibles</small>
                                            {% elif partido.jugadores.count >= partido.max_jugadores %}
                                                <small class="text-danger">Partido completo</small>
                                            {% else %}
                                                <small class="text-warning">Inscripción cerrada</small>
                                            {% endif %}
                                        </div>
                                        
                                        <div class="mt-auto">
                                            {% if es_creador %}
                                                <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-primary w-100">
                                                    <i class="fas fa-cog me-2"></i>Gestionar Partido
                                                </a>
                                            {% elif esta_inscrito %}
                                                <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-outline-light w-100">
                                                    <i class="fas fa-eye me-2"></i>Ver Detalles
                                                </a>
                                                <!-- Podrías añadir un botón para desinscribirse aquí -->
                                            {% elif inscripcion_esta_abierta %}
                                                <form action="{% url 'inscribirse_partido' partido_id=partido.id_partido %}" method="post">
                                                    {% csrf_token %}
                                                    <button type="submit" class="btn btn-success w-100">
                                                        <i class="fas fa-user-plus me-2"></i>Inscribirse
                                                    </button>
                                                </form>
                                            {% else %}
                                                <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-secondary w-100 disabled" aria-disabled="true">
                                                    No disponible
                                                </a>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endwith %}
                        {% endfor %}
                    </div>
                    <!-- ... (Paginación) ... -->
                {% else %}
                    <!-- ... (Mensaje de no hay partidos) ... -->
                {% endif %}
           </div>
       </div>
   </div>
</div>
{% endblock %}

================
File: app/templates/partidos/detalle_partido.html
================
{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block base %}
<style>
    .drag-list {
        min-height: 100px;
        border: 2px dashed #4a5568;
        border-radius: 0.5rem;
        padding: 10px;
        margin-bottom: 15px;
        background-color: rgba(255,255,255,0.05);
        transition: background-color 0.2s ease-in-out;
    }
    .drag-list.drag-over {
        background-color: rgba(40, 167, 69, 0.2); /* Verde éxito al arrastrar encima */
        border-color: #28a745;
    }
    .player-card {
        background-color: #3a4454;
        color: white;
        padding: 8px 12px;
        margin-bottom: 8px;
        border-radius: 0.3rem;
        cursor: grab;
        border: 1px solid #4a5568;
        display: flex;
        align-items: center;
        font-size: 0.9rem;
    }
    .player-card:active {
        cursor: grabbing;
    }
    .player-card img {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        margin-right: 8px;
    }
    .placeholder { /* Para cuando un elemento se está arrastrando */
        background-color: rgba(255,255,255,0.1);
        border: 2px dashed #555;
        height: 40px; /* Ajustar a la altura de player-card */
        margin-bottom: 8px;
        border-radius: 0.3rem;
    }
</style>

<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show mb-3" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color: white;">
                <div class="card-header bg-transparent border-bottom border-secondary py-3 d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">{{ titulo_pagina }}</h4>
                    {% if es_creador and partido.estado == 'PROGRAMADO' %}
                    {# <a href="#" class="btn btn-outline-warning btn-sm"><i class="fas fa-edit me-1"></i> Editar Partido</a> #}
                    {% endif %}
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-lg-7 mb-4 mb-lg-0">
                            {# ... (Información General del Partido como la tenías) ... #}
                            <h5 class="text-success mb-3">Información General del Partido</h5>
                            <div class="row">
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-futbol me-2 text-success"></i>Cancha:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.cancha.nombre_cancha }} ({{ partido.cancha.get_superficie_display }})</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-map-marker-alt me-2 text-success"></i>Ubicación:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.cancha.ubicacion }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-calendar-alt me-2 text-success"></i>Fecha y Hora:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.fecha|date:"l, d F Y, H:i" }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-clock me-2 text-success"></i>Duración:</strong></div>
                                <div class="col-sm-6 mb-2">1 hora</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-user-clock me-2 text-success"></i>Límite Inscripción:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.fecha_limite_inscripcion_efectiva|date:"l, d F Y, H:i" }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-users me-2 text-success"></i>Formato:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.get_tipo_display }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-medal me-2 text-success"></i>Modalidad:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.get_modalidad_display }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-tachometer-alt me-2 text-success"></i>Nivel:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.get_nivel_display|default:"Abierto a todos" }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-euro-sign me-2 text-success"></i>Costo:</strong></div>
                                <div class="col-sm-6 mb-2">{% if partido.costo > 0 %}{{ partido.costo|floatformat:2 }}€ ({{ partido.get_metodo_pago_display }}){% else %}Gratis{% endif %}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-user-edit me-2 text-success"></i>Creador:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.creador.nombre }}</div>
                            </div>
                             {% if partido.comentarios %}
                                <h5 class="text-success mt-4 mb-2">Comentarios Adicionales</h5>
                                <p class="text-white-75">{{ partido.comentarios|linebreaksbr }}</p>
                            {% endif %}
                        </div>

                        <div class="col-lg-5">
                            <h5 class="text-success">Jugadores ({{ partido.jugadores.count }}/{{ partido.max_jugadores }})</h5>
                            {% if plazas_disponibles > 0 and inscripcion_esta_abierta %}
                                <p class="text-info small"><i class="fas fa-info-circle me-1"></i>{{ plazas_disponibles }} plaza{{ plazas_disponibles|pluralize }} disponible{{ plazas_disponibles|pluralize }}.</p>
                            {% elif partido.jugadores.count >= partido.max_jugadores and not es_creador %} {# No mostrar completo si es creador y puede asignar #}
                                <p class="text-danger small"><i class="fas fa-times-circle me-1"></i>¡Partido Completo!</p>
                            {% elif not inscripcion_esta_abierta and not es_creador %}
                                 <p class="text-warning small"><i class="fas fa-hourglass-end me-1"></i>Inscripción cerrada.</p>
                            {% endif %}

                            {% if es_creador and partido.estado == 'PROGRAMADO' %}
                                <form method="post" action="{% url 'detalle_partido' pk=partido.id_partido %}" id="formAsignarEquipos">
                                    {% csrf_token %}
                                    {# Renderizar los campos select ocultos del AsignarEquiposForm #}
                                    <div class="d-none">
                                        {{ form_asignar_equipos|crispy }}
                                    </div>

                                    <div class="row">
                                        <div class="col-12 mb-3">
                                            <h6 class="text-white-50">Jugadores Sin Asignar / Suplentes</h6>
                                            <div id="lista-sin-asignar" class="drag-list">
                                                {% for jugador in jugadores_inscritos_list %}
                                                    {% if not partido.equipo_local or jugador not in partido.equipo_local.jugadores.all %}
                                                        {% if not partido.equipo_visitante or jugador not in partido.equipo_visitante.jugadores.all %}
                                                            <div class="player-card" draggable="true" data-jugador-id="{{ jugador.id }}">
                                                                <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" alt="{{ jugador.nombre }}">
                                                                {{ jugador.nombre }}
                                                            </div>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6 class="text-info">Equipo Local</h6>
                                            <div id="equipo-local" class="drag-list">
                                                {% if partido.equipo_local %}
                                                    {% for jugador in partido.equipo_local.jugadores.all %}
                                                    <div class="player-card" draggable="true" data-jugador-id="{{ jugador.id }}">
                                                        <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" alt="{{ jugador.nombre }}">
                                                        {{ jugador.nombre }}
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6 class="text-warning">Equipo Visitante</h6>
                                            <div id="equipo-visitante" class="drag-list">
                                                {% if partido.equipo_visitante %}
                                                    {% for jugador in partido.equipo_visitante.jugadores.all %}
                                                    <div class="player-card" draggable="true" data-jugador-id="{{ jugador.id }}">
                                                        <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" alt="{{ jugador.nombre }}">
                                                        {{ jugador.nombre }}
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-sm mt-3 w-100">Guardar Asignación de Equipos</button>
                                </form>
                            
                            {% elif jugadores_inscritos_list %}
                                <h6 class="text-white mt-3 mb-2">Lista de Inscritos:</h6>
                                <ul class="list-group list-group-flush bg-transparent mb-3">
                                    {% for jugador_inscrito in jugadores_inscritos_list %}
                                        <li class="list-group-item bg-transparent border-secondary text-white d-flex align-items-center px-0 py-2">
                                            <img src="{% if jugador_inscrito.imagen_perfil %}{{ jugador_inscrito.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" class="rounded-circle me-2" width="30" height="30" alt="{{ jugador_inscrito.nombre }}">
                                            <span>{{ jugador_inscrito.nombre }} <small>({{ jugador_inscrito.get_posicion_display|default:"Sin pos." }})</small></span>
                                            {% if jugador_inscrito == partido.creador %}
                                                <span class="badge bg-primary ms-2">Creador</span>
                                            {% endif %}
                                            {% if partido.equipo_local and jugador_inscrito in partido.equipo_local.jugadores.all %}
                                                <span class="badge bg-info ms-auto">Equipo Local</span>
                                            {% elif partido.equipo_visitante and jugador_inscrito in partido.equipo_visitante.jugadores.all %}
                                                 <span class="badge bg-warning text-dark ms-auto">Equipo Visitante</span>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <p class="text-white-50">Aún no hay jugadores inscritos.</p>
                            {% endif %}

                            <div class="mt-3">
                                {# ... (Lógica de botones de acción como la tenías, adaptada) ... #}
                                {% if es_creador %}
                                    {% if partido.estado == 'PROGRAMADO' %}
                                        {% if partido.equipo_local and partido.equipo_visitante %}
                                            <a href="{% url 'registrar_resultado_partido' pk=partido.id_partido %}" class="btn btn-info mt-2 w-100">
                                                <i class="fas fa-edit me-2"></i>Registrar Resultado
                                            </a>
                                        {% elif not form_asignar_equipos %}
                                            <p class="text-warning small">Asigna jugadores a los equipos para poder registrar el resultado.</p>
                                        {% endif %}
                                    {% elif partido.estado == 'FINALIZADO' %}
                                        {# ... (Mostrar resultado) ... #}
                                    {% endif %}
                                {% elif esta_inscrito %}
                                    {# ... (Botón Ya Inscrito) ... #}
                                {% elif inscripcion_esta_abierta %}
                                    {# ... (Formulario Inscribirse) ... #}
                                {% else %}
                                    {# ... (Botón Inscripción no disponible) ... #}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-top border-secondary text-center py-3">
                        <a href="{% url 'buscar_partidos' %}" class="btn btn-outline-light"><i class="fas fa-arrow-left me-2"></i>Volver a la lista de partidos</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const dragLists = document.querySelectorAll('.drag-list');
    let draggedItem = null;
    let placeholder = document.createElement('div');
    placeholder.classList.add('placeholder');

    function getSelectFieldForJugador(jugadorId) {
        return document.querySelector(`.player-assignment-select[data-jugador-id="${jugadorId}"]`);
    }

    document.querySelectorAll('.player-card').forEach(item => {
        item.addEventListener('dragstart', function (e) {
            draggedItem = this;
            // e.dataTransfer.setData('text/plain', this.dataset.jugadorId); // No es estrictamente necesario para esta lógica
            setTimeout(() => {
                this.style.display = 'none'; // Ocultar el original mientras se arrastra
            }, 0);
        });

        item.addEventListener('dragend', function () {
            setTimeout(() => {
                if (draggedItem) { // Asegurarse que draggedItem no es null
                    draggedItem.style.display = 'flex'; // Mostrar de nuevo
                    draggedItem = null;
                }
                if (placeholder.parentNode) {
                    placeholder.parentNode.removeChild(placeholder);
                }
            }, 0);
        });
    });

    dragLists.forEach(list => {
        list.addEventListener('dragover', function (e) {
            e.preventDefault(); // Necesario para permitir el drop
            this.classList.add('drag-over');
            
            // Lógica del placeholder para feedback visual
            const afterElement = getDragAfterElement(this, e.clientY);
            if (afterElement == null) {
                this.appendChild(placeholder);
            } else {
                this.insertBefore(placeholder, afterElement);
            }
        });

        list.addEventListener('dragleave', function () {
            this.classList.remove('drag-over');
            if (placeholder.parentNode === this) { // Solo remover si el placeholder está en esta lista
                 //this.removeChild(placeholder); // Opcional: remover al salir si no se ha soltado
            }
        });

        list.addEventListener('drop', function (e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            if (placeholder.parentNode) {
                 placeholder.parentNode.removeChild(placeholder);
            }

            if (draggedItem) {
                this.appendChild(draggedItem); // Mover el elemento visualmente

                const jugadorId = draggedItem.dataset.jugadorId;
                const selectField = getSelectFieldForJugador(jugadorId);

                if (selectField) {
                    if (this.id === 'equipo-local') {
                        selectField.value = 'local';
                    } else if (this.id === 'equipo-visitante') {
                        selectField.value = 'visitante';
                    } else { // lista-sin-asignar
                        selectField.value = ''; // Opción "Sin Asignar"
                    }
                    // console.log(`Jugador ${jugadorId} asignado a ${selectField.value}`);
                }
            }
        });
    });

    function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.player-card:not([style*="display: none"])')]; // Excluir el que se está arrastrando

        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    // Opcional: Si quieres que al cambiar el select (si lo haces visible) se mueva el card
    document.querySelectorAll('.player-assignment-select').forEach(select => {
        select.addEventListener('change', function() {
            const jugadorId = this.dataset.jugadorId;
            const playerCard = document.querySelector(`.player-card[data-jugador-id="${jugadorId}"]`);
            if (!playerCard) return;

            let targetListId;
            if (this.value === 'local') {
                targetListId = 'equipo-local';
            } else if (this.value === 'visitante') {
                targetListId = 'equipo-visitante';
            } else {
                targetListId = 'lista-sin-asignar';
            }
            const targetList = document.getElementById(targetListId);
            if (targetList) {
                targetList.appendChild(playerCard);
            }
        });
    });
});
</script>
{% endblock %}

================
File: app/templates/registration/login.html
================
{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión - FieldConnect</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{% static 'css/login_styles.css' %}" rel="stylesheet">

</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="{% url 'landing' %}">FieldConnect</a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <i class="fas fa-bars text-white"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-btn-register" href="{% url 'registro' %}">
                        <i class="fas fa-user-plus"></i>
                        Registrarse
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Login Section -->
    <section class="login-section">
        <!-- Background Elements -->
        <div class="login-bg-pattern"></div>
        
        <!-- Hero Image -->
        <div class="login-hero-image d-none d-xl-block">
            <img src="https://sportrenders.com/wp-content/uploads/2023/11/Ronaldinho-Render-PNG-Barcelona-Imagen-Transparente-Sport-Renders.png" alt="Ronaldinho" loading="lazy">
            <div class="login-image-glow"></div>
        </div>
        
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-6">
                    <div class="login-card fade-in">
                        <div class="login-card-header">
                            <h1 class="login-title">Bienvenido de nuevo</h1>
                            <div class="login-divider"></div>
                            <p class="login-subtitle">
                                Ingresa tus datos para acceder a tu cuenta y conectarte con jugadores de tu zona
                            </p>
                        </div>
                        
                        <form action="{% url 'login' %}" method="post" id="loginForm" class="login-form">
                            {% csrf_token %}
                            
                            <div class="form-grid">
                                {{ form | crispy }}
                            </div>
                            
                            <div class="login-remember">
                                <input type="checkbox" class="form-check-input" id="remember-me">
                                <label class="form-check-label" for="remember-me">Recordarme</label>
                            </div>
                            
                            <button type="submit" class="btn btn-login">
                                <i class="fas fa-sign-in-alt"></i>
                                Iniciar sesión
                            </button>
                            
                            <div class="login-footer">
                                <p>¿No tienes una cuenta? 
                                    <a href="{% url 'registro' %}" class="login-link">Regístrate ahora</a>
                                </p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="login-footer-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="footer-text">© 2025 FieldConnect. Simple por diseño.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="footer-text">
                        Reviviendo el fútbol callejero 
                        <i class="fas fa-futbol gradient-text mx-1"></i>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Scroll animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });
    </script>
</body>
</html>

================
File: app/templates/registration/registro.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block base %}
<!-- Navbar -->
{% include "components/landing_nav.html" %}

<!-- Auth Section - Register con diseño mejorado -->
<section class="py-5 position-relative overflow-hidden" style="background-color: #1a202c; min-height: calc(100vh - 84px);">
    <!-- Patrón de fondo sutil -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiB4PSIxMDAiIHk9IjI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNTAwIiByPSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIzMDAiIHg9IjEwMCIgeT0iMzUwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoNDAsMTY3LDY5LDAuMDUpIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjMwMCIgeD0iNzIwIiB5PSIzNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg0MCwxNjcsNjksMC4wNSkiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg=='); background-size: cover; background-position: center; z-index: 1; opacity: 0.1;"></div>
    
    <!-- Elementos decorativos flotantes -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1; opacity: 0.07;">
        <div class="position-absolute" style="top: 10%; left: 5%;">
            <i class="fas fa-futbol fa-5x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
        <div class="position-absolute" style="top: 80%; left: 25%;">
            <i class="fas fa-trophy fa-3x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
        <div class="position-absolute" style="bottom: 15%; right: 10%;">
            <i class="fas fa-futbol fa-4x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
    </div>
    
    <!-- Imagen de Beckham con mejoras visuales -->
    <div class="position-absolute h-100 w-100 end-0 d-none d-xl-block" style="width: 25%; z-index: 1; opacity: 0.8;">
        <img src="https://sportrenders.com/wp-content/uploads/2023/06/David-Beckham-Image-PNG-Render-Manchester-United-Futbol-Sport-Renders.png" alt="David Beckham" class="h-100 w-100" style="object-fit: contain; object-position: right center; filter: drop-shadow(0 0 30px rgba(40,167,69,0.2));">
        
        <!-- Resplandor detrás de la imagen -->
        <div class="position-absolute top-50 end-0 translate-middle-y" style="width: 300px; height: 600px; background: radial-gradient(ellipse at center, rgba(40,167,69,0.15) 0%, rgba(40,167,69,0) 70%); filter: blur(30px); z-index: -1;"></div>
    </div>
    
    <div class="container position-relative" style="z-index: 2;">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                <!-- Formulario de registro mejorado -->
                <div class="card border-0 shadow-lg" style="background: linear-gradient(145deg, #2d3748, #1e2533); border-radius: 1rem; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.3);">
                    <div class="card-body p-4 p-md-5">
                        <h2 class="text-center text-white fw-bold mb-2">Crea tu cuenta</h2>
                        <div class="d-flex justify-content-center mb-4">
                            <div class="bg-success" style="height: 3px; width: 60px; border-radius: 3px;"></div>
                        </div>
                        <p class="text-white-50 text-center mb-4">Únete a la comunidad y empieza a disfrutar del fútbol como antes</p>
                        
                        <!-- Implementando crispy_forms -->
                        <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            
                            <div class="row">
                                {{ form | crispy }}
                            </div>
                            
                            <button type="submit" class="btn btn-success w-100 py-3 mb-4" style="border-radius: 0.5rem; box-shadow: 0 8px 15px rgba(40,167,69,0.3);">
                                <i class="fas fa-user-plus me-2"></i>Crear cuenta
                            </button>
                            
                            <div class="text-center text-white-50">
                                <p class="mb-0">¿Ya tienes una cuenta? <a href="{% url 'login' %}" class="text-success fw-bold">Inicia sesión</a></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer mejorado -->
<footer class="py-4" style="background-color: #0a0a0a;">
    <div class="container">
        <!-- Footer Bottom / Copyright -->
        <div class="pt-2">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="text-white-50 small mb-0">© 2025 FútbolConnect. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="text-white-50 small mb-0">Reviviendo el fútbol callejero <i class="fas fa-futbol text-success mx-1"></i></p>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Estilos para campos de formulario -->
<style>
    /* Estilos para los campos de formulario */
    .form-control, .form-select {
        background-color: rgba(255,255,255,0.05) !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
        color: white !important;
        border-radius: 0.5rem !important;
        padding: 0.75rem 1rem !important;
        transition: all 0.3s ease !important;
    }
    
    .form-control:focus, .form-select:focus {
        background-color: rgba(255,255,255,0.1) !important;
        border-color: rgba(40,167,69,0.5) !important;
        box-shadow: 0 0 0 0.25rem rgba(40,167,69,0.25) !important;
    }
    
    .form-control::placeholder {
        color: rgba(255,255,255,0.5) !important;
    }
    
    /* Estilos para etiquetas de formulario */
    .form-label {
        color: rgba(255,255,255,0.8) !important;
        font-weight: 500 !important;
    }
    
    /* Estilos para mensajes de ayuda */
    .form-text {
        color: rgba(255,255,255,0.5) !important;
    }
    
    /* Botones de envío */
    .btn-success {
        background-color: #28a745 !important;
        border-color: #28a745 !important;
        transition: all 0.3s ease !important;
    }
    
    .btn-success:hover {
        transform: translateY(-3px) !important;
        box-shadow: 0 10px 25px rgba(40,167,69,0.4) !important;
    }
</style>
{% endblock %}

================
File: app/views/__init__.py
================
from .canchas_views import CanchasView, RegistrarCanchaView, DetalleCanchaView
from .commons_views import Landing, Home, Estadisticas
from .partido_views import CrearPartidos, BuscarPartidos,DetallePartidoView, InscribirsePartidoView, RegistrarResultadoPartidoView
from .user_views import UserRegister,Perfil, UserUpdateProfile
from .equipo_views import CrearEquipoPermanenteView, MisEquiposListView, DetalleEquipoView, EditarEquipoPermanenteView
from .estadisticas_views import EstadisticasView
from .mis_partidos_views import MisPartidosView


__all__ = [
    "CanchasView",
    "RegistrarCanchaView",
    "DetalleCanchaView",
    "Landing",
    "Home",
    "Estadisticas",
    "CrearPartidos",
    "BuscarPartidos",
    "DetallePartidoView",
    "InscribirsePartidoView",
    "RegistrarResultadoPartidoView",
    "UserRegister",
    "Perfil",
    "UserUpdateProfile",
    "CrearEquipoPermanenteView",
    "MisEquiposListView",
    "DetalleEquipoView",
    "EditarEquipoPermanenteView",
    "MisPartidosView",
    "EstadisticasView"
]

================
File: app/views/equipo_views.py
================
from django.views.generic import CreateView,UpdateView, ListView, DetailView
from django.contrib.auth.mixins import LoginRequiredMixin

from django.shortcuts import render, redirect, get_object_or_404
from django.urls import reverse_lazy, reverse
from django.contrib import messages
from django.db.models import Q
from app.forms.equipo_forms import EquipoPermanenteForm
from app.models.equipo import Equipo
from app.models.user import User
#from django.contrib.auth import get_user_model; User = get_user_model()

class CrearEquipoPermanenteView(LoginRequiredMixin, CreateView):
    model = Equipo
    form_class = EquipoPermanenteForm
    template_name = 'equipos/crear_equipo_permanente.html'

    def get_form_kwargs(self):
        kwargs = super().get_form_kwargs()
        kwargs['user'] = self.request.user # Pasar usuario al form para filtrar miembros_iniciales
        return kwargs

    def form_valid(self, form):
        form.instance.capitan = self.request.user
        form.instance.tipo_equipo = 'PERMANENTE'
        form.instance.activo = True
        
        self.object = form.save() 
        self.object.jugadores.add(self.request.user) # El capitán es miembro

        miembros_iniciales = form.cleaned_data.get('miembros_iniciales')
        if miembros_iniciales:
            self.object.jugadores.add(*miembros_iniciales)
        
        messages.success(self.request, f"¡Equipo '{self.object.nombre_equipo}' creado con éxito!")
        return redirect(self.get_success_url())

    def get_success_url(self):
        return reverse('detalle_equipo', kwargs={'pk': self.object.id_equipo})

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = "Crear Nuevo Equipo Permanente"
        return context

class MisEquiposListView(LoginRequiredMixin, ListView):
    model = Equipo
    template_name = 'equipos/mis_equipos_lista.html'
    context_object_name = 'equipos_list'
    paginate_by = 12

    def get_queryset(self):
        return Equipo.objects.filter(
            tipo_equipo='PERMANENTE',
            activo=True
        ).filter(
            Q(capitan=self.request.user) | Q(jugadores=self.request.user)
        ).distinct().order_by('-fecha_creacion')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = "Mis Equipos"
        return context

class DetalleEquipoView(LoginRequiredMixin, DetailView):
    model = Equipo
    template_name = 'equipos/detalle_equipo.html'
    context_object_name = 'equipo'
    pk_url_kwarg = 'pk' # Coincide con <uuid:pk> en tu URL

    def get_queryset(self):
        return super().get_queryset().filter(tipo_equipo='PERMANENTE', activo=True)

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        equipo = self.get_object()
        context['titulo_pagina'] = f"Perfil del Equipo: {equipo.nombre_equipo}"
        context['es_capitan'] = (equipo.capitan == self.request.user)
        context['es_miembro'] = self.request.user in equipo.jugadores.all()
        # Aquí podrías añadir próximos partidos del equipo, historial, etc.
        # context['proximos_partidos_equipo'] = Partido.objects.filter(
        #     Q(equipo_local=equipo) | Q(equipo_visitante=equipo),
        #     estado='PROGRAMADO',
        #     fecha__gte=django_timezone.now()
        # ).order_by('fecha')[:5]
        return context

class EditarEquipoPermanenteView(LoginRequiredMixin, UpdateView):
    model = Equipo
    form_class = EquipoPermanenteForm
    template_name = 'equipos/editar_equipo_permanente.html'
    pk_url_kwarg = 'pk'

    def get_queryset(self):
        # Solo el capitán puede editar su equipo permanente y activo
        return super().get_queryset().filter(
            capitan=self.request.user, 
            tipo_equipo='PERMANENTE', 
            activo=True
        )
    
    def get_form_kwargs(self):
        kwargs = super().get_form_kwargs()
        kwargs['user'] = self.request.user # Para el __init__ del form si es necesario
        # Para pre-rellenar miembros_iniciales en edición (si lo quieres permitir)
        # Si 'miembros_iniciales' es solo para la creación, no necesitas esto.
        # Si quieres permitir editar la lista de miembros aquí, el campo debería llamarse
        # 'jugadores' y usar un widget adecuado. Por ahora, EquipoPermanenteForm
        # tiene 'miembros_iniciales' que es más para la creación.
        # Para editar miembros, usualmente se hace en una sección separada de "Gestionar Miembros".
        return kwargs

    def form_valid(self, form):
        # La lógica de añadir/quitar jugadores al editar es más compleja
        # que solo usar form.cleaned_data.get('miembros_iniciales').
        # Por ahora, este form solo edita los campos básicos del equipo.
        # La gestión de miembros (añadir/quitar) se haría en otra vista/lógica.
        messages.success(self.request, f"Equipo '{form.instance.nombre_equipo}' actualizado con éxito.")
        return super().form_valid(form)
    
    def get_success_url(self):
        return reverse_lazy('detalle_equipo', kwargs={'pk': self.object.pk})

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = f"Editar Equipo: {self.object.nombre_equipo}"
        return context

================
File: app/views/partido_views.py
================
from datetime import timedelta
from django.contrib import messages
from django.urls import reverse_lazy
from django.views.generic import TemplateView,CreateView,UpdateView, ListView, DetailView, View, FormView
from django.contrib.auth.mixins import LoginRequiredMixin
from django.db.models import Count, Case, When, BooleanField
from django.db.models import F as FunctionF
from django.db.models import Q as FunctionQ
from django.shortcuts import get_object_or_404, redirect
from datetime import timezone as django_timezone
from django.utils import timezone as now_timezone
from django.contrib.auth import get_user_model
from app.forms.equipo_forms import AsignarEquiposForm
from app.models.equipo import Equipo
from app.models.user import User
from app.forms.partido_forms import PartidoForm, ResultadoPartidoForm
from app.models.partido import Partido
from django.db.models import ExpressionWrapper, DateTimeField





#PARTIDOS
'''
CrearPartidos

BuscarPartidos

DetallePartidoView

InscribirsePartido

RegistrarResultadoPartidoView
'''



User = get_user_model() 

class CrearPartidos(LoginRequiredMixin, CreateView):
    model = Partido
    form_class = PartidoForm
    template_name = 'partidos/crear_partidos.html'
    success_url = reverse_lazy('buscar_partidos')

    def form_valid(self, form):
        form.instance.creador = self.request.user
        
        if 'fecha' in form.cleaned_data:
            form.instance.fecha = form.cleaned_data['fecha']
        else:
            messages.error(self.request, "Error: Fecha del partido no procesada.")
            return self.form_invalid(form)

        # Asignar fecha_limite_inscripcion si vino del formulario
        # Si es None, el método save() del modelo Partido lo calculará por defecto
        if 'fecha_limite_inscripcion' in form.cleaned_data:
            form.instance.fecha_limite_inscripcion = form.cleaned_data['fecha_limite_inscripcion']
        
        response = super().form_valid(form)
        
        if self.object:
            self.object.jugadores.add(self.request.user)
        
        messages.success(self.request, f"¡Partido en '{self.object.cancha.nombre_cancha}' creado con éxito para el {self.object.fecha.strftime('%d/%m/%Y a las %H:%M')}!")
        return response
    

class BuscarPartidos(LoginRequiredMixin, ListView):
    model = Partido
    template_name = 'partidos/buscar_partidos.html'
    context_object_name = 'partidos_info_list' # Cambiado para evitar confusión con el original
    paginate_by = 9

    def get_queryset(self):
        ahora = now_timezone.now()
        # Partidos programados que aún no han pasado su fecha límite de inscripción efectiva
        # y que tienen plazas disponibles.
        queryset = Partido.objects.filter(
            estado='PROGRAMADO',
            # fecha_limite_inscripcion_efectiva > ahora (esto se hará con annotate y Case/When)
            # o podemos filtrar después de anotar
        ).annotate(
            num_jugadores_inscritos=Count('jugadores'),
            # Calculamos la fecha_limite_efectiva aquí para poder filtrar
            # Si fecha_limite_inscripcion es NULL, usamos fecha - 1 hora
            limite_inscripcion_calculada=Case(
                When(fecha_limite_inscripcion__isnull=False, then=FunctionF('fecha_limite_inscripcion')),
                default=ExpressionWrapper(FunctionF('fecha') - timedelta(hours=1), output_field=DateTimeField())
            )
        ).filter(
            limite_inscripcion_calculada__gt=ahora, # Inscripción aún no ha cerrado
            num_jugadores_inscritos__lt=FunctionF('max_jugadores') # Plazas disponibles
        ).order_by('fecha')
        
        # No excluimos los partidos del usuario aquí, lo manejaremos en el contexto

        return queryset
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs) # Esto ya poblará 'partidos_info_list'
        context['titulo_pagina'] = "Encuentra Partidos"
        
        # Procesar la lista de partidos para añadir información contextual
        partidos_procesados = []
        # 'object_list' es el nombre por defecto que ListView usa para el queryset paginado
        # si no se define context_object_name o si se quiere el queryset original.
        # En nuestro caso, ListView ya usa 'partidos_info_list' por context_object_name.
        for partido in context['partidos_info_list']: 
            es_creador = (partido.creador == self.request.user)
            esta_inscrito = self.request.user in partido.jugadores.all()
            
            # Usamos la propiedad del modelo para determinar si la inscripción está abierta
            # La propiedad ya considera el estado, el límite y las plazas.
            inscripcion_esta_abierta = partido.inscripcion_abierta 

            plazas_disponibles = partido.max_jugadores - partido.num_jugadores_inscritos

            partidos_procesados.append({
                'partido': partido,
                'es_creador': es_creador,
                'esta_inscrito': esta_inscrito,
                'inscripcion_esta_abierta': inscripcion_esta_abierta,
                'plazas_disponibles': plazas_disponibles,
            })
        context['partidos_info_list'] = partidos_procesados # Reemplazamos con la lista procesada
        return context

class DetallePartidoView(LoginRequiredMixin, DetailView): # DetailView puede manejar POST si lo sobrescribes
    model = Partido
    template_name = 'partidos/detalle_partido.html'
    context_object_name = 'partido'
    pk_url_kwarg = 'pk' 

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        partido = self.get_object()
        usuario_actual = self.request.user

        context['titulo_pagina'] = f"Detalles: {partido.cancha.nombre_cancha} - {partido.fecha.strftime('%d/%m %H:%M')}"
        context['es_creador'] = (partido.creador == usuario_actual)
        context['esta_inscrito'] = usuario_actual in partido.jugadores.all()
        context['inscripcion_esta_abierta'] = partido.inscripcion_abierta
        
        jugadores_inscritos_list = partido.jugadores.all().order_by('nombre')
        context['jugadores_inscritos_list'] = jugadores_inscritos_list
        context['plazas_disponibles'] = partido.max_jugadores - partido.jugadores.count()

        if context['es_creador'] and partido.estado == 'PROGRAMADO':
            # Pasar el formulario de asignación de equipos al contexto
            # Pasamos los jugadores inscritos y el partido para pre-rellenar si ya hay equipos
            context['form_asignar_equipos'] = AsignarEquiposForm(
                jugadores_inscritos=jugadores_inscritos_list,
                partido=partido 
            )
        return context

    def post(self, request, *args, **kwargs):
        partido = self.get_object()
        usuario_actual = request.user

        if partido.creador != usuario_actual:
            messages.error(request, "No tienes permiso para modificar este partido.")
            return redirect('detalle_partido', pk=partido.id_partido)

        if partido.estado != 'PROGRAMADO':
            messages.error(request, "Solo se pueden asignar equipos a partidos programados.")
            return redirect('detalle_partido', pk=partido.id_partido)

        # Procesar el formulario de asignación de equipos
        form_asignar = AsignarEquiposForm(request.POST, jugadores_inscritos=partido.jugadores.all(), partido=partido)

        if form_asignar.is_valid():
            jugadores_equipo_local_ids = []
            jugadores_equipo_visitante_ids = []

            for jugador_obj in partido.jugadores.all(): # 'jugador_obj' para evitar confusión con la variable 'jugador' del bucle en el template
                asignacion = form_asignar.cleaned_data.get(f'jugador_{jugador_obj.id}')
                if asignacion == 'local':
                    jugadores_equipo_local_ids.append(jugador_obj.id)
                elif asignacion == 'visitante':
                    jugadores_equipo_visitante_ids.append(jugador_obj.id)
            

            if partido.equipo_local and partido.equipo_local.tipo_equipo == 'PERMANENTE':
                messages.info(request, "Este partido ya tiene un equipo local permanente asignado. No se puede reasignar aquí.")
            elif partido.equipo_visitante and partido.equipo_visitante.tipo_equipo == 'PERMANENTE':
                messages.info(request, "Este partido ya tiene un equipo visitante permanente asignado. No se puede reasignar aquí.")
            else:
                sufijo_nombre = f"{partido.cancha.nombre_cancha[:10]}_{partido.fecha.strftime('%d%m%y%H%M')}"

                if partido.equipo_local: # Si ya existe un equipo de tipo PARTIDO para local
                    equipo_local = partido.equipo_local
                    equipo_local.nombre_equipo = f"Locales - {sufijo_nombre}" # Actualizar nombre por si acaso
                    equipo_local.save()
                else:
                    equipo_local = Equipo.objects.create(
                    nombre_equipo=f"Locales - {sufijo_nombre}",
                    capitan=partido.creador, tipo_equipo='PARTIDO',
                    partido_asociado=partido # Enlazar al partido
                    )
                equipo_local.jugadores.set(User.objects.filter(id__in=jugadores_equipo_local_ids))
                partido.equipo_local = equipo_local

                if partido.equipo_visitante: # Si ya existe un equipo de tipo PARTIDO para visitante
                    equipo_visitante = partido.equipo_visitante
                    equipo_visitante.nombre_equipo = f"Visitantes - {sufijo_nombre}"
                    equipo_visitante.save()
                else:
                    equipo_visitante = Equipo.objects.create(
                    nombre_equipo=f"Visitantes - {sufijo_nombre}",
                    capitan=partido.creador, tipo_equipo='PARTIDO',
                    partido_asociado=partido # Enlazar al partido
                    )  
                    equipo_visitante.jugadores.set(User.objects.filter(id__in=jugadores_equipo_visitante_ids))
                    partido.equipo_visitante = equipo_visitante
        
                partido.save()
                messages.success(request, "Equipos para el partido asignados/actualizados correctamente.")

            return redirect('detalle_partido', pk=partido.id_partido)
        
        else:
            # Si el formulario no es válido, re-renderizar la página con los errores
            # Es un poco más complejo pasar el form con errores de vuelta al DetailView
            # Una forma es guardar los errores en messages o re-renderizar el contexto.
            for field, errors in form_asignar.errors.items():
                for error in errors:
                    messages.error(request, f"Error en asignación: {error}")
            # Recargamos el contexto para que el formulario con errores se muestre
            context = self.get_context_data(**kwargs) # Obtener contexto base
            context['form_asignar_equipos'] = form_asignar # Sobrescribir con el form con errores
            return self.render_to_response(context)


    
class InscribirsePartidoView(LoginRequiredMixin, View):
    def post(self, request, *args, **kwargs):
        partido_id = kwargs.get('partido_id') # Asumiendo que pasas el ID del partido en la URL
        partido = get_object_or_404(Partido, id_partido=partido_id, estado='PROGRAMADO') # Usar id_partido
        usuario = request.user

        # Verificar si ya está inscrito (doble check, aunque el queryset de búsqueda ya lo excluye)
        if usuario in partido.jugadores.all():
            messages.warning(request, "Ya estás inscrito en este partido.")
            return redirect('buscar_partidos') # O a la página de detalle del partido

        # Verificar si hay plazas
        if partido.jugadores.count() >= partido.max_jugadores:
            messages.error(request, "Lo sentimos, este partido ya está lleno.")
            return redirect('buscar_partidos')

        # Crear la inscripción (o simplemente añadir al ManyToManyField)
        # Opción 1: Solo añadir al ManyToManyField 'jugadores' del Partido
        partido.jugadores.add(usuario)
        messages.success(request, f"¡Te has inscrito correctamente al partido en {partido.cancha.nombre_cancha}!")

        return redirect('buscar_partidos') # O a 'mis_partidos' o detalle del partido
    

    
class RegistrarResultadoPartidoView(LoginRequiredMixin, FormView):
    form_class = ResultadoPartidoForm
    template_name = 'partidos/registrar_resultado.html' 

    def dispatch(self, request, *args, **kwargs):
        """
        Asegura que solo el creador del partido pueda acceder y
        que el partido esté en un estado adecuado (PROGRAMADO o EN_CURSO).
        """
        self.partido = get_object_or_404(Partido, id_partido=kwargs['pk'])
        if self.partido.creador != request.user:
            messages.error(request, "No tienes permiso para registrar el resultado de este partido.")
            return redirect('detalle_partido', pk=self.partido.id_partido)
        if self.partido.estado == 'FINALIZADO':
            messages.info(request, "Este partido ya ha finalizado y tiene un resultado registrado.")
            return redirect('detalle_partido', pk=self.partido.id_partido)
        if self.partido.estado == 'CANCELADO':
            messages.warning(request, "No se puede registrar resultado para un partido cancelado.")
            return redirect('detalle_partido', pk=self.partido.id_partido)
        return super().dispatch(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['partido'] = self.partido
        context['titulo_pagina'] = f"Registrar Resultado para: Partido en {self.partido.cancha.nombre_cancha}"
        # Pre-rellenar el formulario si ya hay goles (aunque no debería si no está finalizado)
        if self.partido.goles_local is not None:
            context['form'].fields['goles_local'].initial = self.partido.goles_local
        if self.partido.goles_visitante is not None:
            context['form'].fields['goles_visitante'].initial = self.partido.goles_visitante
        return context

    def form_valid(self, form):
        goles_local = form.cleaned_data['goles_local']
        goles_visitante = form.cleaned_data['goles_visitante']

        partido = self.partido
        # Llamar al nuevo método en el modelo Partido
        partido.registrar_resultado_y_actualizar_stats(goles_local, goles_visitante)
        
        if partido.modalidad != 'AMISTOSO' and partido.equipo_local and partido.equipo_visitante:
            messages.success(self.request, "Resultado registrado y calificaciones ELO actualizadas.")
        elif partido.modalidad == 'AMISTOSO':
            messages.success(self.request, "Resultado del partido amistoso registrado (ELO no afectado).")
        else:
            messages.warning(self.request, "Resultado registrado, pero no se pudieron actualizar las calificaciones ELO (faltan equipos o es amistoso).")
        
        return redirect('detalle_partido', pk=partido.id_partido)

    def get_success_url(self):
        # Este método es llamado por FormView si no se especifica en form_valid un redirect
        # pero como ya hacemos redirect en form_valid, podemos omitirlo o hacerlo más genérico.
        return reverse_lazy('detalle_partido', kwargs={'pk': self.partido.id_partido})

================
File: app/admin.py
================
from django.contrib import admin
from .models import *
from django.contrib.auth.admin import UserAdmin

# Register your models here.


admin.site.register(Equipo)
admin.site.register(Partido)
admin.site.register(Cancha)
admin.site.register(Resultado)
admin.site.register(Inscripcion)
admin.site.register(HistorialELO)


class MyAdmin(UserAdmin):
    model = User

    list_display = ("email", "username", "nombre", "calificacion", "posicion")
    search_fields = ("email", "nombre", "posicion")

    ordering = ("-calificacion",)

    fieldsets = UserAdmin.fieldsets + (
        ('Información Personal', {
            "fields": (
                "nombre", "fecha_nacimiento", "genero", "posicion",
                "ubicacion", "imagen_perfil"
            )
        }),
        ('📊 Estadísticas', {
            "fields": (
                "partidos_jugados", "victorias", "derrotas", "empates", "calificacion"
            )
        }),
    )

    add_fieldsets = UserAdmin.add_fieldsets + (
        ('Información adicional', {
            "fields": (
                "nombre", "fecha_nacimiento", "genero", "posicion",
                "ubicacion", "imagen_perfil"
            )
        }),
        ('📊 Estadísticas', {
            "fields": (
                "partidos_jugados", "victorias", "derrotas", "empates", "calificacion"
            )
        }),
    )



# Registra el Admin
admin.site.register(User, MyAdmin)

================
File: app/templates/components/top_nav.html
================
<!-- Top Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark p-3" style="background-color: #1E293B;">
    <div class="container-fluid">
        <!-- Sidebar Toggle -->
        <button class="btn btn-dark d-lg-none me-3" type="button">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Search Bar -->
        <form class="d-flex flex-grow-1 me-auto mb-2 mb-lg-0 mx-lg-3">
            <div class="input-group">
                <span class="input-group-text bg-dark border-0 text-success">
                    <i class="fas fa-search"></i>
                </span>
            </div>
        </form>
    
        
        <!-- User dropdown -->
        <div class="dropdown">
            <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                {% if current_user_avatar_url %}
                    <img src="{{ current_user_avatar_url }}" alt="Avatar" width="32" height="32" class="rounded-circle me-2">
                {% else %}
                    <img src="https://via.placeholder.com/32" alt="Avatar" width="32" height="32" class="rounded-circle me-2"> {# Fallback por si algo falla #}
                {% endif %}
                <span>{{ current_user_nombre|default:user.username }}</span> {# Muestra el nombre, o el email si el nombre no está #}
            </a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark text-small" aria-labelledby="userDropdown">
                <li><a class="dropdown-item" href="{% url 'perfil' %}">Mi perfil</a></li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <form action="{% url 'logout' %}" method="post" class="dropdown-item p-0">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-link text-white-50 w-100 text-start px-3">Cerrar Sesión</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</nav>

================
File: app/templates/home.html
================
{% extends 'base.html' %}
{% block base %}
<!-- Dashboard Layout -->
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!--  Nav -->
    {% include "components/nav.html" %}
    

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-black">
        {% include "components/top_nav.html" %}
        
        <!-- Dashboard Hero/Welcome Section -->
        <div class="container-fluid p-4">
            <!-- Welcome Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/landing.html
================
{% extends 'base.html' %}
{% block base %}
<!-- Navbar -->
{% include "components/landing_nav.html" %}

<!-- Hero Section -->
<section id="hero" class="position-relative bg-black text-white overflow-hidden d-flex align-items-center" style="min-height: 85vh;">
    <!-- Overlay con gradiente dinámico -->
    <div class="position-absolute w-100 h-100 top-0 start-0" style="background: linear-gradient(135deg, rgba(0,0,0,0.92) 0%, rgba(19,38,19,0.85) 100%); z-index: 1;"></div>
    
    <!-- Patrón de fondo estilo cancha -->
    <div class="position-absolute w-100 h-100 top-0 start-0" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiB4PSIxMDAiIHk9IjI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNTAwIiByPSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIzMDAiIHg9IjEwMCIgeT0iMzUwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoNDAsMTY3LDY5LDAuMDUpIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjMwMCIgeD0iNzIwIiB5PSIzNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg0MCwxNjcsNjksMC4wNSkiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg=='); background-size: cover; background-position: center; z-index: 1; opacity: 0.1;"></div>
    
    <!-- Líneas de balón animadas -->
    <div class="position-absolute w-100 h-100" style="z-index: 1; opacity: 0.05;">
        <div class="position-absolute" style="top: 20%; left: 10%;">
            <div style="width: 200px; height: 200px; border: 2px dashed rgba(40,167,69,0.5); border-radius: 50%; transform: rotate(25deg);"></div>
        </div>
        <div class="position-absolute" style="bottom: 15%; right: 15%; animation: float 6s ease-in-out infinite 1s;">
            <div style="width: 150px; height: 150px; border: 2px dashed rgba(40,167,69,0.5); border-radius: 50%; transform: rotate(-15deg);"></div>
        </div>
    </div>
    
    <!-- Imagen de Ronaldo con efectos -->
    <div class="position-absolute w-100 h-100 top-0 end-0" style="width: 22%; z-index: 1; opacity: 0.75; animation: fadeInRight 1.2s ease-out forwards;">
        <img src="https://sportrenders.com/wp-content/uploads/2024/03/Ronaldo-Nazario-PNG-Inter-Football-Render.png" alt="Ronaldo" class="position-absolute end-0 bottom-0 h-100" style="object-fit: contain; filter: drop-shadow(0 0 20px rgba(40,167,69,0.3));">
        
        <!-- Efecto de resplandor detrás de Ronaldo -->
        <div class="position-absolute top-50 end-0 translate-middle-y" style="width: 200px; height: 500px; background: radial-gradient(ellipse at center, rgba(40,167,69,0.2) 0%, rgba(40,167,69,0) 70%); z-index: -1; filter: blur(20px);"></div>
    </div>
    
    <!-- Content con animaciones secuenciales -->
    <div class="container py-5 text-center position-relative" style="z-index: 2;">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                       
                <h1 class="display-3 fw-bold mb-4" style= "text-shadow: 0 4px 15px rgba(0,0,0,0.5);">
                    <span class="d-inline-block">Conecta,</span>
                    <span class="d-inline-block">Juega,</span>
                    <span class="d-inline-block text-success">Gana</span>
                </h1>
                
                <p class="lead mb-5">Encuentra partidos de fútbol cerca de ti, conecta con otros jugadores y disfruta del deporte rey sin preocuparte por nada más que <span class="typed-text fw-bold text-success">jugar y ganar.</span></p>
                
                <div class="d-flex justify-content-center gap-3">
                    <!-- Botón principal con efecto de pulso -->
                    <a href="{% url 'login' %}" class="btn btn-success btn-lg px-4 py-3 position-relative" style="box-shadow: 0 8px 25px rgba(40,167,69,0.3); overflow: hidden;">
                        <span class="position-absolute top-0 start-0 w-100 h-100 rounded" style="background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%); z-index: 0;"></span>
                        <span class="position-relative" style="z-index: 1;"><i class="fas fa-futbol me-2"></i> Únete ahora</span>
                    </a>
                    
                    <!-- Botón secundario con efecto de borde animado -->
                    <a href="{% url 'home' %}" class="btn btn-outline-light btn-lg px-4 py-3 position-relative" style="border-width: 2px; overflow: hidden;">
                        <span class="position-relative" style="z-index: 1;"><i class="fas fa-info-circle me-2"></i> Cómo funciona</span>
                    </a>
                </div>
                
                
            </div>
        </div>
    </div>
    
    <!-- Divisor de onda SVG animado -->
    <div class="position-absolute bottom-0 start-0 w-100" style="z-index: 3;">
        <svg id="wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 120" preserveAspectRatio="none" style="width: 100%; height: 80px;">
            <path fill="#1a202c" fill-opacity="1" d="M0,64L48,80C96,96,192,128,288,128C384,128,480,96,576,80C672,64,768,64,864,69.3C960,75,1056,85,1152,80C1248,75,1344,53,1392,42.7L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z"></path>
        </svg>
    </div>
</section>



<section id="caracteristicas" class="py-5 position-relative overflow-hidden" style="background-color: #1a202c !important; min-height: 55vh;">
    <!-- Decorative Elements - Soccer Elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1; opacity: 0.05;">
        <div class="position-absolute" style="top: 10%; left: 5%;">
            <i class="fas fa-futbol fa-5x"></i>
        </div>
        <div class="position-absolute" style="top: 80%; left: 25%;">
            <i class="fas fa-trophy fa-3x"></i>
        </div>
        <div class="position-absolute" style="top: 60%; right: 10%;">
            <i class="fas fa-futbol fa-4x"></i>
        </div>
        <div class="position-absolute" style="top: 20%; right: 15%;">
            <i class="fas fa-whistle fa-3x"></i>
        </div>
    </div>


<!-- Features Section - Retro-Modern Style with Side Image -->
<section id="caracteristicas" class="py-5 position-relative overflow-hidden" style="background-color: #1a202c !important; min-height: 55vh;">
    <!-- Left Side Background Image -->
    <div class="position-absolute h-100 w-100 d-none d-lg-block" style="width: 22%; z-index: 1; opacity: 0.65;">
        <img src="https://sportrenders.com/wp-content/uploads/2023/10/Ronaldo-PNG-Render-Transparent-Brazil-Free-Image-World-Cup-Football-Sport-Renders-1.png" alt="Ronaldo el de verdad" class="h-100 w-100" style="object-fit: contain; object-position: left center;">
    </div>

    <!-- Decorative Elements - Soccer Elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1; opacity: 0.05;">
        <div class="position-absolute" style="top: 10%; left: 5%;">
            <i class="fas fa-futbol fa-5x"></i>
        </div>
        <div class="position-absolute" style="top: 80%; left: 25%;">
            <i class="fas fa-trophy fa-3x"></i>
        </div>
        <div class="position-absolute" style="top: 60%; right: 10%;">
            <i class="fas fa-futbol fa-4x"></i>
        </div>
        <div class="position-absolute" style="top: 20%; right: 15%;">
            <i class="fas fa-whistle fa-3x"></i>
        </div>
    </div>

    <div class="container position-relative" style="z-index: 2;">
        <!-- Section Header -->
        <div class="text-center mb-5">
            <h2 class="fw-bold text-white display-5 mb-3">El fútbol de los 90 con la tecnología del presente</h2>
            <p class="lead text-white-50 mb-5">Recupera la esencia del fútbol callejero con herramientas digitales que facilitan la organización</p>
        </div>
        
        <!-- Features Cards -->
        <div class="row g-4">
            <!-- Feature 1 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 bg-dark text-white shadow-lg" style="background-color: #2d3748 !important; border-radius: 1rem; overflow: hidden; transition: transform 0.3s;">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                            {% include 'components/svg/landing_location.html' %}
                        </div>
                        <h4 class="card-title">Encuentra partidos cercanos</h4>
                        <p class="card-text text-white-50">Localiza partidos de barrio en tu zona, como en los viejos tiempos pero sin tener que recorrer las calles para encontrarlos.</p>
                    </div>
                </div>
            </div>
            
            <!-- Feature 2 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 bg-dark text-white shadow-lg wow animate__animated animate__fadeInUp" data-wow-delay="0.3s" style="background-color: #2d3748 !important; border-radius: 1rem; overflow: hidden; transition: transform 0.3s;">
                    <div class="card-body text-center p-4">

                        <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                            {% include 'components/svg/landing_team.html' %}
                        </div>

                        <h4 class="card-title">Crea tu equipo de barrio</h4>
                        <p class="card-text text-white-50">Forma tu propio equipo con amigos o conoce nuevos jugadores, como cuando armábamos equipos improvisados en la plaza.</p>
                    </div>
                    
                </div>
            </div>
            
            <!-- Feature 3 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 bg-dark text-white shadow-lg " style="background-color: #2d3748 !important; border-radius: 1rem; overflow: hidden; transition: transform 0.3s;">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                            {% include 'components/svg/landing_player.html' %}
                        </div>
                        <h4 class="card-title">Organiza partidos sin complicaciones</h4>
                        <p class="card-text text-white-50">Programa tus partidos sin las llamadas infinitas de antaño. Reserva canchas y confirma asistencia con un solo clic.</p>
                    </div>
                    
                </div>
            </div>
        </div>        
    </div>
</section>

<!-- How It Works Section -->
 <section id="como-funciona" class="py-5" style="background-color: #111827 !important;">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold text-white">¿Cómo funciona?</h2>
            <p class="lead text-white-50">Es muy sencillo comenzar a usar FútbolConnect</p>
        </div>
        
        <div class="row align-items-center">
            <div class="col-lg-6">
                <!-- <img src="https://phantom-marca.uecdn.es/a2289a02c290eab98d75ead5f5236422/f/webp/assets/multimedia/imagenes/2020/03/26/15852159092839.jpg" alt="App Screenshot" class="img-fluid rounded mb-4 mb-lg-0"> -->
                <img src="https://pbs.twimg.com/media/DWL7apFXcAAutkq.jpg" alt="" class="img-fluid rounded mb-4 mb-lg-0">
            </div>
            <div class="col-lg-6">
                <div class="d-flex mb-4">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>1</strong>
                    </div>
                    <div>
                        <h5 class="text-white">Crea tu perfil</h5>
                        <p class="text-white-50">Regístrate y completa tu perfil con tu posición, nivel y disponibilidad.</p>
                    </div>
                </div>
                
                <div class="d-flex mb-4 wow animate__animated animate__fadeInRight" data-wow-delay="0.3s">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>2</strong>
                    </div>
                    <div>
                        <h5 class="text-white">Busca partidos</h5>
                        <p class="text-white-50">Encuentra partidos cercanos usando el mapa o crea tu propio partido.</p>
                    </div>
                </div>
                
                <div class="d-flex mb-4 wow animate__animated animate__fadeInRight" data-wow-delay="0.5s">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>3</strong>
                    </div>
                    <div>
                        <h5 class="text-white">Únete o invita</h5>
                        <p class="text-white-50">Solicita unirte a un partido existente o invita a otros jugadores al tuyo.</p>
                    </div>
                </div>
                
                <div class="d-flex wow animate__animated animate__fadeInRight" data-wow-delay="0.7s">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>4</strong>
                    </div>
                    <div>
                        <h5 class="text-white">¡A jugar!</h5>
                        <p class="text-white-50">Disfruta del partido y después valora a tus compañeros.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer Mejorado -->
<footer class="py-5" style="background-color: #0a0a0a;">
    <div class="container">
        <!-- Main Footer Content -->
        <div class="row mb-4">
            <!-- Brand Column -->
            <div class="col-lg-4 mb-4 mb-lg-0">
                <div class="d-flex align-items-center mb-3">
                    {% include 'components/svg/logo.html' %}
                    <h3 class="text-white fw-bold mb-0">FútbolConnect</h3>
                </div>
                <p class="text-white-50 mb-4">Conectando jugadores desde el barrio hasta el estadio.</p>

                <p class="text-white-50 mb-4">Reviviendo la pasión del fútbol callejero con la tecnología de hoy.</p>
                <div class="d-flex gap-3 mb-3">
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-facebook-f text-success"></i>
                    </a>
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-instagram text-success"></i>
                    </a>
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-twitter text-success"></i>
                    </a>
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-youtube text-success"></i>
                    </a>
                </div>
            </div>
            
            <!-- Quick Links -->
            <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                <h5 class="text-white mb-4">Enlaces</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="#inicio" class="text-white-50 text-decoration-none hover-success">Inicio</a></li>
                    <li class="mb-2"><a href="#caracteristicas" class="text-white-50 text-decoration-none hover-success">Características</a></li>
                    <li class="mb-2"><a href="#como-funciona" class="text-white-50 text-decoration-none hover-success">Cómo Funciona</a></li>
                    <li class="mb-2"><a href="#testimonios" class="text-white-50 text-decoration-none hover-success">Testimonios</a></li>
                </ul>
            </div>
            
            <!-- Legal Links -->
            <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                <h5 class="text-white mb-4">Legal</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">Privacidad</a></li>
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">Términos</a></li>
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">Cookies</a></li>
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">FAQ</a></li>
                </ul>
            </div>
            
            <!-- Contact / Newsletter -->
            <div class="col-lg-4">
                <h5 class="text-white mb-4">¡Mantente conectado!</h5>
                <p class="text-white-50 mb-3">Suscríbete para recibir novedades, partidos destacados y promociones.</p>
                <div class="input-group mb-3">
                    <input type="email" class="form-control bg-dark border-success text-white" placeholder="Tu email" aria-label="Email" style="border-top-right-radius: 0; border-bottom-right-radius: 0;">
                    <button class="btn btn-success" type="button" style="border-top-left-radius: 0; border-bottom-left-radius: 0;">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Footer Bottom / Copyright -->
        <div class="border-top border-secondary pt-4">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="text-white-50 small mb-0">© 2025 XXX. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="text-white-50 small mb-0">Reviviendo el fútbol callejero</p>
                </div>
            </div>
        </div>
    </div>
</footer>
<style>
    /* Animaciones básicas */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeInLeft {
        from { opacity: 0; transform: translateX(-30px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(50px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
    /* Animaciones avanzadas */
    @keyframes pulse {
        0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(40,167,69,0.7); }
        70% { transform: scale(1); box-shadow: 0 0 0 15px rgba(40,167,69,0); }
        100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(40,167,69,0); }
    }
    
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
        100% { transform: translateY(0px); }
    }
    
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }
    
    @keyframes shimmer {
        0% { opacity: 0.8; }
        50% { opacity: 1; }
        100% { opacity: 0.8; }
    }
    
    @keyframes borderMove {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(300%); }
    }
    
    /* Estilos para botones con efecto hover */
    .btn {
        transition: all 0.3s ease;
    }
    
    .btn-success:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(40,167,69,0.4) !important;
    }
    
    .btn-outline-light:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(255,255,255,0.1) !important;
    }
</style>

{% endblock %}

================
File: app/templates/components/nav.html
================
<!-- Sidebar Navigation -->
<div class="sidebar d-flex flex-column flex-shrink-0 p-3 text-white bg-dark border-end border-secondary" style="width: 280px; min-height: 100vh;">
    <!-- Logo and brand -->
    <a href="{% url 'home' %}" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
        {% include 'components/svg/logo.html' %}
        <span class="fs-4 fw-bold">De Rabona</span>
    </a>
    <hr>
    <!-- User profile preview -->
    <div class="d-flex align-items-center mb-3">
        {% if current_user_avatar_url %}
            <img src="{{ current_user_avatar_url }}" class="rounded-circle me-2" width="50" height="50" alt="Avatar">
        {% else %}
            <img src="https://via.placeholder.com/50" class="rounded-circle me-2" width="50" height="50" alt="Avatar"> 
        {% endif %}
        <div>
            <h6 class="mb-0 text-white">{{ user.nombre }}</h6>
            <span class="text-success">{{ current_user_posicion }}</span>
        </div>
    </div>
    <hr>
    <!-- Navigation menu -->
    <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
            <a href="{% url 'home' %}" class="nav-link text-white active" aria-current="page">
                <i class="fas fa-home me-2"></i>
                Inicio
            </a>
        </li>
        <li>
            <a href="{% url 'buscar_partidos' %}" class="nav-link text-white">
                <i class="fas fa-search me-2"></i>
                Buscar partidos
            </a>
        </li>
        <li>
            <a href="{% url 'crear_partidos' %}" class="nav-link text-white">
                <i class="fas fa-plus-circle me-2"></i>
                Crear partido
            </a>
        </li>
        <li>
            <a href="{% url 'estadisticas_generales' %}" class="nav-link text-white">
                <i class="fas fa-calendar-alt me-2"></i>
                Estadísticas
            </a>
        </li>
        <li>
            <a href="{% url 'lista_mis_equipos' %}" class="nav-link text-white">
                <i class="fas fa-users me-2"></i>
                Mis equipos
            </a>
        </li>
        <li>
            <a href="{% url 'mis_partidos' %}" class="nav-link text-white">
                <i class="fas fa-calendar-alt me-2"></i>
                Mis partidos
            </a>
        </li>
        <li>
            <a href="{% url 'canchas_lista' %}" class="nav-link text-white">
                <i class="fas fa-map-marker-alt me-2"></i>
                Canchas
            </a>
        </li>
        
    </ul>
    <hr>
    <!-- Settings and logout -->
    <ul class="nav nav-pills flex-column">
       
        <li>
            <form action="{% url 'logout' %}" method="post" class="w-20">
                {% csrf_token %}
                <button type="submit" class="btn btn-warning w-100">Cerrar Sesión</button>
            </form>
        </li>
    </ul>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Obtener todos los enlaces de navegación
    const navLinks = document.querySelectorAll('.sidebar .nav-link');
    
    // Obtener la URL actual
    const currentPath = window.location.pathname;
    
    // Primero, quitar la clase active de todos los enlaces
    navLinks.forEach(link => {
        link.classList.remove('active');
    });
    
    // Caso especial: Página de inicio (cuando la URL es "/" o contiene "/home")
    if (currentPath.includes('/home')) {

        const homeLink = document.querySelector('.sidebar .nav-link i.fas.fa-home').closest('.nav-link');
        if (homeLink) {
            homeLink.classList.add('active');
            return; // Si estamos en inicio, no necesitamos verificar otros enlaces
        }
    }
    
    // Para otras páginas, buscar coincidencias por URL
    // Mapeo de rutas a identificadores de menú
    const routeMappings = {
        '/buscar_partidos': '.fas.fa-search',
        '/crear_partidos': '.fas.fa-plus-circle',
        '/estadisticas': '.fas.fa-calendar-alt:first-of-type',
        '/equipos': '.fas.fa-users',
        '/mis_partidos': '.fas.fa-calendar-alt:nth-of-type(2)',
        '/canchas': '.fas.fa-map-marker-alt',
        '/torneos': '.fas.fa-trophy',
        '/configuracion': '.fas.fa-cog',
        '/logout': '.fas.fa-sign-out-alt'
    };
    
    // Buscar coincidencia de ruta
    for (const [route, iconSelector] of Object.entries(routeMappings)) {
        if (currentPath.includes(route)) {
            const link = document.querySelector(`.sidebar .nav-link i${iconSelector}`).closest('.nav-link');
            if (link) {
                link.classList.add('active');
                break; // Una vez encontrada la coincidencia, salimos del bucle
            }
        }
    }
});
</script>

================
File: app/urls.py
================
from django.urls import path


from .views import *

urlpatterns = [


##---------- COMMONS --------------------------------------------------------------------------------------------

    path('', Landing.as_view(), name='landing'),
    path('home', Home.as_view(), name='home'),
    path('estadisticas', Estadisticas.as_view(), name='estadisticas'),

#---------- REGISTRO --------------------------------------------------------------------------------------------
    path('registro',UserRegister.as_view(), name='registro' ),

##---------- PERFIL --------------------------------------------------------------------------------------------
    path('perfil', Perfil.as_view(), name='perfil'),
    path('update_profile',UserUpdateProfile.as_view(), name='update_profile'),
    
##---------- PARTIDOS --------------------------------------------------------------------------------------------
    path('crear_partidos/', CrearPartidos.as_view(), name='crear_partidos'),
    path('buscar_partidos/', BuscarPartidos.as_view(), name='buscar_partidos'),
    path('partido/<uuid:partido_id>/inscribirse/', InscribirsePartidoView.as_view(), name='inscribirse_partido'),
    path('partido/<uuid:pk>/', DetallePartidoView.as_view(), name='detalle_partido'),
    path('partido/<uuid:pk>/registrar_resultado/', RegistrarResultadoPartidoView.as_view(), name='registrar_resultado_partido'),


##---------- CANCHAS --------------------------------------------------------------------------------------------
    path('canchas/', CanchasView.as_view(), name='canchas_lista'), 
    path('canchas/registrar/', RegistrarCanchaView.as_view(), name='canchas_registrar'),
    path('cancha/<uuid:pk_cancha>/', DetalleCanchaView.as_view(), name='detalle_cancha'),


##---------- EQUIPOS --------------------------------------------------------------------------------------------
    path('equipos/crear_equipo_permanente', CrearEquipoPermanenteView.as_view(), name='crear_equipo_permanente'),
    path('equipos/mis_equipos/', MisEquiposListView.as_view(), name='lista_mis_equipos'), 
    path('equipo/<uuid:pk>/', DetalleEquipoView.as_view(), name='detalle_equipo'), 
    path('equipo/<uuid:pk>/editar/', EditarEquipoPermanenteView.as_view(), name='editar_equipo_permanente'),

##---------- MIS PARTIDOS --------------------------------------------------------------------------------------------

    path('mis_partidos/', MisPartidosView.as_view(), name='mis_partidos'),

##---------- ESTADISTICAS GENEREALES --------------------------------------------------------------------------------------------

    path('estadisticas/', EstadisticasView.as_view(), name='estadisticas_generales'),



]




================================================================
End of Codebase
================================================================
