This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: app
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)


================================================================
Directory Structure
================================================================
app/
  templates/
    canchas/
      canchas_lista.html
      detalle_cancha.html
      registro_canchas.html
    components/
      svg/
        landing_location.html
        landing_player.html
        landing_team.html
        logo.html
      audio_toggle.html
      landing_nav.html
      nav.html
      top_nav.html
    partidos/
      buscar_partidos.html
      crear_partidos.html
      detalle_partido.html
      registrar_resultado.html
    perfil/
      perfil.html
      update_profile.html
    registration/
      logged_out.html
      login.html
      registro.html
    base.html
    canchas.html
    estadisticas.html
    home.html
    landing.html
    torneos.html
  admin.py
  apps.py
  context_processors.py
  forms.py
  models.py
  tests.py
  urls.py
  views.py

================================================================
Files
================================================================

================
File: app/templates/canchas/detalle_cancha.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="card border-0 shadow-sm mb-4" style="background-color: #2d3748; border-radius: 15px; color: white;">
                <div class="row g-0">
                    <div class="col-md-4">
                        <img src="{% if cancha.imagen %}{{ cancha.imagen.url }}{% else %}{% static 'images/cancha_default_large.jpg' %}{% endif %}" class="img-fluid rounded-start" alt="{{ cancha.nombre_cancha }}" style="object-fit: cover; height: 100%;">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body p-4">
                            <h3 class="card-title text-success mb-3">{{ cancha.nombre_cancha }}</h3>
                            <p><i class="fas fa-map-marker-alt me-2"></i><strong>Ubicación:</strong> {{ cancha.ubicacion }}</p>
                            <p><i class="fas fa-futbol me-2"></i><strong>Tipo:</strong> {{ cancha.get_tipo_display }}</p>
                            <p><i class="fas fa-layer-group me-2"></i><strong>Superficie:</strong> {{ cancha.get_superficie_display }}</p>
                            <p><i class="fas fa-building me-2"></i><strong>Propiedad:</strong> {{ cancha.get_propiedad_display }}</p>
                            {% if cancha.costo_partido is not None %}
                            <p><i class="fas fa-euro-sign me-2"></i><strong>Costo:</strong> 
                                {% if cancha.costo_partido > 0 %}
                                    {{ cancha.costo_partido|floatformat:2 }}€
                                {% else %}
                                    Gratis
                                {% endif %}
                            </p>
                            {% endif %}
                            <p><i class="fas fa-info-circle me-2"></i><strong>Descripción:</strong> {{ cancha.descripcion|linebreaksbr|default:"No hay descripción adicional." }}</p>
                            <p><i class="fas fa-check-circle me-2"></i><strong>Disponible:</strong> {% if cancha.disponible %}Sí{% else %}No{% endif %}</p>
                            
                            {% if cancha.propiedad == 'PRIVADA' %}
                                <a href="#" class="btn btn-success mt-3"><i class="fas fa-calendar-plus me-2"></i>Contactar para Reservar</a>
                                {# Aquí iría la lógica o información de contacto para canchas privadas #}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color: white;">
                <div class="card-header bg-transparent border-bottom border-secondary py-3">
                    <h5 class="mb-0 text-white"><i class="fas fa-calendar-alt me-2"></i>Próximos Partidos Programados en esta Cancha</h5>
                </div>
                <div class="card-body p-3">
                    {% if proximos_partidos %}
                        <div class="list-group list-group-flush">
                            {% for partido_item in proximos_partidos %}
                                <a href="{% url 'detalle_partido' pk=partido_item.id_partido %}" class="list-group-item list-group-item-action bg-transparent border-secondary text-white d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>{{ partido_item.fecha|date:"d/m/Y H:i" }}</strong> - {{ partido_item.get_tipo_display }}
                                        <small class="d-block text-white-50">Modalidad: {{ partido_item.get_modalidad_display }} | Nivel: {{ partido_item.get_nivel_display|default:"Todos" }}</small>
                                    </div>
                                    <span class="badge bg-success rounded-pill">{{ partido_item.jugadores.count }}/{{ partido_item.max_jugadores }}</span>
                                </a>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-white-50 text-center py-3">No hay partidos programados próximamente en esta cancha.</p>
                    {% endif %}
                </div>
                 <div class="card-footer bg-transparent border-top border-secondary text-center py-3">
                    <a href="{% url 'canchas_lista' %}" class="btn btn-outline-light"><i class="fas fa-arrow-left me-2"></i>Volver al listado de canchas</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/canchas/registro_canchas.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %} {# Si usas crispy_forms #}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card border-0 shadow-sm" style="background-color: #797a7d; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h4 class="text-white mb-0 text-center">{{ titulo_pagina|default:"Registrar Nueva Cancha" }}</h4>
                        </div>
                        <div class="card-body p-4 p-md-5">
                            <!-- Advertencia para dueños (opcional, si quieres mantenerla) -->
                            <div class="alert alert-info bg-info bg-opacity-10 border-info mb-4" role="alert">
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-info-circle text-info me-2"></i>
                                    </div>
                                    <div>
                                        <h6 class="text-info mb-1">Añadir una cancha a la comunidad</h6>
                                        <p class="mb-0 text-info small">Completa los detalles de la cancha. La información será visible para otros jugadores. Si eres dueño o administrador y quieres más opciones, contáctanos.</p>
                                    </div>
                                </div>
                            </div>

                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                
                                {{ form|crispy }} {# Esto renderizará todos los campos del CanchasForm con el estilo de Crispy + Bootstrap5 #}
                                
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'canchas_lista' %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-plus-circle me-2"></i>Registrar Cancha
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/components/svg/landing_location.html
================
<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
    <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/>
</svg>

================
File: app/templates/components/svg/landing_player.html
================
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="60" height="60" x="0" y="0" viewBox="0 0 323.788 323.788" style="enable-background:new 0 0 512 512" xml:space="preserve" class="">
    <g>
    <path d="M199.177 0c12.914 0 23.39 10.47 23.39 23.39 0 12.917-10.476 23.39-23.39 23.39-12.92 0-23.39-10.473-23.39-23.39 0-12.92 10.47-23.39 23.39-23.39z" fill="#ffffff" opacity="1" data-original="#000000"></path>
    <path d="M78.842 189.281c-7.482-4.79-17.424-2.61-22.211 4.872-4.79 7.473-2.61 17.425 4.873 22.209l46.23 29.608c7.017 4.484 16.296 2.88 21.391-3.707l56.547-73.104 43.921 56.674 6.432 78.081c.688 8.399 7.726 14.758 16.006 14.758.439 0 .891-.021 1.336-.052 8.849-.73 15.436-8.492 14.705-17.347l-6.819-82.829a16.099 16.099 0 0 0-3.313-8.533l-35.828-54.21 2.895-73.589s.813-4.236.969-9.448c4.552-5.333 10.543-12.79 18.543-23.289 11.987-15.726 23.017-31.115 23.131-31.268 3.525-4.927 2.392-11.772-2.532-15.299-4.92-3.524-11.771-2.39-15.297 2.53-11.992 16.756-25.952 35.294-36.117 47.807-12.914-1.504-31.115-1.543-41.808.461-3.807.717-6.204 2.361-7.726 4.254-.365.381-.72.779-1.033 1.225-19.04 26.598-43.041 57.7-48.941 62.036a10.962 10.962 0 0 0-4.624 14.435 10.964 10.964 0 0 0 9.867 6.172c1.613 0 3.247-.354 4.79-1.108 2.98-1.453 7.974-3.881 33.611-37.498.922-1.211 1.836-2.413 2.742-3.611l-1.347 40.588.249.065-46.79 70.798-33.852-21.681z" fill="#ffffff" opacity="1" data-original="#000000"></path>
    <path d="M184.921 273.348c13.93 0 25.218 11.294 25.218 25.223 0 13.924-11.288 25.218-25.218 25.218-13.924 0-25.217-11.294-25.217-25.218 0-13.929 11.293-25.223 25.217-25.223z" fill="#ffffff" opacity="1" data-original="#000000"></path>
    </g>
</svg>

================
File: app/templates/components/svg/landing_team.html
================
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="50" x="0" y="0" viewBox="0 0 511.999 511.999" style="enable-background:new 0 0 350 350" xml:space="preserve" class="">
    <g>
    <path d="M438.09 273.32h-39.596c4.036 11.05 6.241 22.975 6.241 35.404v149.65c0 5.182-.902 10.156-2.543 14.782h65.461c24.453 0 44.346-19.894 44.346-44.346v-81.581c.001-40.753-33.155-73.909-73.909-73.909zM107.265 308.725c0-12.43 2.205-24.354 6.241-35.404H73.91c-40.754 0-73.91 33.156-73.91 73.91v81.581c0 24.452 19.893 44.346 44.346 44.346h65.462a44.144 44.144 0 0 1-2.543-14.783v-149.65zM301.261 234.815h-90.522c-40.754 0-73.91 33.156-73.91 73.91v149.65c0 8.163 6.618 14.782 14.782 14.782h208.778c8.164 0 14.782-6.618 14.782-14.782v-149.65c0-40.754-33.156-73.91-73.91-73.91zM256 38.84c-49.012 0-88.886 39.874-88.886 88.887 0 33.245 18.349 62.28 45.447 77.524 12.853 7.23 27.671 11.362 43.439 11.362s30.586-4.132 43.439-11.362c27.099-15.244 45.447-44.28 45.447-77.524 0-49.012-39.874-88.887-88.886-88.887zM99.918 121.689c-36.655 0-66.475 29.82-66.475 66.475 0 36.655 29.82 66.475 66.475 66.475a66.095 66.095 0 0 0 26.195-5.388c13.906-5.987 25.372-16.585 32.467-29.86a66.05 66.05 0 0 0 7.813-31.227c0-36.654-29.82-66.475-66.475-66.475zM412.082 121.689c-36.655 0-66.475 29.82-66.475 66.475a66.045 66.045 0 0 0 7.813 31.227c7.095 13.276 18.561 23.874 32.467 29.86a66.095 66.095 0 0 0 26.195 5.388c36.655 0 66.475-29.82 66.475-66.475 0-36.655-29.82-66.475-66.475-66.475z" fill="#ffffff" opacity="1" data-original="#000000" class=""></path>
    </g>
</svg>

================
File: app/templates/components/svg/logo.html
================
<div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="512" x="0" y="0" viewBox="0 0 96 96" style="enable-background:new 0 0 512 512" xml:space="preserve" fill-rule="evenodd" class=""><g><circle cx="48" cy="48" r="46" fill="#e5e5e5" opacity="1" data-original="#e5e5e5" class=""></circle><g fill="#cb6d45"><path d="M46.237 34.95a2.999 2.999 0 0 1 3.526 0l11.543 8.386a3.002 3.002 0 0 1 1.09 3.354l-4.409 13.569a3 3 0 0 1-2.853 2.073H40.866a3 3 0 0 1-2.853-2.073L33.604 46.69a3.002 3.002 0 0 1 1.09-3.354l11.543-8.386zM84.92 75.43a46.178 46.178 0 0 1-20.125 15.402l4.095-13.136a3 3 0 0 1 2.828-2.107l13.202-.159zm-60.638.159a3 3 0 0 1 2.828 2.107l4.095 13.136A46.182 46.182 0 0 1 11.08 75.43l13.202.159zM83.308 18.527a45.806 45.806 0 0 1 10.303 23.475L83.173 37.18a3 3 0 0 1-1.721-3.079l1.856-15.574zM14.454 34.101a3 3 0 0 1-1.721 3.079L2.395 41.955A45.808 45.808 0 0 1 12.61 18.626l1.844 15.475zM32.861 4.553C37.601 2.899 42.696 2 48 2s10.399.899 15.139 2.553l-13.376 9.718a2.999 2.999 0 0 1-3.526 0L32.861 4.553z" fill="#cb6d45" opacity="1" data-original="#cb6d45" class=""></path></g><path d="M24.282 10.349A44.27 44.27 0 0 1 48 3.5c24.56 0 44.5 19.94 44.5 44.5S72.56 92.5 48 92.5 3.5 72.56 3.5 48c0-13.904 6.391-26.327 16.393-34.49a1.501 1.501 0 0 0-1.897-2.325C7.32 19.898.5 33.159.5 48 .5 74.216 21.784 95.5 48 95.5S95.5 74.216 95.5 48 74.216.5 48 .5a47.258 47.258 0 0 0-25.32 7.313 1.5 1.5 0 0 0 1.602 2.536z" fill="#000000" opacity="1" data-original="#000000" class=""></path><path d="m33.556 43.253-13.709-6.284a1.5 1.5 0 0 0-1.25 2.727l13.709 6.284a1.5 1.5 0 0 0 1.25-2.727zM63.697 45.979l18.125-8.351a1.501 1.501 0 0 0-1.255-2.725l-18.126 8.351a1.501 1.501 0 0 0 1.256 2.725zM49.5 33.668V15.553a1.5 1.5 0 0 0-3 0v18.115a1.5 1.5 0 0 0 3 0zM37.583 61.316 25.358 74.599a1.499 1.499 0 1 0 2.207 2.032L39.79 63.347a1.5 1.5 0 1 0-2.207-2.031zM56.21 63.347l12.225 13.284a1.5 1.5 0 0 0 2.207-2.032L58.417 61.316a1.5 1.5 0 1 0-2.207 2.031z" fill="#000000" opacity="1" data-original="#000000" class=""></path><path d="m45.355 33.736-11.542 8.386a4.498 4.498 0 0 0-1.635 5.031l4.409 13.569a4.5 4.5 0 0 0 4.279 3.11h14.268a4.5 4.5 0 0 0 4.279-3.11l4.409-13.569a4.498 4.498 0 0 0-1.635-5.031l-11.542-8.386a4.5 4.5 0 0 0-5.29 0zm1.763 2.427a1.5 1.5 0 0 1 1.764 0l11.542 8.386a1.5 1.5 0 0 1 .545 1.677L56.56 59.795a1.5 1.5 0 0 1-1.426 1.037H40.866a1.5 1.5 0 0 1-1.426-1.037l-4.409-13.569a1.5 1.5 0 0 1 .545-1.677zM11.062 76.93l13.202.158a1.5 1.5 0 0 1 1.414 1.054l4.095 13.137a1.501 1.501 0 0 0 2.864-.893l-4.095-13.137a4.5 4.5 0 0 0-4.242-3.16l-13.202-.159a1.501 1.501 0 0 0-.036 3zm55.165 14.349 4.095-13.137a1.5 1.5 0 0 1 1.414-1.054l13.202-.158a1.501 1.501 0 0 0-.036-3l-13.202.159a4.5 4.5 0 0 0-4.242 3.16l-4.095 13.137a1.501 1.501 0 0 0 2.864.893zM94.241 40.64l-10.439-4.822a1.5 1.5 0 0 1-.86-1.539l1.855-15.575a1.5 1.5 0 1 0-2.979-.354l-1.855 15.574a4.498 4.498 0 0 0 2.581 4.617l10.438 4.822a1.501 1.501 0 0 0 1.259-2.723zM11.121 18.803l1.844 15.476a1.502 1.502 0 0 1-.861 1.539L1.766 40.594a1.5 1.5 0 1 0 1.258 2.723l10.338-4.776a4.498 4.498 0 0 0 2.581-4.617L14.1 18.448a1.5 1.5 0 0 0-2.979.355zM62.257 3.34l-13.375 9.718a1.5 1.5 0 0 1-1.764 0L33.743 3.34a1.501 1.501 0 0 0-1.764 2.427l13.376 9.718a4.5 4.5 0 0 0 5.29 0l13.376-9.718a1.501 1.501 0 0 0-1.764-2.427z" fill="#000000" opacity="1" data-original="#000000" class=""></path></g></svg>
</div>

================
File: app/templates/components/audio_toggle.html
================
<div class="audio-container">
    <h3 class="audio-title">Control de Audio</h3>
    
    <!-- Audio oculto -->
    <audio id="{id_prefix}Player">
        <source src="media/audio/canal+ copia.m4a" type="audio/mp4">
        Tu navegador no soporta el elemento de audio.
    </audio>
    
    <!-- Control personalizado -->
    <div>
        <input type="checkbox" id="{id_prefix}CheckboxInput" />
        <label for="{id_prefix}CheckboxInput" class="toggleSwitch">
            <div class="speaker">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.0" viewBox="0 0 75 75">
                    <path
                        d="M39.389,13.769 L22.235,28.606 L6,28.606 L6,47.699 L21.989,47.699 L39.389,62.75 L39.389,13.769z"
                        style="stroke:#fff;stroke-width:5;stroke-linejoin:round;fill:#fff;"
                    ></path>
                    <path
                        d="M48,27.6a19.5,19.5 0 0 1 0,21.4M55.1,20.5a30,30 0 0 1 0,35.6M61.6,14a38.8,38.8 0 0 1 0,48.6"
                        style="fill:none;stroke:#fff;stroke-width:5;stroke-linecap:round"
                    ></path>
                </svg>
            </div>
            <div class="mute-speaker">
                <svg version="1.0" viewBox="0 0 75 75" stroke="#fff" stroke-width="5">
                    <path
                        d="m39,14-17,15H6V48H22l17,15z"
                        fill="#fff"
                        stroke-linejoin="round"
                    ></path>
                    <path
                        d="m49,26 20,24m0-24-20,24"
                        fill="#fff"
                        stroke-linecap="round"
                    ></path>
                </svg>
            </div>
        </label>
    </div>
    
    <div class="audio-status" id="{audio}AudioStatus">Audio desactivado</div>
</div>

================
File: app/templates/partidos/crear_partidos.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %} {# Si usas crispy-forms #}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4 bg-dark">
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h4 class="text-white mb-2">{{ titulo_pagina|default:"Crear un nuevo partido" }}</h4>
                            <p class="text-white-50 mb-0">Completa el formulario para organizar un partido y encontrar jugadores</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card border-0 shadow-sm" style="background-color: #6f7173; border-radius: 15px;">
                        <div class="card-body p-4 p-md-5">
                            <form method="post" enctype="multipart/form-data"> 
                                {% csrf_token %}
                                
                                {{ form | crispy }}
                                 
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'buscar_partidos' %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success btn-lg">
                                        <i class="fas fa-check-circle me-2"></i>Crear Partido
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sección de Consejos -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h5 class="text-white mb-3">Consejos para organizar un buen partido</h5>
                            <div class="row g-4">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/partidos/registrar_resultado.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-6 col-md-8">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color: white;">
                        <div class="card-header bg-transparent border-bottom border-secondary py-3">
                            <h4 class="mb-0 text-center">{{ titulo_pagina }}</h4>
                        </div>
                        <div class="card-body p-4">
                            <p class="text-white-50">Estás registrando el resultado para el partido del <strong>{{ partido.fecha|date:"d/m/Y \a \l\a\s H:i" }}</strong> en <strong>{{ partido.cancha.nombre_cancha }}</strong>.</p>
                            
                            {% if partido.equipo_local and partido.equipo_visitante %}
                                <p class="text-center h5 mb-3">
                                    {{ partido.equipo_local.nombre_equipo|default:"Equipo Local" }} vs {{ partido.equipo_visitante.nombre_equipo|default:"Equipo Visitante" }}
                                </p>
                            {% else %}
                                <p class="text-center text-warning small">
                                    Nota: Los equipos no están asignados a este partido. Las calificaciones ELO no se actualizarán.
                                </p>
                            {% endif %}

                            <form method="post">
                                {% csrf_token %}
                                {{ form|crispy }}
                                <div class="d-flex justify-content-end mt-4">
                                    <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-save me-2"></i>Guardar Resultado
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/perfil/perfil.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<!-- Dashboard Layout -->
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark"> 
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Profile Content -->
        <div class="container-fluid p-4">
            <!-- Profile header/banner -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-0">
                            <!-- Cover image -->
                            <div class="position-relative">
                                <img src="{% if user.banner_perfil %}{{ user.banner_perfil.url }}{% else %}{% static 'images/banner_default.png' %}{% endif %}" class="w-100" style="height: 200px; object-fit: cover; border-top-left-radius: 15px; border-top-right-radius: 15px;" alt="Banner del perfil">
                                <!-- Profile image -->
                                <div class="position-absolute" style="bottom: -50px; left: 30px;">
                                    <div class="position-relative">
                                        <img src="{% if user.imagen_perfil %}{{ user.imagen_perfil.url }}{% else %}{% static '/images/avatar_default.png' %}{% endif %}" class="rounded-circle border border-4 border-dark" width="100" height="100" alt="Avatar de {{ user.nombre }}">
                                    </div>
                                </div>
                            </div>
                            <!-- Profile info -->
                            <div class="p-4 mt-5">
                                <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                    <div>
                                        <h3 class="text-white mb-1">{{ user.nombre|default:"Nombre no especificado" }}</h3>
                                        <p class="text-success mb-0">
                                            {% if user.posicion %}
                                                <i class="fas fa-futbol me-2"></i>{{ user.get_posicion_display }} | 
                                            {% endif %}
                                            {% if user.ubicacion %}
                                                <i class="fas fa-map-marker-alt me-2"></i>{{ user.ubicacion }} |
                                            {% endif %}
                                            <i class="fas fa-star me-2"></i>ELO: {{ user.calificacion|floatformat:0 }}
                                        </p>
                                    </div>
                                    <div class="mt-3 mt-md-0">
                                        <a href="{% url 'update_profile' %}" class="btn btn-outline-light">
                                            <i class="fas fa-edit me-2"></i>Editar perfil
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile content tabs and details -->
            <div class="row">
                <div class="col-12">
                    <!-- Tabs navigation -->
                    <ul class="nav nav-tabs mb-4 border-0 gap-2" id="profileTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active text-white" style="background-color: #2d3748; border: none;" id="info-tab" data-bs-toggle="tab" data-bs-target="#info-tab-pane" type="button" role="tab" aria-controls="info-tab-pane" aria-selected="true">
                                <i class="fas fa-info-circle me-2"></i>Información
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link text-white" style="background-color: #2d3748; border: none;" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats-tab-pane" type="button" role="tab" aria-controls="stats-tab-pane" aria-selected="false">
                                <i class="fas fa-chart-bar me-2"></i>Estadísticas
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link text-white" style="background-color: #2d3748; border: none;" id="elo-history-tab" data-bs-toggle="tab" data-bs-target="#elo-history-tab-pane" type="button" role="tab" aria-controls="elo-history-tab-pane" aria-selected="false">
                                <i class="fas fa-trophy me-2"></i>Historial ELO
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link text-white" style="background-color: #2d3748; border: none;" id="teams-tab" data-bs-toggle="tab" data-bs-target="#teams-tab-pane" type="button" role="tab" aria-controls="teams-tab-pane" aria-selected="false">
                                <i class="fas fa-users me-2"></i>Mis Equipos
                            </button>
                        </li>
                    </ul>

                    <!-- Tab content -->
                    <div class="tab-content" id="profileTabsContent">
                        <!-- Info Tab -->
                        <div class="tab-pane fade show active" id="info-tab-pane" role="tabpanel" aria-labelledby="info-tab" tabindex="0">
                            <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                                    <h5 class="text-white mb-0">Información personal</h5>
                                    <a href="{% url 'update_profile' %}" class="btn btn-sm btn-dark text-success">
                                        <i class="fas fa-edit me-1"></i>Editar
                                    </a>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush" style="background-color: transparent;">
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Nombre</span>
                                            <span class="text-white">{{ user.nombre|default:"No especificado" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Email</span>
                                            <span class="text-white">{{ user.username }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Fecha de nacimiento</span>
                                            <span class="text-white">{{ user.fecha_nacimiento|date:"d/m/Y"|default:"No especificada" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Género</span>
                                            <span class="text-white">{{ user.get_genero_display|default:"No especificado" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Posición Preferida</span>
                                            <span class="text-white">{{ user.get_posicion_display|default:"No especificada" }}</span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                            <span class="text-white-50">Ubicación</span>
                                            <span class="text-white">{{ user.ubicacion|default:"No especificada" }}</span>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Stats Tab -->
                        <div class="tab-pane fade" id="stats-tab-pane" role="tabpanel" aria-labelledby="stats-tab" tabindex="0">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-header bg-transparent border-0 py-3">
                                    <h5 class="text-white mb-0">Mis Estadísticas</h5>
                                </div>
                                <div class="card-body p-0">
                                    <div class="row g-0 text-center">
                                        <div class="col-md-3 col-6 p-3 border-end border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-success mb-1">{{ user.calificacion|floatformat:0 }}</h4>
                                            <p class="text-white-50 mb-0">ELO Actual</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-end border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-success mb-1">{{ user.partidos_jugados }}</h4>
                                            <p class="text-white-50 mb-0">Partidos Jugados</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-end border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-success mb-1">{{ user.victorias }}</h4>
                                            <p class="text-white-50 mb-0">Victorias</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-bottom" style="border-color: #3f495e !important;">
                                            <h4 class="text-warning mb-1">{{ user.empates }}</h4>
                                            <p class="text-white-50 mb-0">Empates</p>
                                        </div>
                                        <div class="col-md-3 col-6 p-3 border-end" style="border-color: #3f495e !important;">
                                            <h4 class="text-danger mb-1">{{ user.derrotas }}</h4>
                                            <p class="text-white-50 mb-0">Derrotas</p>
                                        </div>
                                        {% with total_partidos=user.partidos_jugados %}
                                            {% if total_partidos > 0 %}
                                                <div class="col-md-3 col-6 p-3 border-end" style="border-color: #3f495e !important;">
                                                    <h4 class="text-info mb-1">{{ user.victorias}}</h4>
                                                    <p class="text-white-50 mb-0">% Victorias</p>
                                                </div>
                                            {% else %}
                                                <div class="col-md-3 col-6 p-3 border-end" style="border-color: #3f495e !important;">
                                                    <h4 class="text-info mb-1">N/A</h4>
                                                    <p class="text-white-50 mb-0">% Victorias</p>
                                                </div>
                                            {% endif %}
                                        {% endwith %}
                                        {# Puedes añadir más estadísticas aquí #}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ELO History Tab (placeholder) -->
                        <div class="tab-pane fade" id="elo-history-tab-pane" role="tabpanel" aria-labelledby="elo-history-tab" tabindex="0">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-body p-4">
                                    <h5 class="text-white mb-3">Historial de Calificación (ELO)</h5>
                                    <p class="text-white-50">Próximamente: Gráfico de evolución de tu ELO y listado de cambios por partido.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Teams Tab (placeholder) -->
                        <div class="tab-pane fade" id="teams-tab-pane" role="tabpanel" aria-labelledby="teams-tab" tabindex="0">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-body p-4">
                                    <h5 class="text-white mb-3">Mis Equipos</h5>
                                    <p class="text-white-50">Próximamente: Listado de equipos a los que perteneces.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    //SE HARÁ DESDE EL BACKEND EN SU MOMENTO
    document.addEventListener('DOMContentLoaded', function() {
        const fechaNacimientoStr = "{{ user.fecha_nacimiento|date:'Y-m-d' }}";
        if (fechaNacimientoStr) {
            const fechaNacimiento = new Date(fechaNacimientoStr);
            const hoy = new Date();
            let edad = hoy.getFullYear() - fechaNacimiento.getFullYear();
            const m = hoy.getMonth() - fechaNacimiento.getMonth();
            if (m < 0 || (m === 0 && hoy.getDate() < fechaNacimiento.getDate())) {
                edad--;
            }
            
        }
    });
</script>
{% endblock %}

================
File: app/templates/perfil/update_profile.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %} 

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-md-10">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h4 class="text-white mb-0">{{ titulo_pagina|default:"Editar Perfil" }}</h4>
                        </div>
                        <div class="card-body p-4">
                            {% if messages %}
                                {% for message in messages %}
                                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                        {{ message }}
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                {% endfor %}
                            {% endif %}

                            <form method="post" enctype="multipart/form-data"> {# enctype es crucial para subir archivos #}
                                {% csrf_token %}
                                
                                {{ form.non_field_errors }}

                                <div class="mb-3">
                                    <label for="{{ form.nombre.id_for_label }}" class="form-label text-white">{{ form.nombre.label }}</label>
                                    {{ form.nombre }}
                                    {% if form.nombre.help_text %}
                                        <small class="form-text text-white-50">{{ form.nombre.help_text }}</small>
                                    {% endif %}
                                    {% for error in form.nombre.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.fecha_nacimiento.id_for_label }}" class="form-label text-white">{{ form.fecha_nacimiento.label }}</label>
                                        {{ form.fecha_nacimiento }}
                                        {% for error in form.fecha_nacimiento.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.genero.id_for_label }}" class="form-label text-white">{{ form.genero.label }}</label>
                                        {{ form.genero }}
                                        {% for error in form.genero.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.posicion.id_for_label }}" class="form-label text-white">{{ form.posicion.label }}</label>
                                        {{ form.posicion }}
                                        {% for error in form.posicion.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.ubicacion.id_for_label }}" class="form-label text-white">{{ form.ubicacion.label }}</label>
                                        {{ form.ubicacion }}
                                        {% for error in form.ubicacion.errors %}
                                            <div class="invalid-feedback d-block">{{ error }}</div>
                                        {% endfor %}
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.imagen_perfil.id_for_label }}" class="form-label text-white">{{ form.imagen_perfil.label }}</label>
                                    {% if user.imagen_perfil %}
                                        <p class="text-white-50">Actual: <a href="{{ user.imagen_perfil.url }}" target="_blank">{{ user.imagen_perfil.name|truncatechars:30 }}</a></p>
                                    {% endif %}
                                    {{ form.imagen_perfil }}
                                    {% for error in form.imagen_perfil.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>

                                <div class="mb-4">
                                    <label for="{{ form.banner_perfil.id_for_label }}" class="form-label text-white">{{ form.banner_perfil.label }}</label>
                                     {% if user.banner_perfil %}
                                        <p class="text-white-50">Actual: <a href="{{ user.banner_perfil.url }}" target="_blank">{{ user.banner_perfil.name|truncatechars:30 }}</a></p>
                                    {% endif %}
                                    {{ form.banner_perfil }}
                                    {% for error in form.banner_perfil.errors %}
                                        <div class="invalid-feedback d-block">{{ error }}</div>
                                    {% endfor %}
                                </div>

                                   
                                
                                <div class="d-flex justify-content-end">
                                    <a href="{% url 'perfil' %}" class="btn btn-outline-light me-2">Cancelar</a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-save me-2"></i>Guardar Cambios
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/registration/logged_out.html
================
{% extendsn 'basesite.html' %}
    {% block base %}
    
    <h1>Sesión cerrada</h1>
    <p>Has cerrado sesión correctamente. <a href="{% url 'login' %}">Iniciar sesión de nuevo</a>.</p>
    {% endblock %}

================
File: app/templates/base.html
================
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TFG</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    {% block base %}

    {% endblock %}
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

================
File: app/templates/canchas.html
================
{% extends 'base.html' %}
{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!-- Sidebar Navigation -->
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Venues Section -->
        <div class="container-fluid p-4 bg-dark">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                <div>
                                    <h4 class="text-white mb-1">Canchas disponibles</h4>
                                    <p class="text-white-50 mb-md-0">Encuentra las mejores canchas para tus partidos</p>
                                </div>
                                <div class="d-flex gap-2 mt-3 mt-md-0">
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="Buscar canchas...">
                                        <button class="btn btn-success" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addVenueModal">
                                        <i class="fas fa-plus-circle me-md-2"></i><span class="d-none d-md-inline">Añadir cancha</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- View Toggle and Filters -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-3">
                            <div class="d-flex justify-content-between align-items-center flex-wrap">
                                <div class="d-flex flex-wrap gap-2 mb-3 mb-md-0">
                                    <button class="btn btn-success" id="allVenuesBtn">Todas</button>
                                    <button class="btn btn-dark" id="verifiedVenuesBtn">Verificadas</button>
                                    <button class="btn btn-dark" id="communityVenuesBtn">Comunitarias</button>
                                    <button class="btn btn-outline-light" data-bs-toggle="collapse" data-bs-target="#venueFilters">
                                        <i class="fas fa-filter me-2"></i>Filtros
                                    </button>
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-dark active" id="listViewBtn" title="Vista de lista">
                                        <i class="fas fa-list-ul"></i>
                                    </button>
                                    <button class="btn btn-dark" id="mapViewBtn" title="Vista de mapa">
                                        <i class="fas fa-map-marked-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filters (Collapsible) -->
            <div class="collapse mb-4" id="venueFilters">
                <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                    <div class="card-body p-4">
                        <div class="row g-3">
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Superficie</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todas las superficies</option>
                                    <option>Césped natural</option>
                                    <option>Césped artificial</option>
                                    <option>Fútbol sala</option>
                                    <option>Tierra</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Tamaño</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todos los tamaños</option>
                                    <option>Fútbol 5</option>
                                    <option>Fútbol 7</option>
                                    <option>Fútbol 11</option>
                                    <option>Fútbol sala</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Servicios</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todos</option>
                                    <option>Con vestuarios</option>
                                    <option>Con parking</option>
                                    <option>Con iluminación</option>
                                    <option>Con cafetería</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Distancia</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Cualquier distancia</option>
                                    <option>Menos de 2 km</option>
                                    <option>Menos de 5 km</option>
                                    <option>Menos de 10 km</option>
                                    <option>Menos de 20 km</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Precio</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Cualquier precio</option>
                                    <option>Gratuito</option>
                                    <option>Hasta 30€/h</option>
                                    <option>Hasta 60€/h</option>
                                    <option>Hasta 100€/h</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Disponibilidad</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Cualquier disponibilidad</option>
                                    <option>Disponible hoy</option>
                                    <option>Disponible este fin de semana</option>
                                    <option>Disponible entre semana</option>
                                    <option>Disponible por la noche</option>
                                </select>
                            </div>
                            <div class="col-md-4 col-lg-3">
                                <label class="form-label text-white">Valoración</label>
                                <select class="form-select bg-dark text-white border-secondary">
                                    <option selected>Todas las valoraciones</option>
                                    <option>4 estrellas o más</option>
                                    <option>3 estrellas o más</option>
                                    <option>2 estrellas o más</option>
                                </select>
                            </div>
                            <div class="col-12 text-end mt-3">
                                <button class="btn btn-outline-light me-2">Limpiar filtros</button>
                                <button class="btn btn-success">Aplicar filtros</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- List View (Active by default) -->
            <div id="venueListView">
                <!-- Verified Venues Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h5 class="text-white mb-3">
                            <i class="fas fa-check-circle text-success me-2"></i>Canchas verificadas
                            <span class="badge bg-success ms-2">Premium</span>
                        </h5>
                        <p class="text-white-50 mb-4">Instalaciones oficiales con acuerdos de colaboración. Reserva garantizada y servicios verificados.</p>
                    </div>
                </div>

                <div class="row g-4 mb-5">
                    <!-- Verified Venue Card 1 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Campo Municipal Norte">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-success d-flex align-items-center">
                                        <i class="fas fa-check-circle me-1"></i>Verificada
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>1.2 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Campo Municipal Norte</h5>
                                </div>
                            </div>

                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                    </div>
                                    <span class="text-white">4.5</span>
                                    <span class="text-white-50 ms-2">(32 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-success me-3"></i>
                                    <span class="text-white">Av. del Deporte, 123, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-success me-3"></i>
                                    <span class="text-white">Césped artificial</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-success me-3"></i>
                                    <span class="text-white">Fútbol 7 y 11</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-success me-3"></i>
                                    <span class="text-white">Desde 60€/hora</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-lightbulb me-1"></i>Iluminación</span>
                                    <span class="badge bg-dark"><i class="fas fa-utensils me-1"></i>Cafetería</span>
                                </div>
                                
                                <!-- Special Offer -->
                                <div class="alert alert-success bg-success bg-opacity-10 border-success d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-tag me-2 text-success"></i>
                                    <div class="text-success">10% de descuento para usuarios de FútbolConnect</div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                    <a href="#" class="btn btn-success">
                                        <i class="fas fa-calendar-alt me-2"></i>Reservar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Verified Venue Card 2 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Estadio Central">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-success d-flex align-items-center">
                                        <i class="fas fa-check-circle me-1"></i>Verificada
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>3.5 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Estadio Central</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <span class="text-white">5.0</span>
                                    <span class="text-white-50 ms-2">(48 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-success me-3"></i>
                                    <span class="text-white">Calle Central, 45, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-success me-3"></i>
                                    <span class="text-white">Césped natural</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-success me-3"></i>
                                    <span class="text-white">Fútbol 11</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-success me-3"></i>
                                    <span class="text-white">Desde 90€/hora</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-lightbulb me-1"></i>Iluminación</span>
                                    <span class="badge bg-dark"><i class="fas fa-utensils me-1"></i>Cafetería</span>
                                    <span class="badge bg-dark"><i class="fas fa-first-aid me-1"></i>Primeros auxilios</span>
                                </div>
                                
                                <!-- Special Offer -->
                                <div class="alert alert-success bg-success bg-opacity-10 border-success d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-tag me-2 text-success"></i>
                                    <div class="text-success">15% de descuento en horario matutino</div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                    <a href="#" class="btn btn-success">
                                        <i class="fas fa-calendar-alt me-2"></i>Reservar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Verified Venue Card 3 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Polideportivo Sur">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-success d-flex align-items-center">
                                        <i class="fas fa-check-circle me-1"></i>Verificada
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>4.1 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Polideportivo Sur</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">4.0</span>
                                    <span class="text-white-50 ms-2">(27 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-success me-3"></i>
                                    <span class="text-white">Paseo Sur, 78, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-success me-3"></i>
                                    <span class="text-white">Fútbol sala (interior)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-success me-3"></i>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-success me-3"></i>
                                    <span class="text-white">Desde 40€/hora</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-utensils me-1"></i>Cafetería</span>
                                </div>
                                
                                <!-- Special Offer -->
                                <div class="alert alert-success bg-success bg-opacity-10 border-success d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-tag me-2 text-success"></i>
                                    <div class="text-success">Oferta 2x1 en horario de mañana entre semana</div>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                    <a href="#" class="btn btn-success">
                                        <i class="fas fa-calendar-alt me-2"></i>Reservar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Venues Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h5 class="text-white mb-3">
                            <i class="fas fa-users text-info me-2"></i>Canchas comunitarias
                            <span class="badge bg-info text-dark ms-2">Añadidas por usuarios</span>
                        </h5>
                        <p class="text-white-50 mb-4">Canchas añadidas por la comunidad. La información puede variar y se recomienda confirmar los detalles antes de acudir.</p>
                    </div>
                </div>
                
                <div class="row g-4 mb-5">
                    <!-- Community Venue Card 1 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Cancha El Barrio">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-info text-dark d-flex align-items-center">
                                        <i class="fas fa-users me-1"></i>Comunitaria
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>0.7 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Cancha "El Barrio"</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">3.5</span>
                                    <span class="text-white-50 ms-2">(12 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-info me-3"></i>
                                    <span class="text-white">Calle Vecina, 15, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-info me-3"></i>
                                    <span class="text-white">Tierra</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-info me-3"></i>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-info me-3"></i>
                                    <span class="text-white">Gratuito</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking cercano</span>
                                </div>
                                
                                <!-- Warning Notice -->
                                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2 text-warning"></i>
                                    <div class="text-warning">Cancha pública, disponibilidad no garantizada</div>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <small class="text-white-50">
                                            <i class="fas fa-user me-1"></i>Añadida por: Miguel S.
                                        </small>
                                    </div>
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Community Venue Card 2 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Campo San Jorge">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-info text-dark d-flex align-items-center">
                                        <i class="fas fa-users me-1"></i>Comunitaria
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>2.3 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Campo San Jorge</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">4.0</span>
                                    <span class="text-white-50 ms-2">(8 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-info me-3"></i>
                                    <span class="text-white">Calle San Jorge, 34, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-info me-3"></i>
                                    <span class="text-white">Césped artificial</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-info me-3"></i>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-info me-3"></i>
                                    <span class="text-white">25€/hora (aprox.)</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-shower me-1"></i>Vestuarios</span>
                                    <span class="badge bg-dark"><i class="fas fa-lightbulb me-1"></i>Iluminación</span>
                                </div>
                                
                                <!-- Warning Notice -->
                                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2 text-warning"></i>
                                    <div class="text-warning">Reserva por teléfono, no integrada en la plataforma</div>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <small class="text-white-50">
                                            <i class="fas fa-user me-1"></i>Añadida por: Laura M.
                                        </small>
                                    </div>
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Community Venue Card 3 -->
                    <div class="col-md-6 col-xl-4">
                        <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                            <div class="position-relative">
                                <img src="https://via.placeholder.com/400x200" class="card-img-top" alt="Pista Municipal Este">
                                <div class="position-absolute top-0 start-0 m-3">
                                    <span class="badge bg-info text-dark d-flex align-items-center">
                                        <i class="fas fa-users me-1"></i>Comunitaria
                                    </span>
                                </div>
                                <div class="position-absolute top-0 end-0 m-3">
                                    <span class="badge bg-dark">
                                        <i class="fas fa-map-marker-alt me-1"></i>5.6 km
                                    </span>
                                </div>
                                <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                    <h5 class="text-white mb-0">Pista Municipal Este</h5>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="text-warning me-2">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <span class="text-white">3.0</span>
                                    <span class="text-white-50 ms-2">(5 valoraciones)</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-map-marker-alt text-info me-3"></i>
                                    <span class="text-white">Parque Este, s/n, Madrid</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-leaf text-info me-3"></i>
                                    <span class="text-white">Cemento</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-info me-3"></i>
                                    <span class="text-white">Fútbol sala</span>
                                </div>
                                
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-euro-sign text-info me-3"></i>
                                    <span class="text-white">Gratuito</span>
                                </div>
                                
                                <!-- Amenities -->
                                <div class="d-flex flex-wrap gap-2 mb-3">
                                    <span class="badge bg-dark"><i class="fas fa-parking me-1"></i>Parking</span>
                                </div>
                                
                                <!-- Warning Notice -->
                                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning d-flex align-items-center mb-3" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2 text-warning"></i>
                                    <div class="text-warning">Pista pública, no se puede reservar</div>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <small class="text-white-50">
                                            <i class="fas fa-user me-1"></i>Añadida por: Carlos R.
                                        </small>
                                    </div>
                                    <a href="#" class="btn btn-outline-light">
                                        <i class="fas fa-info-circle me-2"></i>Detalles
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Add More Button -->
                <div class="text-center mb-5">
                    <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#addVenueModal">
                        <i class="fas fa-plus-circle me-2"></i>Añadir nueva cancha
                    </button>
                </div>
                
                <!-- Map View (Hidden by default) -->
                <div id="venueMapView" style="display: none;">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="card-body p-0">
                            <div style="height: 600px; background-color: #1a202c; position: relative;">
                                <!-- This would be replaced with the actual map implementation -->
                                <div class="d-flex justify-content-center align-items-center h-100">
                                    <div class="text-center">
                                        <i class="fas fa-map-marked-alt text-success mb-3" style="font-size: 3rem;"></i>
                                        <h5 class="text-white">Mapa de canchas</h5>
                                        <p class="text-white-50">Aquí se cargaría el mapa interactivo con todas las canchas</p>
                                    </div>
                                </div>
                                
                                <!-- Sample controls that would appear over the map -->
                                <div class="position-absolute" style="top: 10px; right: 10px;">
                                    <div class="btn-group-vertical">
                                        <button class="btn btn-dark" title="Acercar">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <button class="btn btn-dark" title="Alejar">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="position-absolute" style="top: 10px; left: 10px;">
                                    <div class="btn-group">
                                        <button class="btn btn-success active" title="Mostrar canchas verificadas">
                                            <i class="fas fa-check-circle me-md-2"></i><span class="d-none d-md-inline">Verificadas</span>
                                        </button>
                                        <button class="btn btn-info" title="Mostrar canchas comunitarias">
                                            <i class="fas fa-users me-md-2"></i><span class="d-none d-md-inline">Comunitarias</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="position-absolute" style="bottom: 20px; right: 20px;">
                                    <button class="btn btn-success" title="Mi ubicación">
                                        <i class="fas fa-location-arrow"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
                </div>
                </div>
                
            <!-- MODAL AÑADIR CANCHA -->
             <!-- Modal añadir cancha -->
<div class="modal fade" id="addVenueModal" tabindex="-1" aria-labelledby="addVenueModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0" style="background-color: #2d3748; border-radius: 15px;">
            <div class="modal-header border-bottom border-secondary">
                <h5 class="modal-title text-white" id="addVenueModalLabel">Añadir nueva cancha comunitaria</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Tipo de usuario -->
                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning mb-4" role="alert">
                    <div class="d-flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-warning me-2"></i>
                        </div>
                        <div>
                            <h6 class="text-warning mb-1">¿Eres dueño o administrador de una cancha?</h6>
                            <p class="mb-2 text-warning">Este formulario es solo para usuarios que quieren compartir canchas que conocen con la comunidad. Las canchas añadidas aquí serán "no verificadas".</p>
                            <a href="/registrar-cancha-verificada" class="btn btn-warning btn-sm">
                                <i class="fas fa-building me-2"></i>Registrar mi cancha como negocio
                            </a>
                        </div>
                    </div>
                </div>
                
                <form>
                    <div class="alert alert-info bg-info bg-opacity-10 border-info mb-4" role="alert">
                        <div class="d-flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-info-circle text-info me-2"></i>
                            </div>
                            <div>
                                <h6 class="text-info mb-1">Añadir una cancha a la comunidad</h6>
                                <p class="mb-0 text-info">Comparte tus canchas favoritas con otros jugadores. La información será revisada por nuestro equipo.</p>
                            </div>
                        </div>
                    </div>
                
                    <!-- Basic Information -->
                    <h6 class="text-white mb-3">Información básica</h6>
                    
                    <div class="mb-3">
                        <label for="venueName" class="form-label text-white">Nombre de la cancha <span class="text-danger">*</span></label>
                        <input type="text" class="form-control bg-dark text-white border-secondary" id="venueName" placeholder="Ej: Campo San Jorge" required>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="venueAddress" class="form-label text-white">Dirección <span class="text-danger">*</span></label>
                            <input type="text" class="form-control bg-dark text-white border-secondary" id="venueAddress" placeholder="Dirección completa" required>
                        </div>
                        <div class="col-md-6">
                            <label for="venueCity" class="form-label text-white">Ciudad <span class="text-danger">*</span></label>
                            <input type="text" class="form-control bg-dark text-white border-secondary" id="venueCity" placeholder="Ej: Madrid" required>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label text-white">Ubicación en el mapa <span class="text-danger">*</span></label>
                        <div style="height: 200px; background-color: #1a202c; position: relative; border-radius: 10px; overflow: hidden; margin-bottom: 15px;">
                            <!-- This would be replaced with the actual map implementation -->
                            <div class="d-flex justify-content-center align-items-center h-100">
                                <div class="text-center">
                                    <i class="fas fa-map-marked-alt text-info mb-3" style="font-size: 2rem;"></i>
                                    <p class="text-white-50">Haz clic en el mapa para seleccionar la ubicación exacta</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Venue Details -->
                    <h6 class="text-white mb-3 mt-4">Detalles de la cancha</h6>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="venueType" class="form-label text-white">Tipo de cancha <span class="text-danger">*</span></label>
                            <select class="form-select bg-dark text-white border-secondary" id="venueType" required>
                                <option value="" selected disabled>Seleccionar tipo</option>
                                <option value="football5">Fútbol 5</option>
                                <option value="football7">Fútbol 7</option>
                                <option value="football11">Fútbol 11</option>
                                <option value="futsal">Fútbol sala</option>
                                <option value="multi">Multiuso</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="venueSurface" class="form-label text-white">Superficie <span class="text-danger">*</span></label>
                            <select class="form-select bg-dark text-white border-secondary" id="venueSurface" required>
                                <option value="" selected disabled>Seleccionar superficie</option>
                                <option value="natural">Césped natural</option>
                                <option value="artificial">Césped artificial</option>
                                <option value="indoor">Fútbol sala (interior)</option>
                                <option value="dirt">Tierra</option>
                                <option value="concrete">Cemento</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="venuePrice" class="form-label text-white">Precio aproximado (por hora)</label>
                            <div class="input-group">
                                <span class="input-group-text bg-dark text-white border-secondary">€</span>
                                <input type="number" class="form-control bg-dark text-white border-secondary" id="venuePrice" placeholder="0.00" min="0">
                            </div>
                            <div class="form-text text-white-50">Deja en blanco si es gratuito</div>
                        </div>
                        <div class="col-md-6">
                            <label for="venueBooking" class="form-label text-white">Método de reserva</label>
                            <select class="form-select bg-dark text-white border-secondary" id="venueBooking">
                                <option value="" selected disabled>Seleccionar método</option>
                                <option value="none">No se puede reservar (libre acceso)</option>
                                <option value="phone">Por teléfono</option>
                                <option value="inperson">En persona</option>
                                <option value="web">Página web</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="venueContactContainer" class="mb-3 d-none">
                        <label for="venueContact" class="form-label text-white">Contacto para reservas</label>
                        <input type="text" class="form-control bg-dark text-white border-secondary" id="venueContact" placeholder="Ej: Número de teléfono o web">
                    </div>
                    
                    <!-- Amenities -->
                    <h6 class="text-white mb-3 mt-4">Instalaciones y servicios</h6>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueParking">
                                <label class="form-check-label text-white-50" for="venueParking">
                                    Parking disponible
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueShowers">
                                <label class="form-check-label text-white-50" for="venueShowers">
                                    Vestuarios/Duchas
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueLighting">
                                <label class="form-check-label text-white-50" for="venueLighting">
                                    Iluminación nocturna
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueCafeteria">
                                <label class="form-check-label text-white-50" for="venueCafeteria">
                                    Bar/Cafetería
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueEquipment">
                                <label class="form-check-label text-white-50" for="venueEquipment">
                                    Alquiler de equipamiento
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input bg-dark border-secondary" type="checkbox" id="venueFirstAid">
                                <label class="form-check-label text-white-50" for="venueFirstAid">
                                    Primeros auxilios
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional Info -->
                    <div class="mb-3">
                        <label for="venueDescription" class="form-label text-white">Descripción adicional</label>
                        <textarea class="form-control bg-dark text-white border-secondary" id="venueDescription" rows="3" placeholder="Información adicional, horarios, consejos, etc."></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="venuePhotos" class="form-label text-white">Fotos de la cancha</label>
                        <input type="file" class="form-control bg-dark text-white border-secondary" id="venuePhotos" multiple accept="image/*">
                        <div class="form-text text-white-50">Puedes subir hasta 5 fotos (máx. 5MB cada una)</div>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-top border-secondary">
                <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-info">
                    <i class="fas fa-plus-circle me-2"></i>Añadir cancha comunitaria
                </button>
            </div>
        </div>
    </div>
</div>
<!-- JavaScript for Toggle Views -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle between list and map views
        const listViewBtn = document.getElementById('listViewBtn');
        const mapViewBtn = document.getElementById('mapViewBtn');
        const listView = document.getElementById('venueListView');
        const mapView = document.getElementById('venueMapView');
        
        listViewBtn.addEventListener('click', function() {
            listView.style.display = 'block';
            mapView.style.display = 'none';
            listViewBtn.classList.add('active');
            mapViewBtn.classList.remove('active');
        });
        
        mapViewBtn.addEventListener('click', function() {
            listView.style.display = 'none';
            mapView.style.display = 'block';
            mapViewBtn.classList.add('active');
            listViewBtn.classList.remove('active');
        });
        
        // Toggle venue category filters
        const allBtn = document.getElementById('allVenuesBtn');
        const verifiedBtn = document.getElementById('verifiedVenuesBtn');
        const communityBtn = document.getElementById('communityVenuesBtn');
        
        allBtn.addEventListener('click', function() {
            allBtn.classList.add('btn-success');
            allBtn.classList.remove('btn-dark');
            verifiedBtn.classList.add('btn-dark');
            verifiedBtn.classList.remove('btn-success');
            communityBtn.classList.add('btn-dark');
            communityBtn.classList.remove('btn-success');
        });
        
        verifiedBtn.addEventListener('click', function() {
            verifiedBtn.classList.add('btn-success');
            verifiedBtn.classList.remove('btn-dark');
            allBtn.classList.add('btn-dark');
            allBtn.classList.remove('btn-success');
            communityBtn.classList.add('btn-dark');
            communityBtn.classList.remove('btn-success');
        });
        
        communityBtn.addEventListener('click', function() {
            communityBtn.classList.add('btn-success');
            communityBtn.classList.remove('btn-dark');
            allBtn.classList.add('btn-dark');
            allBtn.classList.remove('btn-success');
            verifiedBtn.classList.add('btn-dark');
            verifiedBtn.classList.remove('btn-success');
        });
        
        // Show/hide venue contact field based on booking method
        const bookingSelect = document.getElementById('venueBooking');
        const contactContainer = document.getElementById('venueContactContainer');
        
        bookingSelect.addEventListener('change', function() {
            if (this.value === 'none') {
                contactContainer.classList.add('d-none');
            } else {
                contactContainer.classList.remove('d-none');
            }
        });
    });
</script>
{% endblock %}

================
File: app/templates/estadisticas.html
================
{% extends 'base.html' %}
{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!-- Sidebar Navigation -->
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Statistics Content -->
        <div class="container-fluid p-4 bg-dark">
            <!-- Main Stats -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <h4 class="text-white mb-3">Estadísticas de la comunidad</h4>
                            <div class="row text-center g-3">
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">3,426</h2>
                                        <p class="text-white-50 mb-0">Jugadores activos</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">1,857</h2>
                                        <p class="text-white-50 mb-0">Partidos jugados</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">312</h2>
                                        <p class="text-white-50 mb-0">Equipos formados</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">186</h2>
                                        <p class="text-white-50 mb-0">Canchas registradas</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Date Period Filter -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-3">
                            <div class="d-flex flex-wrap align-items-center">
                                <span class="text-white me-3">Periodo:</span>
                                <div class="btn-group me-3 mb-2 mb-md-0">
                                    <button class="btn btn-dark">Últimos 7 días</button>
                                    <button class="btn btn-success">Último mes</button>
                                    <button class="btn btn-dark">Último año</button>
                                    <button class="btn btn-dark">Todo el tiempo</button>
                                </div>
                                <div class="ms-auto">
                                    <button class="btn btn-dark">
                                        <i class="fas fa-sync-alt me-2"></i>Actualizar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Players Section -->
            <div class="row mb-4">
                <div class="col-12 mb-4">
                    <h5 class="text-white mb-3">
                        <i class="fas fa-trophy text-warning me-2"></i>Jugadores destacados
                    </h5>
                </div>

                <!-- Top Rated Players -->
                <div class="col-md-6 col-xl-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Mejor valorados</h5>
                            <span class="badge bg-warning text-dark">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <ul class="list-group list-group-flush" style="background-color: transparent;">
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-warning text-dark rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">1</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Miguel Sánchez</h6>
                                            <p class="text-success mb-0">Delantero</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">5.0</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">2</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Laura Gómez</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.9</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">3</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">David Martín</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.8</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">4</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Ana Rodríguez</h6>
                                            <p class="text-success mb-0">Delantera</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.7</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">5</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Javier López</h6>
                                            <p class="text-success mb-0">Portero</p>
                                        </div>
                                    </div>
                                    <div class="text-warning">
                                        <span class="fw-bold">4.6</span>
                                        <i class="fas fa-star ms-1"></i>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-warning">
                                Ver ranking completo <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Most Active Players -->
                <div class="col-md-6 col-xl-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Más activos</h5>
                            <span class="badge bg-info text-dark">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <ul class="list-group list-group-flush" style="background-color: transparent;">
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-info text-dark rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">1</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Sergio Moreno</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">78</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">2</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Pablo García</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">72</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">3</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Carmen Ruiz</h6>
                                            <p class="text-success mb-0">Delantera</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">65</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">4</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Luis Torres</h6>
                                            <p class="text-success mb-0">Portero</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">61</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">5</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Elena Martínez</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-info">
                                        <span class="fw-bold">59</span>
                                        <i class="fas fa-futbol ms-1"></i>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-info">
                                Ver ranking completo <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Most Reliable Players -->
                <div class="col-md-6 col-xl-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Más fiables</h5>
                            <span class="badge bg-success">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <ul class="list-group list-group-flush" style="background-color: transparent;">
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-success text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">1</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Roberto Díaz</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">100%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">2</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">María López</h6>
                                            <p class="text-success mb-0">Portera</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">98%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">3</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Carlos Pérez</h6>
                                            <p class="text-success mb-0">Centrocampista</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">97%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">4</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Sofía García</h6>
                                            <p class="text-success mb-0">Delantera</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">95%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center" style="background-color: transparent; border-color: #3f495e;">
                                    <div class="d-flex align-items-center">
                                        <div class="position-relative me-3">
                                            <img src="https://via.placeholder.com/50" class="rounded-circle" width="50" height="50" alt="Player">
                                            <span class="position-absolute bottom-0 end-0 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 22px; height: 22px; font-size: 12px; font-weight: bold;">5</span>
                                        </div>
                                        <div>
                                            <h6 class="text-white mb-0">Fernando Silva</h6>
                                            <p class="text-success mb-0">Defensa</p>
                                        </div>
                                    </div>
                                    <div class="text-success">
                                        <span class="fw-bold">95%</span>
                                        <i class="fas fa-check-circle ms-1"></i>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-success">
                                Ver ranking completo <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teams & Venues Section -->
            <div class="row mb-4">
                <div class="col-12 mb-4">
                    <h5 class="text-white mb-3">
                        <i class="fas fa-chart-line text-info me-2"></i>Equipos y Canchas
                    </h5>
                </div>

                <!-- Top Teams -->
                <div class="col-md-6 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Equipos mejor valorados</h5>
                            <span class="badge bg-primary">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover mb-0" style="background-color: #2d3748;">
                                    <thead>
                                        <tr>
                                            <th scope="col" class="border-0" style="width: 60px;">#</th>
                                            <th scope="col" class="border-0">Equipo</th>
                                            <th scope="col" class="border-0">Partidos</th>
                                            <th scope="col" class="border-0" style="width: 100px;">Valoración</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <span class="badge bg-primary">1</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">FC</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">FC Barcelona Fans</h6>
                                                        <small class="text-white-50">Madrid Este</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>42</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.9</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">2</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-danger rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">RT</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Real Tekkers</h6>
                                                        <small class="text-white-50">Madrid Centro</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>38</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.8</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">3</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">LF</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Las Fieras FC</h6>
                                                        <small class="text-white-50">Madrid Norte</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>35</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.7</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">4</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-warning rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-dark fw-bold">GP</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Galácticos del Parque</h6>
                                                        <small class="text-white-50">Madrid Sur</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>29</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.6</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">5</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="bg-info rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px;">
                                                        <span class="text-white fw-bold">AC</span>
                                                    </div>
                                                    <div>
                                                        <h6 class="mb-0 text-white">Atlético de Chamartín</h6>
                                                        <small class="text-white-50">Madrid Este</small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>27</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.5</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-primary">
                                Ver todos los equipos <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Most Popular Venues -->
                <div class="col-md-6 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Canchas más populares</h5>
                            <span class="badge bg-success">Top 5</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-dark table-hover mb-0" style="background-color: #2d3748;">
                                    <thead>
                                        <tr>
                                            <th scope="col" class="border-0" style="width: 60px;">#</th>
                                            <th scope="col" class="border-0">Cancha</th>
                                            <th scope="col" class="border-0">Partidos</th>
                                            <th scope="col" class="border-0" style="width: 100px;">Valoración</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <span class="badge bg-success">1</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Campo Municipal Norte</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-check-circle text-success me-1"></i>Verificada
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>126</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.8</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">2</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Estadio Central</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-check-circle text-success me-1"></i>Verificada
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>98</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.9</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">3</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Polideportivo Sur</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-check-circle text-success me-1"></i>Verificada
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>87</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.6</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">4</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Cancha "El Barrio"</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-users text-info me-1"></i>Comunitaria
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>65</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.2</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">5</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="https://via.placeholder.com/50x30" class="me-2" alt="Venue">
                                                    <div>
                                                        <h6 class="mb-0 text-white">Campo San Jorge</h6>
                                                        <small class="text-white-50">
                                                            <i class="fas fa-users text-info me-1"></i>Comunitaria
                                                        </small>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>54</td>
                                            <td>
                                                <div class="text-warning">
                                                    <span class="fw-bold">4.0</span>
                                                    <i class="fas fa-star ms-1"></i>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-0 text-center">
                            <a href="#" class="btn btn-sm btn-dark text-success">
                                Ver todas las canchas <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Activity Trends & Match Types -->
            <div class="row">
                <div class="col-12 mb-4">
                    <h5 class="text-white mb-3">
                        <i class="fas fa-chart-pie text-primary me-2"></i>Tendencias y Análisis
                    </h5>
                </div>

                <!-- Weekly Activity Chart -->
                <div class="col-lg-8 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center py-3">
                            <h5 class="text-white mb-0">Actividad semanal</h5>
                            <div class="btn-group">
                                <button class="btn btn-dark btn-sm">Partidos</button>
                                <button class="btn btn-dark btn-sm active">Jugadores</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="weeklyActivityChart" height="250"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Match Types Distribution -->
                <div class="col-lg-4 mb-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-header bg-transparent border-0 py-3">
                            <h5 class="text-white mb-0">Tipos de partido</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="matchTypesChart" height="250"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Personal Stats Section -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4">
                                <h4 class="text-white mb-3 mb-md-0">Tus estadísticas personales</h4>
                                <a href="/mis-estadisticas" class="btn btn-success">
                                    <i class="fas fa-chart-line me-2"></i>Ver estadísticas detalladas
                                </a>
                            </div>
                            <div class="row text-center g-3">
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">24</h2>
                                        <p class="text-white-50 mb-0">Partidos jugados</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">4.7</h2>
                                        <p class="text-white-50 mb-0">Valoración media</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">95%</h2>
                                        <p class="text-white-50 mb-0">Asistencia</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3">
                                    <div class="bg-dark p-3 rounded">
                                        <h2 class="text-success mb-1">7</h2>
                                        <p class="text-white-50 mb-0">Partidos creados</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chart Scripts -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Weekly Activity Chart
        const weeklyCtx = document.getElementById('weeklyActivityChart').getContext('2d');
        const weeklyChart = new Chart(weeklyCtx, {
            type: 'line',
            data: {
                labels: ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'],
                datasets: [{
                    label: 'Jugadores activos',
                    data: [128, 86, 94, 145, 168, 312, 287],
                    backgroundColor: 'rgba(56, 178, 172, 0.2)',
                    borderColor: 'rgba(56, 178, 172, 1)',
                    borderWidth: 2,
                    tension: 0.4,
                    pointBackgroundColor: 'rgba(56, 178, 172, 1)',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(113, 128, 150, 0.2)'
                        },
                        ticks: {
                            color: '#718096'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#718096'
                        }
                    }
                }
            }
        });

        // Match Types Chart
        const typesCtx = document.getElementById('matchTypesChart').getContext('2d');
        const typesChart = new Chart(typesCtx, {
            type: 'doughnut',
            data: {
                labels: ['Fútbol 5', 'Fútbol 7', 'Fútbol 11', 'Fútbol sala'],
                datasets: [{
                    data: [42, 28, 15, 15],
                    backgroundColor: [
                        'rgba(56, 178, 172, 0.7)',  // Verde - Success
                        'rgba(49, 130, 206, 0.7)',  // Azul - Info
                        'rgba(237, 100, 166, 0.7)', // Rosa - Danger
                        'rgba(236, 201, 75, 0.7)'   // Amarillo - Warning
                    ],
                    borderColor: [
                        'rgba(56, 178, 172, 1)',
                        'rgba(49, 130, 206, 1)',
                        'rgba(237, 100, 166, 1)',
                        'rgba(236, 201, 75, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: '#cbd5e0',
                            padding: 20,
                            font: {
                                size: 12
                            }
                        }
                    }
                }
            }
        });
    });
</script>
{% endblock %}

================
File: app/templates/torneos.html
================
{% extends 'base.html' %}
{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!-- Nav -->
    {% include "components/nav.html" %}

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        <!-- Top Navigation Bar -->
        {% include "components/top_nav.html" %}
        
        <!-- Tournaments Section -->
        <div class="container-fluid p-4 bg-dark">
            <!-- Section Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                <div>
                                    <h4 class="card-title text-white mb-1">Torneos oficiales</h4>
                                    <p class="card-text text-white-50">Competiciones organizadas por FútbolConnect para toda la comunidad</p>
                                </div>
                                <div class="mt-3 mt-md-0">
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-dark text-white border-secondary" placeholder="Buscar torneos...">
                                        <button class="btn btn-success" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tournament Categories/Filters -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-3">
                            <div class="d-flex flex-wrap gap-2">
                                <button class="btn btn-success">Todos los torneos</button>
                                <button class="btn btn-dark">Próximos</button>
                                <button class="btn btn-dark">En curso</button>
                                <button class="btn btn-dark">Finalizados</button>
                                <button class="btn btn-dark">Fútbol 5</button>
                                <button class="btn btn-dark">Fútbol 7</button>
                                <button class="btn btn-dark">Fútbol 11</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Featured Tournament -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm overflow-hidden" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="position-relative">
                            <img src="https://via.placeholder.com/1200x300" class="w-100" style="height: 200px; object-fit: cover;" alt="Copa FútbolConnect">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-danger">Destacado</span>
                            </div>
                            <div class="position-absolute top-0 end-0 m-3">
                                <span class="badge bg-warning text-dark">¡Inscripciones abiertas!</span>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <div class="row">
                                <div class="col-md-8">
                                    <h3 class="text-white mb-2">Copa FútbolConnect - Edición Verano 2023</h3>
                                    <p class="text-white-50">El torneo más importante de nuestra plataforma. Reúne a los mejores equipos para competir por el título y premios en efectivo.</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6">
                                            <ul class="list-group list-group-flush bg-transparent mb-3">
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-calendar-alt text-success me-2"></i>Fecha de inicio</span>
                                                    <span class="text-white">15 de Julio, 2023</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-hourglass-end text-success me-2"></i>Fin de inscripciones</span>
                                                    <span class="text-white">10 de Julio, 2023</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-users text-success me-2"></i>Formato</span>
                                                    <span class="text-white">Fútbol 7</span>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <ul class="list-group list-group-flush bg-transparent mb-3">
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-map-marker-alt text-success me-2"></i>Ubicación</span>
                                                    <span class="text-white">Complejo Deportivo Norte</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-trophy text-success me-2"></i>Premio</span>
                                                    <span class="text-white">1.500€ + Trofeo</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center px-0" style="background-color: transparent; border-color: #3f495e;">
                                                    <span class="text-white-50"><i class="fas fa-shield-alt text-success me-2"></i>Equipos</span>
                                                    <span class="text-white">16 (6 plazas disponibles)</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mt-3 mt-md-0 text-center">
                                    <div class="d-flex flex-column h-100 justify-content-between">
                                        <div>
                                            <div class="p-3 mb-3 rounded" style="background-color: #1a202c;">
                                                <h5 class="text-white mb-3">Requisitos mínimos</h5>
                                                <ul class="list-unstyled text-start text-white-50">
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Equipo de 7-10 jugadores</li>
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Nivel intermedio o superior</li>
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Equipación uniforme</li>
                                                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Cuota de inscripción: 150€</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <a href="#" class="btn btn-success btn-lg">
                                            <i class="fas fa-clipboard-list me-2"></i>Inscribir equipo
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tournament List -->
            <div class="row g-4">
                <!-- Tournament Card 1 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-success">Inscripciones abiertas</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-success" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Liga Barrios Unidos</h5>
                            <p class="text-white-50 mb-3">Torneo amistoso entre equipos de diferentes barrios de la ciudad.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">5 de Agosto, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">12 (5 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">800€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Equipo de 7-9 jugadores</li>
                                    <li>Todos los niveles</li>
                                    <li>Cuota: 100€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-success w-100">Ver detalles</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 2 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-info">En curso</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-info" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Torneo Empresarial</h5>
                            <p class="text-white-50 mb-3">Competición entre empresas y organizaciones locales.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">15 de Junio, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">10 (Completo)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">500€ + Donación benéfica</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Equipo de 5-7 jugadores</li>
                                    <li>Representar a una empresa</li>
                                    <li>Cuota: 200€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-info w-100">Ver clasificación</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 3 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-warning text-dark">Próximamente</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-warning" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Copa Veterans</h5>
                            <p class="text-white-50 mb-3">Torneo exclusivo para jugadores mayores de 35 años.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 11</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">10 de Septiembre, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">8 (8 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">1.000€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Jugadores +35 años</li>
                                    <li>Equipo de 11-15 jugadores</li>
                                    <li>Cuota: 250€ por equipo</li>
                                </ul>
                            </div>
                            
                            <button class="btn btn-warning text-dark w-100" disabled>
                                Inscripciones pronto
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 4 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-success">Inscripciones abiertas</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-success" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Torneo Femenino</h5>
                            <p class="text-white-50 mb-3">Competición exclusiva para equipos femeninos de todos los niveles.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">20 de Julio, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">12 (7 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">1.200€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Equipo femenino (7-10 jugadoras)</li>
                                    <li>Todos los niveles</li>
                                    <li>Cuota: 120€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-success w-100">Ver detalles</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 5 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-secondary">Finalizado</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-secondary" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Torneo Primavera</h5>
                            <p class="text-white-50 mb-3">Torneo amistoso celebrado durante la primavera de 2023.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 5</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha</span>
                                    <span class="text-white">15 Marzo - 30 Abril, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">16 (Completo)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Campeón</span>
                                    <span class="text-white">Leones FC</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio entregado</span>
                                    <span class="text-white">750€ + Trofeo</span>
                                </div>
                            </div>
                            
                            <a href="#" class="btn btn-secondary w-100">Ver resultados</a>
                        </div>
                    </div>
                </div>
                
                <!-- Tournament Card 6 -->
                <div class="col-md-6 col-xl-4">
                    <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                        <div class="position-relative">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-success">Inscripciones abiertas</span>
                            </div>
                            <div class="bg-dark text-center py-4 d-flex align-items-center justify-content-center" style="height: 120px;">
                                <i class="fas fa-trophy text-success" style="font-size: 3rem;"></i>
                            </div>
                        </div>
                        <div class="card-body p-4">
                            <h5 class="text-white mb-2">Copa Rookie</h5>
                            <p class="text-white-50 mb-3">Torneo exclusivo para equipos principiantes y recién formados.</p>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Formato</span>
                                    <span class="text-white">Fútbol 7</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Fecha de inicio</span>
                                    <span class="text-white">12 de Agosto, 2023</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Equipos</span>
                                    <span class="text-white">10 (4 plazas libres)</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="text-white-50">Premio</span>
                                    <span class="text-white">500€ + Equipamiento</span>
                                </div>
                            </div>
                            
                            <div class="border-top border-secondary pt-3 mt-3">
                                <h6 class="text-white mb-2">Requisitos mínimos</h6>
                                <ul class="text-white-50 ps-3 mb-3" style="font-size: 0.9rem;">
                                    <li>Nivel principiante</li>
                                    <li>Equipo de 7-10 jugadores</li>
                                    <li>Equipos formados hace < 6 meses</li>
                                    <li>Cuota: 80€ por equipo</li>
                                </ul>
                            </div>
                            
                            <a href="#" class="btn btn-success w-100">Ver detalles</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="d-flex justify-content-center mt-5">
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item disabled">
                            <a class="page-link bg-dark border-secondary text-secondary" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item active"><a class="page-link bg-success border-success" href="#">1</a></li>
                        <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="#">2</a></li>
                        <li class="page-item">
                            <a class="page-link bg-dark border-secondary text-white" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            
            <!-- Tournament Registration CTA -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="row align-items-center">
                                <div class="col-lg-7">
                                    <h4 class="text-white mb-2">¿Quieres organizar tu propio torneo?</h4>
                                    <p class="text-white-50 mb-0">Si representas a una organización, club o empresa y quieres organizar un torneo en nuestra plataforma, ponte en contacto con nosotros. Te ofrecemos gestión completa, arbitraje, promoción y más.</p>
                                </div>
                                <div class="col-lg-5 mt-3 mt-lg-0 text-lg-end">
                                    <button class="btn btn-success btn-lg" data-bs-toggle="modal" data-bs-target="#tournamentRequestModal">
                                        <i class="fas fa-handshake me-2"></i>Solicitar organización
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tournament Request Modal -->
<div class="modal fade" id="tournamentRequestModal" tabindex="-1" aria-labelledby="tournamentRequestModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0" style="background-color: #2d3748; border-radius: 15px;">
            <div class="modal-header border-bottom border-secondary">
                <h5 class="modal-title text-white" id="tournamentRequestModalLabel">Solicitar organización de torneo</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="organizationName" class="form-label text-white">Nombre de la organización</label>
                        <input type="text" class="form-control bg-dark text-white border-secondary" id="organizationName" placeholder="Nombre de tu organización, club o empresa">
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="contactName" class="form-label text-white">Nombre de contacto</label>
                            <input type="text" class="form-control bg-dark text-white border-secondary" id="contactName" placeholder="Tu nombre completo">
                        </div>
                        <div class="col-md-6">
                            <label for="contactEmail" class="form-label text-white">Email de contacto</label>
                            <input type="email" class="form-control bg-dark text-white border-secondary" id="contactEmail" placeholder="email@ejemplo.com">
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="tournamentFormat" class="form-label text-white">Formato de torneo</label>
                            <select class="form-select bg-dark text-white border-secondary" id="tournamentFormat">
                                <option selected disabled>Selecciona un formato</option>
                                <option value="5v5">Fútbol 5 (5 vs 5)</option>
                                <option value="7v7">Fútbol 7 (7 vs 7)</option>
                                <option value="11v11">Fútbol 11 (11 vs 11)</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="teamCount" class="form-label text-white">Número de equipos</label>
                            <select class="form-select bg-dark text-white border-secondary" id="teamCount">
                                <option selected disabled>Selecciona una opción</option>
                                <option value="8">8 equipos</option>
                                <option value="12">12 equipos</option>
                                <option value="16">16 equipos</option>
                                <option value="24">24 equipos</option>
                                <option value="32">32 equipos</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="startDate" class="form-label text-white">Fecha aproximada de inicio</label>
                            <input type="date" class="form-control bg-dark text-white border-secondary" id="startDate">
                        </div>
                        <div class="col-md-6">
                            <label for="duration" class="form-label text-white">Duración aproximada</label>
                            <select class="form-select bg-dark text-white border-secondary" id="duration">
                                <option selected disabled>Selecciona una opción</option>
                                <option value="1day">1 día (torneo intensivo)</option>
                                <option value="1weekend">1 fin de semana</option>
                                <option value="2weeks">2 semanas</option>
                                <option value="1month">1 mes</option>
                                <option value="3months">3 meses (liga)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="tournamentDescription" class="form-label text-white">Descripción del torneo</label>
                        <textarea class="form-control bg-dark text-white border-secondary" id="tournamentDescription" rows="3" placeholder="Describe brevemente el tipo de torneo que quieres organizar, objetivos, público objetivo, etc."></textarea>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="needVenues">
                        <label class="form-check-label text-white-50" for="needVenues">
                            Necesito ayuda para encontrar instalaciones deportivas
                        </label>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input bg-dark border-secondary" type="checkbox" id="needReferees">
                        <label class="form-check-label text-white-50" for="needReferees">
                            Necesito servicio de arbitraje
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-top border-secondary">
                <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success">
                    <i class="fas fa-paper-plane me-2"></i>Enviar solicitud
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/apps.py
================
from django.apps import AppConfig


class AppConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'app'

================
File: app/context_processors.py
================
def common_user_info(request):
    context = {}
    if request.user.is_authenticated:
        context['current_user_nombre'] = request.user.nombre
        context['current_user_posicion'] = request.user.get_posicion_display() if request.user.posicion else "Sin especificar"
        if request.user.imagen_perfil:
            context['current_user_avatar_url'] = request.user.imagen_perfil.url
        else:
            # Lógica para avatar por defecto según nivel
            
            if request.user.calificacion >= 1500:
                context['current_user_avatar_url'] = '/static/images/avatar_pro.png' 
            elif request.user.calificacion >= 1200:
                context['current_user_avatar_url'] = '/static/images/avatar_mid.png' 
            else:
                context['current_user_avatar_url'] = '/static/images/avatar_default.png' 
    return context

================
File: app/tests.py
================
from django.test import TestCase

# Create your tests here.

================
File: app/templates/canchas/canchas_lista.html
================
{% extends 'base.html' %}
{% load static %} {# Para la imagen por defecto de la cancha #}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}

    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        
        <div class="container-fluid p-4">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                                <div>
                                    <h4 class="text-white mb-1">{{ titulo_pagina|default:"Canchas Disponibles" }}</h4>
                                    <p class="text-white-50 mb-md-0">Encuentra o registra las mejores canchas para tus partidos</p>
                                </div>
                                <div class="d-flex gap-2 mt-3 mt-md-0">
                                    <!-- Buscador (funcionalidad futura) -->
                                    <form method="get" action="{% url 'canchas_lista' %}" class="input-group">
                                        <input type="text" name="q" class="form-control bg-dark text-white border-secondary" placeholder="Buscar canchas por nombre..." value="{{ request.GET.q }}">
                                        <button class="btn btn-success" type="submit">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </form>
                                    <!-- Botón para ir a la página de registrar cancha -->
                                    <a href="{% url 'canchas_registrar' %}" class="btn btn-success">
                                        <i class="fas fa-plus-circle me-md-2"></i><span class="d-none d-md-inline">Añadir cancha</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filtros (puedes mantener tu sección de filtros aquí si la implementas) -->
            {% comment %}
            <div class="row mb-4"> ... Tu código de filtros ... </div>
            {% endcomment %}

            <!-- Mensajes de Django (para éxito/error tras registrar) -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Lista de Canchas -->
            <div id="venueListView">
                <div class="row g-4 mb-5">
                    {% if canchas_list %}
                        {% for cancha in canchas_list %}
                        <div class="col-md-6 col-xl-4">
                            <div class="card border-0 shadow-sm h-100" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                                <div class="position-relative">
                                    <img src="{% if cancha.imagen %}{{ cancha.imagen.url }}{% else %}{% static 'images/cancha_default.jpg' %}{% endif %}" class="card-img-top" alt="{{ cancha.nombre_cancha }}" style="height: 200px; object-fit: cover;">
                                    <div class="position-absolute top-0 start-0 m-3">
                                        <span class="badge {% if cancha.propiedad == 'PRIVADA' %}bg-warning text-dark{% else %}bg-info text-dark{% endif %} d-flex align-items-center">
                                            <i class="fas {% if cancha.propiedad == 'PRIVADA' %}fa-lock{% else %}fa-futbol{% endif %} me-1"></i>{{ cancha.get_propiedad_display }}
                                        </span>
                                    </div>
                                    <div class="position-absolute bottom-0 start-0 end-0 p-3 text-center" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                                        <h5 class="text-white mb-0">{{ cancha.nombre_cancha }}</h5>
                                    </div>
                                </div>
                                <div class="card-body p-4 d-flex flex-column">
                                    <div class="mb-3">
                                        <p class="text-white mb-1"><i class="fas fa-map-marker-alt text-success me-2"></i>{{ cancha.ubicacion }}</p>
                                        <p class="text-white mb-1"><i class="fas fa-futbol text-success me-2"></i>{{ cancha.get_tipo_display }}</p>
                                        <p class="text-white mb-1"><i class="fas fa-layer-group text-success me-2"></i>{{ cancha.get_superficie_display }}</p>
                                        {% if cancha.costo_partido is not None %}
                                        <p class="text-white mb-1">
                                            <i class="fas fa-euro-sign text-success me-2"></i>
                                            {% if cancha.costo_partido > 0 %}
                                                {{ cancha.costo_partido|floatformat:2 }}€
                                            {% else %}
                                                Gratis
                                            {% endif %}
                                        </p>
                                        {% endif %}
                                    </div>
                                    <p class="text-white-50 small mb-3 flex-grow-1">{{ cancha.descripcion|truncatewords:20|default:"Sin descripción." }}</p>
                                    <div class="mt-auto d-flex justify-content-between">
                                        <a href="{% url 'detalle_cancha' pk_cancha=cancha.id_cancha %}" class="btn btn-outline-light btn-sm">
                                            <i class="fas fa-info-circle me-1"></i>Detalles
                                        </a>
                                        {% if cancha.propiedad == 'PRIVADA' %}
                                        <a href="#" class="btn btn-success btn-sm"> {/* Reemplazar # con URL de reserva */}
                                            <i class="fas fa-calendar-alt me-1"></i>Reservar
                                        </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                                                
                    {% endfor %}
                    {% else %}
                        <div class="col-12">
                            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                                <div class="card-body p-5 text-center">
                                    <i class="fas fa-search-location fa-3x text-white-50 mb-3"></i>
                                    <h5 class="text-white">No hay canchas disponibles</h5>
                                    <p class="text-white-50">Parece que no hay canchas que coincidan con tu búsqueda o aún no se han registrado. <br>¡Intenta añadir una!</p>
                                    <a href="{% url 'canchas_registrar' %}" class="btn btn-success mt-3">
                                        <i class="fas fa-plus-circle me-2"></i>Añadir Nueva Cancha
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>

                <!-- Paginación -->
                {% if is_paginated %}
                    <div class="d-flex justify-content-center mt-4">
                        <nav aria-label="Page navigation">
                            <ul class="pagination">
                                {% if page_obj.has_previous %}
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page=1{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">« Primera</a></li>
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ page_obj.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Anterior</a></li>
                                {% else %}
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">« Primera</span></li>
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">Anterior</span></li>
                                {% endif %}

                                {% for num in page_obj.paginator.page_range %}
                                    {% if page_obj.number == num %}
                                        <li class="page-item active"><span class="page-link bg-success border-success">{{ num }}</span></li>
                                    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                        <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ num }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">{{ num }}</a></li>
                                    {% endif %}
                                {% endfor %}

                                {% if page_obj.has_next %}
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ page_obj.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Siguiente</a></li>
                                    <li class="page-item"><a class="page-link bg-dark border-secondary text-white" href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Última »</a></li>
                                {% else %}
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">Siguiente</span></li>
                                    <li class="page-item disabled"><span class="page-link bg-dark border-secondary text-secondary">Última »</span></li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/components/landing_nav.html
================
<!-- Navbar con espaciador para mantener la posición de los botones -->
<nav class="navbar navbar-expand-lg navbar-dark sticky-top py-3" style="background-color: #0a0a0a;">
    <div class="container-fluid px-4">
        <!-- Logo y Marca -->
        <a class="navbar-brand d-flex align-items-center" href="{% url 'landing'%}">
            {% include 'components/svg/logo.html' %}
            <span class="fw-bold fs-4">XXX</span>
        </a>
        
        <!-- Toggle para móviles -->
        <button class="navbar-toggler border-success" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <!-- Contenedor con estructura fija -->
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <!-- División en tres partes con flexbox -->
            <div class="d-flex justify-content-between align-items-center w-100">
                <!-- Primera parte: espacio vacío a la izquierda -->
                <div class="flex-grow-1 d-lg-block d-none" style="width: 160px;"></div>
                
                <!-- Segunda parte: enlaces -->
                <ul class="navbar-nav" id="enlaces">
                    <li class="nav-item px-2">
                        <a class="nav-link fs-5 active" href="#inicio">Inicio</a>
                    </li>
                    <li class="nav-item px-2">
                        <a class="nav-link fs-5" href="#caracteristicas">Características</a>
                    </li>
                    <li class="nav-item px-2">
                        <a class="nav-link fs-5" href="#como-funciona">Cómo Funciona</a>
                    </li>
                </ul>
                
                <!-- Elemento espaciador invisible que toma el lugar de los enlaces cuando se ocultan -->
                <div id="enlaces-placeholder" class="flex-grow-1 d-none"></div>
                
                <!-- Tercera parte: botones de login siempre a la derecha -->
                <div class="d-flex gap-3">
                    <a href="{% url 'login' %}" class="btn btn-outline-success px-4" id="btn-login">
                        <i class="fas fa-sign-in-alt me-2"></i>Acceder
                    </a>
                    <a href="{% url 'registro' %}" class="btn btn-success px-4" id="btn-reg">
                        <i class="fas fa-user-plus me-2"></i>Registrarse
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    
    const enlaces = document.getElementById('enlaces');
    const enlacesPlaceholder = document.getElementById('enlaces-placeholder');
    const botonLogin = document.getElementById('btn-login');
    const botonReg = document.getElementById('btn-reg');
    
    const currentPath = window.location.pathname;
    
    if (currentPath.includes('/login') || currentPath.includes('/registro')) {

        enlaces.style.display = 'none';

        enlacesPlaceholder.classList.remove('d-none');

    }else if (currentPath.includes('/login')) {

        botonLogin.style.display = 'none';

    }else if (currentPath.includes('/registro')) {

        botonReg.style.display = 'none';

    } else {
        
        enlacesPlaceholder.classList.remove('d-none');
    }

    
});
</script>

================
File: app/templates/partidos/buscar_partidos.html
================
{% extends 'base.html' %}
{% load static %}

{% block base %}
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
   {% include "components/nav.html" %}

   <div class="flex-grow-1 overflow-auto p-0 bg-dark">
       {% include "components/top_nav.html" %}
       
       <div class="container-fluid p-4 bg-dark">
           <!-- ... (Cabecera y Filtros sin cambios significativos) ... -->
           <div class="row mb-4">
               <div class="col-12">
                   <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                       <div class="card-body p-4">
                           <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                               <div>
                                   <h4 class="card-title text-white mb-1">{{ titulo_pagina|default:"Partidos Disponibles" }}</h4>
                                   <p class="card-text text-white-50">Encuentra partidos cerca de ti y únete a la comunidad</p>
                               </div>
                               <div class="mt-3 mt-md-0">
                                   <a href="{% url 'crear_partidos' %}" class="btn btn-success ms-3">
                                       <i class="fas fa-plus-circle me-2"></i>Crear partido
                                   </a>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

           <div id="listView">
                {% if partidos_info_list %} {# Cambiado a partidos_info_list #}
                    <div class="row g-4">
                        {% for item_info in partidos_info_list %} {# Iterar sobre la nueva variable #}
                            {% with partido=item_info.partido es_creador=item_info.es_creador esta_inscrito=item_info.esta_inscrito inscripcion_esta_abierta=item_info.inscripcion_esta_abierta plazas_disponibles=item_info.plazas_disponibles %}
                            <div class="col-md-6 col-xl-4">
                                <div class="card border-0 shadow-sm h-100 {% if es_creador %}border-2 border-primary{% elif esta_inscrito %}border-2 border-success{% endif %}" style="background-color: #2d3748; border-radius: 15px; overflow: hidden;">
                                    <div class="position-relative">
                                        <div class="bg-dark text-center py-4">
                                            <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                                                <i class="fas fa-futbol text-success fs-1"></i>
                                            </div>
                                        </div>
                                        {% if es_creador %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-primary">Tu Partido</span>
                                        {% elif esta_inscrito %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-success">Inscrito</span>
                                        {% elif not inscripcion_esta_abierta and partido.jugadores.count >= partido.max_jugadores %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-danger">Completo</span>
                                        {% elif not inscripcion_esta_abierta %}
                                            <span class="position-absolute top-0 start-0 m-2 badge bg-secondary">Inscripción Cerrada</span>
                                        {% endif %}
                                        <span class="position-absolute top-0 end-0 m-2 badge bg-info">{{ partido.get_modalidad_display|default:"Amistoso" }}</span>
                                    </div>
                                    <div class="card-body p-4 d-flex flex-column">
                                        <h5 class="text-white mb-2">
                                            <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="text-white text-decoration-none stretched-link">
                                                Partido en {{ partido.cancha.nombre_cancha }}
                                            </a>
                                        </h5>
                                        <div class="text-white-50 small mb-1"><i class="fas fa-calendar-alt text-success me-1"></i> {{ partido.fecha|date:"d/m/Y H:i" }}</div>
                                        <div class="text-white-50 small mb-1"><i class="fas fa-clock text-success me-1"></i> Límite inscripción: {{ partido.fecha_limite_inscripcion_efectiva|date:"d/m/Y H:i" }}</div>
                                        <div class="text-white-50 small mb-2"><i class="fas fa-map-marker-alt text-success me-1"></i> {{ partido.cancha.ubicacion }}</div>
                                        <div class="text-white-50 small mb-2"><i class="fas fa-running text-success me-1"></i> {{ partido.get_tipo_display }} | Nivel: {{ partido.get_nivel_display|default:"Todos" }}</div>

                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between mb-1">
                                                <span class="text-white small">Jugadores:</span>
                                                <span class="text-white small">{{ partido.jugadores.count }}/{{ partido.max_jugadores }}</span>
                                            </div>
                                            <div class="progress bg-dark" style="height: 10px;">
                                                <div class="progress-bar bg-success" role="progressbar" style="width: {% widthratio partido.jugadores.count partido.max_jugadores 100 %}%"></div>
                                            </div>
                                            {% if inscripcion_esta_abierta %}
                                                <small class="text-success">{{ plazas_disponibles }} plazas disponibles</small>
                                            {% elif partido.jugadores.count >= partido.max_jugadores %}
                                                <small class="text-danger">Partido completo</small>
                                            {% else %}
                                                <small class="text-warning">Inscripción cerrada</small>
                                            {% endif %}
                                        </div>
                                        
                                        <div class="mt-auto">
                                            {% if es_creador %}
                                                <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-primary w-100">
                                                    <i class="fas fa-cog me-2"></i>Gestionar Partido
                                                </a>
                                            {% elif esta_inscrito %}
                                                <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-outline-light w-100">
                                                    <i class="fas fa-eye me-2"></i>Ver Detalles
                                                </a>
                                                <!-- Podrías añadir un botón para desinscribirse aquí -->
                                            {% elif inscripcion_esta_abierta %}
                                                <form action="{% url 'inscribirse_partido' partido_id=partido.id_partido %}" method="post">
                                                    {% csrf_token %}
                                                    <button type="submit" class="btn btn-success w-100">
                                                        <i class="fas fa-user-plus me-2"></i>Inscribirse
                                                    </button>
                                                </form>
                                            {% else %}
                                                <a href="{% url 'detalle_partido' pk=partido.id_partido %}" class="btn btn-secondary w-100 disabled" aria-disabled="true">
                                                    No disponible
                                                </a>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endwith %}
                        {% endfor %}
                    </div>
                    <!-- ... (Paginación) ... -->
                {% else %}
                    <!-- ... (Mensaje de no hay partidos) ... -->
                {% endif %}
           </div>
       </div>
   </div>
</div>
{% endblock %}

================
File: app/templates/partidos/detalle_partido.html
================
{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block base %}
<style>
    .drag-list {
        min-height: 100px;
        border: 2px dashed #4a5568;
        border-radius: 0.5rem;
        padding: 10px;
        margin-bottom: 15px;
        background-color: rgba(255,255,255,0.05);
        transition: background-color 0.2s ease-in-out;
    }
    .drag-list.drag-over {
        background-color: rgba(40, 167, 69, 0.2); /* Verde éxito al arrastrar encima */
        border-color: #28a745;
    }
    .player-card {
        background-color: #3a4454;
        color: white;
        padding: 8px 12px;
        margin-bottom: 8px;
        border-radius: 0.3rem;
        cursor: grab;
        border: 1px solid #4a5568;
        display: flex;
        align-items: center;
        font-size: 0.9rem;
    }
    .player-card:active {
        cursor: grabbing;
    }
    .player-card img {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        margin-right: 8px;
    }
    .placeholder { /* Para cuando un elemento se está arrastrando */
        background-color: rgba(255,255,255,0.1);
        border: 2px dashed #555;
        height: 40px; /* Ajustar a la altura de player-card */
        margin-bottom: 8px;
        border-radius: 0.3rem;
    }
</style>

<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    {% include "components/nav.html" %}
    <div class="flex-grow-1 overflow-auto p-0 bg-dark">
        {% include "components/top_nav.html" %}
        <div class="container-fluid p-4">
            
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show mb-3" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px; color: white;">
                <div class="card-header bg-transparent border-bottom border-secondary py-3 d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">{{ titulo_pagina }}</h4>
                    {% if es_creador and partido.estado == 'PROGRAMADO' %}
                    {# <a href="#" class="btn btn-outline-warning btn-sm"><i class="fas fa-edit me-1"></i> Editar Partido</a> #}
                    {% endif %}
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-lg-7 mb-4 mb-lg-0">
                            {# ... (Información General del Partido como la tenías) ... #}
                            <h5 class="text-success mb-3">Información General del Partido</h5>
                            <div class="row">
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-futbol me-2 text-success"></i>Cancha:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.cancha.nombre_cancha }} ({{ partido.cancha.get_superficie_display }})</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-map-marker-alt me-2 text-success"></i>Ubicación:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.cancha.ubicacion }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-calendar-alt me-2 text-success"></i>Fecha y Hora:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.fecha|date:"l, d F Y, H:i" }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-clock me-2 text-success"></i>Duración:</strong></div>
                                <div class="col-sm-6 mb-2">1 hora</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-user-clock me-2 text-success"></i>Límite Inscripción:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.fecha_limite_inscripcion_efectiva|date:"l, d F Y, H:i" }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-users me-2 text-success"></i>Formato:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.get_tipo_display }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-medal me-2 text-success"></i>Modalidad:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.get_modalidad_display }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-tachometer-alt me-2 text-success"></i>Nivel:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.get_nivel_display|default:"Abierto a todos" }}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-euro-sign me-2 text-success"></i>Costo:</strong></div>
                                <div class="col-sm-6 mb-2">{% if partido.costo > 0 %}{{ partido.costo|floatformat:2 }}€ ({{ partido.get_metodo_pago_display }}){% else %}Gratis{% endif %}</div>
                                <div class="col-sm-6 mb-2"><strong><i class="fas fa-user-edit me-2 text-success"></i>Creador:</strong></div>
                                <div class="col-sm-6 mb-2">{{ partido.creador.nombre }}</div>
                            </div>
                             {% if partido.comentarios %}
                                <h5 class="text-success mt-4 mb-2">Comentarios Adicionales</h5>
                                <p class="text-white-75">{{ partido.comentarios|linebreaksbr }}</p>
                            {% endif %}
                        </div>

                        <div class="col-lg-5">
                            <h5 class="text-success">Jugadores ({{ partido.jugadores.count }}/{{ partido.max_jugadores }})</h5>
                            {% if plazas_disponibles > 0 and inscripcion_esta_abierta %}
                                <p class="text-info small"><i class="fas fa-info-circle me-1"></i>{{ plazas_disponibles }} plaza{{ plazas_disponibles|pluralize }} disponible{{ plazas_disponibles|pluralize }}.</p>
                            {% elif partido.jugadores.count >= partido.max_jugadores and not es_creador %} {# No mostrar completo si es creador y puede asignar #}
                                <p class="text-danger small"><i class="fas fa-times-circle me-1"></i>¡Partido Completo!</p>
                            {% elif not inscripcion_esta_abierta and not es_creador %}
                                 <p class="text-warning small"><i class="fas fa-hourglass-end me-1"></i>Inscripción cerrada.</p>
                            {% endif %}

                            {% if es_creador and partido.estado == 'PROGRAMADO' %}
                                <form method="post" action="{% url 'detalle_partido' pk=partido.id_partido %}" id="formAsignarEquipos">
                                    {% csrf_token %}
                                    {# Renderizar los campos select ocultos del AsignarEquiposForm #}
                                    <div class="d-none">
                                        {{ form_asignar_equipos|crispy }}
                                    </div>

                                    <div class="row">
                                        <div class="col-12 mb-3">
                                            <h6 class="text-white-50">Jugadores Sin Asignar / Suplentes</h6>
                                            <div id="lista-sin-asignar" class="drag-list">
                                                {% for jugador in jugadores_inscritos_list %}
                                                    {% if not partido.equipo_local or jugador not in partido.equipo_local.jugadores.all %}
                                                        {% if not partido.equipo_visitante or jugador not in partido.equipo_visitante.jugadores.all %}
                                                            <div class="player-card" draggable="true" data-jugador-id="{{ jugador.id }}">
                                                                <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" alt="{{ jugador.nombre }}">
                                                                {{ jugador.nombre }}
                                                            </div>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6 class="text-info">Equipo Local</h6>
                                            <div id="equipo-local" class="drag-list">
                                                {% if partido.equipo_local %}
                                                    {% for jugador in partido.equipo_local.jugadores.all %}
                                                    <div class="player-card" draggable="true" data-jugador-id="{{ jugador.id }}">
                                                        <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" alt="{{ jugador.nombre }}">
                                                        {{ jugador.nombre }}
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6 class="text-warning">Equipo Visitante</h6>
                                            <div id="equipo-visitante" class="drag-list">
                                                {% if partido.equipo_visitante %}
                                                    {% for jugador in partido.equipo_visitante.jugadores.all %}
                                                    <div class="player-card" draggable="true" data-jugador-id="{{ jugador.id }}">
                                                        <img src="{% if jugador.imagen_perfil %}{{ jugador.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" alt="{{ jugador.nombre }}">
                                                        {{ jugador.nombre }}
                                                    </div>
                                                    {% endfor %}
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-sm mt-3 w-100">Guardar Asignación de Equipos</button>
                                </form>
                            
                            {% elif jugadores_inscritos_list %}
                                <h6 class="text-white mt-3 mb-2">Lista de Inscritos:</h6>
                                <ul class="list-group list-group-flush bg-transparent mb-3">
                                    {% for jugador_inscrito in jugadores_inscritos_list %}
                                        <li class="list-group-item bg-transparent border-secondary text-white d-flex align-items-center px-0 py-2">
                                            <img src="{% if jugador_inscrito.imagen_perfil %}{{ jugador_inscrito.imagen_perfil.url }}{% else %}{% static 'images/avatar_default.png' %}{% endif %}" class="rounded-circle me-2" width="30" height="30" alt="{{ jugador_inscrito.nombre }}">
                                            <span>{{ jugador_inscrito.nombre }} <small>({{ jugador_inscrito.get_posicion_display|default:"Sin pos." }})</small></span>
                                            {% if jugador_inscrito == partido.creador %}
                                                <span class="badge bg-primary ms-2">Creador</span>
                                            {% endif %}
                                            {% if partido.equipo_local and jugador_inscrito in partido.equipo_local.jugadores.all %}
                                                <span class="badge bg-info ms-auto">Equipo Local</span>
                                            {% elif partido.equipo_visitante and jugador_inscrito in partido.equipo_visitante.jugadores.all %}
                                                 <span class="badge bg-warning text-dark ms-auto">Equipo Visitante</span>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <p class="text-white-50">Aún no hay jugadores inscritos.</p>
                            {% endif %}

                            <div class="mt-3">
                                {# ... (Lógica de botones de acción como la tenías, adaptada) ... #}
                                {% if es_creador %}
                                    {% if partido.estado == 'PROGRAMADO' %}
                                        {% if partido.equipo_local and partido.equipo_visitante %}
                                            <a href="{% url 'registrar_resultado_partido' pk=partido.id_partido %}" class="btn btn-info mt-2 w-100">
                                                <i class="fas fa-edit me-2"></i>Registrar Resultado
                                            </a>
                                        {% elif not form_asignar_equipos %}
                                            <p class="text-warning small">Asigna jugadores a los equipos para poder registrar el resultado.</p>
                                        {% endif %}
                                    {% elif partido.estado == 'FINALIZADO' %}
                                        {# ... (Mostrar resultado) ... #}
                                    {% endif %}
                                {% elif esta_inscrito %}
                                    {# ... (Botón Ya Inscrito) ... #}
                                {% elif inscripcion_esta_abierta %}
                                    {# ... (Formulario Inscribirse) ... #}
                                {% else %}
                                    {# ... (Botón Inscripción no disponible) ... #}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-top border-secondary text-center py-3">
                        <a href="{% url 'buscar_partidos' %}" class="btn btn-outline-light"><i class="fas fa-arrow-left me-2"></i>Volver a la lista de partidos</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const dragLists = document.querySelectorAll('.drag-list');
    let draggedItem = null;
    let placeholder = document.createElement('div');
    placeholder.classList.add('placeholder');

    function getSelectFieldForJugador(jugadorId) {
        return document.querySelector(`.player-assignment-select[data-jugador-id="${jugadorId}"]`);
    }

    document.querySelectorAll('.player-card').forEach(item => {
        item.addEventListener('dragstart', function (e) {
            draggedItem = this;
            // e.dataTransfer.setData('text/plain', this.dataset.jugadorId); // No es estrictamente necesario para esta lógica
            setTimeout(() => {
                this.style.display = 'none'; // Ocultar el original mientras se arrastra
            }, 0);
        });

        item.addEventListener('dragend', function () {
            setTimeout(() => {
                if (draggedItem) { // Asegurarse que draggedItem no es null
                    draggedItem.style.display = 'flex'; // Mostrar de nuevo
                    draggedItem = null;
                }
                if (placeholder.parentNode) {
                    placeholder.parentNode.removeChild(placeholder);
                }
            }, 0);
        });
    });

    dragLists.forEach(list => {
        list.addEventListener('dragover', function (e) {
            e.preventDefault(); // Necesario para permitir el drop
            this.classList.add('drag-over');
            
            // Lógica del placeholder para feedback visual
            const afterElement = getDragAfterElement(this, e.clientY);
            if (afterElement == null) {
                this.appendChild(placeholder);
            } else {
                this.insertBefore(placeholder, afterElement);
            }
        });

        list.addEventListener('dragleave', function () {
            this.classList.remove('drag-over');
            if (placeholder.parentNode === this) { // Solo remover si el placeholder está en esta lista
                 //this.removeChild(placeholder); // Opcional: remover al salir si no se ha soltado
            }
        });

        list.addEventListener('drop', function (e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            if (placeholder.parentNode) {
                 placeholder.parentNode.removeChild(placeholder);
            }

            if (draggedItem) {
                this.appendChild(draggedItem); // Mover el elemento visualmente

                const jugadorId = draggedItem.dataset.jugadorId;
                const selectField = getSelectFieldForJugador(jugadorId);

                if (selectField) {
                    if (this.id === 'equipo-local') {
                        selectField.value = 'local';
                    } else if (this.id === 'equipo-visitante') {
                        selectField.value = 'visitante';
                    } else { // lista-sin-asignar
                        selectField.value = ''; // Opción "Sin Asignar"
                    }
                    // console.log(`Jugador ${jugadorId} asignado a ${selectField.value}`);
                }
            }
        });
    });

    function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.player-card:not([style*="display: none"])')]; // Excluir el que se está arrastrando

        return draggableElements.reduce((closest, child) => {
            const box = child.getBoundingClientRect();
            const offset = y - box.top - box.height / 2;
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    // Opcional: Si quieres que al cambiar el select (si lo haces visible) se mueva el card
    document.querySelectorAll('.player-assignment-select').forEach(select => {
        select.addEventListener('change', function() {
            const jugadorId = this.dataset.jugadorId;
            const playerCard = document.querySelector(`.player-card[data-jugador-id="${jugadorId}"]`);
            if (!playerCard) return;

            let targetListId;
            if (this.value === 'local') {
                targetListId = 'equipo-local';
            } else if (this.value === 'visitante') {
                targetListId = 'equipo-visitante';
            } else {
                targetListId = 'lista-sin-asignar';
            }
            const targetList = document.getElementById(targetListId);
            if (targetList) {
                targetList.appendChild(playerCard);
            }
        });
    });
});
</script>
{% endblock %}

================
File: app/templates/registration/login.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block base %}
<!-- Navbar -->
{% include "components/landing_nav.html" %}

<!-- Auth Section - Login con diseño mejorado -->
<section class="py-5 position-relative overflow-hidden" style="background-color: #1a202c; min-height: calc(100vh - 84px);">
    <!-- Patrón de fondo sutil -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiB4PSIxMDAiIHk9IjI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNTAwIiByPSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIzMDAiIHg9IjEwMCIgeT0iMzUwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoNDAsMTY3LDY5LDAuMDUpIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjMwMCIgeD0iNzIwIiB5PSIzNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg0MCwxNjcsNjksMC4wNSkiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg=='); background-size: cover; background-position: center; z-index: 1; opacity: 0.1;"></div>
    
    <!-- Elementos decorativos flotantes -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1; opacity: 0.07;">
        <div class="position-absolute" style="top: 10%; left: 5%;">
            <i class="fas fa-futbol fa-5x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
        <div class="position-absolute" style="top: 80%; left: 25%;">
            <i class="fas fa-trophy fa-3x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
        <div class="position-absolute" style="bottom: 15%; right: 10%;">
            <i class="fas fa-futbol fa-4x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
    </div>
    
    <!-- Imagen del jugador con mejoras visuales -->
    <div class="position-absolute h-100 w-100 end-0 d-none d-xl-block" style="width: 25%; z-index: 1; opacity: 0.8;">
        <img src="https://sportrenders.com/wp-content/uploads/2023/11/Ronaldinho-Render-PNG-Barcelona-Imagen-Transparente-Sport-Renders.png" alt="Jugador de fútbol retro" class="h-100 w-100" style="object-fit: contain; object-position: right center; filter: drop-shadow(0 0 30px rgba(40,167,69,0.2));">
        
        <!-- Resplandor detrás de la imagen -->
        <div class="position-absolute top-50 end-0 translate-middle-y" style="width: 300px; height: 600px; background: radial-gradient(ellipse at center, rgba(40,167,69,0.15) 0%, rgba(40,167,69,0) 70%); filter: blur(30px); z-index: -1;"></div>
    </div>
    
    <div class="container position-relative" style="z-index: 2;">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-6">
                <!-- Formulario de login mejorado -->
                <div class="card border-0 shadow-lg" style="background: linear-gradient(145deg, #2d3748, #1e2533); border-radius: 1rem; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.3);">
                    <div class="card-body p-4 p-md-5">
                        <h2 class="text-center text-white fw-bold mb-2">Bienvenido de nuevo</h2>
                        <div class="d-flex justify-content-center mb-4">
                            <div class="bg-success" style="height: 3px; width: 60px; border-radius: 3px;"></div>
                        </div>
                        <p class="text-white-50 text-center mb-4">Ingresa tus datos para acceder a tu cuenta y conectarte con jugadores de tu zona</p>
                        
                        <!-- Implementando crispy_forms -->
                        <form action="{% url 'login' %}" method="post" id="loginForm">
                            {% csrf_token %}
                            
                            <div class="row">
                                {{ form | crispy }}
                            </div>
                            
                            <div class="mb-4 form-check">
                                <input type="checkbox" class="form-check-input" id="remember-me" style="background-color: rgba(0,0,0,0.2); border-color: rgba(40,167,69,0.5);">
                                <label class="form-check-label text-white-50" for="remember-me">Recordarme</label>
                            </div>
                            
                            <button type="submit" class="btn btn-success w-100 py-3 mb-4" style="border-radius: 0.5rem; box-shadow: 0 8px 15px rgba(40,167,69,0.3);">
                                <i class="fas fa-sign-in-alt me-2"></i>Iniciar sesión
                            </button>
                            
                            <div class="text-center text-white-50">
                                <p class="mb-0">¿No tienes una cuenta? <a href="{% url 'registro' %}" class="text-success fw-bold">Regístrate ahora</a></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer mejorado -->
<footer class="py-4" style="background-color: #0a0a0a;">
    <div class="container">
        <!-- Footer Bottom / Copyright -->
        <div class="pt-2">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="text-white-50 small mb-0">© 2025 FútbolConnect. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="text-white-50 small mb-0">Reviviendo el fútbol callejero <i class="fas fa-futbol text-success mx-1"></i></p>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Estilos para campos de formulario -->
<style>
    /* Estilos para los campos de formulario */
    .form-control, .form-select {
        background-color: rgba(255,255,255,0.05) !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
        color: white !important;
        border-radius: 0.5rem !important;
        padding: 0.75rem 1rem !important;
        transition: all 0.3s ease !important;
    }
    
    .form-control:focus, .form-select:focus {
        background-color: rgba(255,255,255,0.1) !important;
        border-color: rgba(40,167,69,0.5) !important;
        box-shadow: 0 0 0 0.25rem rgba(40,167,69,0.25) !important;
    }
    
    .form-control::placeholder {
        color: rgba(255,255,255,0.5) !important;
    }
    
    /* Estilos para etiquetas de formulario */
    .form-label {
        color: rgba(255,255,255,0.8) !important;
        font-weight: 500 !important;
    }
    
    /* Estilos para mensajes de ayuda */
    .form-text {
        color: rgba(255,255,255,0.5) !important;
    }
    
    /* Botones de envío */
    .btn-success {
        background-color: #28a745 !important;
        border-color: #28a745 !important;
        transition: all 0.3s ease !important;
    }
    
    .btn-success:hover {
        transform: translateY(-3px) !important;
        box-shadow: 0 10px 25px rgba(40,167,69,0.4) !important;
    }
</style>
{% endblock %}

================
File: app/templates/registration/registro.html
================
{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block base %}
<!-- Navbar -->
{% include "components/landing_nav.html" %}

<!-- Auth Section - Register con diseño mejorado -->
<section class="py-5 position-relative overflow-hidden" style="background-color: #1a202c; min-height: calc(100vh - 84px);">
    <!-- Patrón de fondo sutil -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiB4PSIxMDAiIHk9IjI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNTAwIiByPSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIzMDAiIHg9IjEwMCIgeT0iMzUwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoNDAsMTY3LDY5LDAuMDUpIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjMwMCIgeD0iNzIwIiB5PSIzNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg0MCwxNjcsNjksMC4wNSkiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg=='); background-size: cover; background-position: center; z-index: 1; opacity: 0.1;"></div>
    
    <!-- Elementos decorativos flotantes -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1; opacity: 0.07;">
        <div class="position-absolute" style="top: 10%; left: 5%;">
            <i class="fas fa-futbol fa-5x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
        <div class="position-absolute" style="top: 80%; left: 25%;">
            <i class="fas fa-trophy fa-3x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
        <div class="position-absolute" style="bottom: 15%; right: 10%;">
            <i class="fas fa-futbol fa-4x text-success" style="filter: drop-shadow(0 0 10px rgba(40,167,69,0.3));"></i>
        </div>
    </div>
    
    <!-- Imagen de Beckham con mejoras visuales -->
    <div class="position-absolute h-100 w-100 end-0 d-none d-xl-block" style="width: 25%; z-index: 1; opacity: 0.8;">
        <img src="https://sportrenders.com/wp-content/uploads/2023/06/David-Beckham-Image-PNG-Render-Manchester-United-Futbol-Sport-Renders.png" alt="David Beckham" class="h-100 w-100" style="object-fit: contain; object-position: right center; filter: drop-shadow(0 0 30px rgba(40,167,69,0.2));">
        
        <!-- Resplandor detrás de la imagen -->
        <div class="position-absolute top-50 end-0 translate-middle-y" style="width: 300px; height: 600px; background: radial-gradient(ellipse at center, rgba(40,167,69,0.15) 0%, rgba(40,167,69,0) 70%); filter: blur(30px); z-index: -1;"></div>
    </div>
    
    <div class="container position-relative" style="z-index: 2;">
        <div class="row justify-content-center">
            <div class="col-md-10 col-lg-8">
                <!-- Formulario de registro mejorado -->
                <div class="card border-0 shadow-lg" style="background: linear-gradient(145deg, #2d3748, #1e2533); border-radius: 1rem; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.3);">
                    <div class="card-body p-4 p-md-5">
                        <h2 class="text-center text-white fw-bold mb-2">Crea tu cuenta</h2>
                        <div class="d-flex justify-content-center mb-4">
                            <div class="bg-success" style="height: 3px; width: 60px; border-radius: 3px;"></div>
                        </div>
                        <p class="text-white-50 text-center mb-4">Únete a la comunidad y empieza a disfrutar del fútbol como antes</p>
                        
                        <!-- Implementando crispy_forms -->
                        <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            
                            <div class="row">
                                {{ form | crispy }}
                            </div>
                            
                            <button type="submit" class="btn btn-success w-100 py-3 mb-4" style="border-radius: 0.5rem; box-shadow: 0 8px 15px rgba(40,167,69,0.3);">
                                <i class="fas fa-user-plus me-2"></i>Crear cuenta
                            </button>
                            
                            <div class="text-center text-white-50">
                                <p class="mb-0">¿Ya tienes una cuenta? <a href="{% url 'login' %}" class="text-success fw-bold">Inicia sesión</a></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer mejorado -->
<footer class="py-4" style="background-color: #0a0a0a;">
    <div class="container">
        <!-- Footer Bottom / Copyright -->
        <div class="pt-2">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="text-white-50 small mb-0">© 2025 FútbolConnect. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="text-white-50 small mb-0">Reviviendo el fútbol callejero <i class="fas fa-futbol text-success mx-1"></i></p>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Estilos para campos de formulario -->
<style>
    /* Estilos para los campos de formulario */
    .form-control, .form-select {
        background-color: rgba(255,255,255,0.05) !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
        color: white !important;
        border-radius: 0.5rem !important;
        padding: 0.75rem 1rem !important;
        transition: all 0.3s ease !important;
    }
    
    .form-control:focus, .form-select:focus {
        background-color: rgba(255,255,255,0.1) !important;
        border-color: rgba(40,167,69,0.5) !important;
        box-shadow: 0 0 0 0.25rem rgba(40,167,69,0.25) !important;
    }
    
    .form-control::placeholder {
        color: rgba(255,255,255,0.5) !important;
    }
    
    /* Estilos para etiquetas de formulario */
    .form-label {
        color: rgba(255,255,255,0.8) !important;
        font-weight: 500 !important;
    }
    
    /* Estilos para mensajes de ayuda */
    .form-text {
        color: rgba(255,255,255,0.5) !important;
    }
    
    /* Botones de envío */
    .btn-success {
        background-color: #28a745 !important;
        border-color: #28a745 !important;
        transition: all 0.3s ease !important;
    }
    
    .btn-success:hover {
        transform: translateY(-3px) !important;
        box-shadow: 0 10px 25px rgba(40,167,69,0.4) !important;
    }
</style>
{% endblock %}

================
File: app/admin.py
================
from django.contrib import admin
from .models import *
from django.contrib.auth.admin import UserAdmin

# Register your models here.


admin.site.register(Equipo)
admin.site.register(Partido)
admin.site.register(Cancha)
admin.site.register(Resultado)
admin.site.register(Inscripcion)
admin.site.register(HistorialELO)


class MyAdmin(UserAdmin):
    model = User

    list_display = ("email", "username", "nombre", "calificacion", "posicion")
    search_fields = ("email", "nombre", "posicion")

    ordering = ("-calificacion",)

    fieldsets = UserAdmin.fieldsets + (
        ('Información Personal', {
            "fields": (
                "nombre", "fecha_nacimiento", "genero", "posicion",
                "ubicacion", "imagen_perfil"
            )
        }),
        ('📊 Estadísticas', {
            "fields": (
                "partidos_jugados", "victorias", "derrotas", "empates", "calificacion"
            )
        }),
    )

    add_fieldsets = UserAdmin.add_fieldsets + (
        ('Información adicional', {
            "fields": (
                "nombre", "fecha_nacimiento", "genero", "posicion",
                "ubicacion", "imagen_perfil"
            )
        }),
        ('📊 Estadísticas', {
            "fields": (
                "partidos_jugados", "victorias", "derrotas", "empates", "calificacion"
            )
        }),
    )



# Registra el Admin
admin.site.register(User, MyAdmin)

================
File: app/templates/components/nav.html
================
<!-- Sidebar Navigation -->
<div class="sidebar d-flex flex-column flex-shrink-0 p-3 text-white bg-dark border-end border-secondary" style="width: 280px; min-height: 100vh;">
    <!-- Logo and brand -->
    <a href="{% url 'home' %}" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
        {% include 'components/svg/logo.html' %}
        <span class="fs-4 fw-bold">XXX</span>
    </a>
    <hr>
    <!-- User profile preview -->
    <div class="d-flex align-items-center mb-3">
        {% if current_user_avatar_url %}
            <img src="{{ current_user_avatar_url }}" class="rounded-circle me-2" width="50" height="50" alt="Avatar">
        {% else %}
            <img src="https://via.placeholder.com/50" class="rounded-circle me-2" width="50" height="50" alt="Avatar"> 
        {% endif %}
        <div>
            <h6 class="mb-0 text-white">{{ user.nombre }}</h6>
            <span class="text-success">{{ current_user_posicion }}</span>
        </div>
    </div>
    <hr>
    <!-- Navigation menu -->
    <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
            <a href="{% url 'home' %}" class="nav-link text-white active" aria-current="page">
                <i class="fas fa-home me-2"></i>
                Inicio
            </a>
        </li>
        <li>
            <a href="{% url 'buscar_partidos' %}" class="nav-link text-white">
                <i class="fas fa-search me-2"></i>
                Buscar partidos
            </a>
        </li>
        <li>
            <a href="{% url 'crear_partidos' %}" class="nav-link text-white">
                <i class="fas fa-plus-circle me-2"></i>
                Crear partido
            </a>
        </li>
        <li>
            <a href="{% url 'estadisticas' %}" class="nav-link text-white">
                <i class="fas fa-calendar-alt me-2"></i>
                Estadísticas
            </a>
        </li>
        <li>
            <a href="{% url 'torneos' %}" class="nav-link text-white">
                <i class="fas fa-users me-2"></i>
                Mis equipos
            </a>
        </li>
        <li>
            <a href="{% url 'torneos' %}" class="nav-link text-white">
                <i class="fas fa-calendar-alt me-2"></i>
                Mis partidos
            </a>
        </li>
        <li>
            <a href="{% url 'canchas_lista' %}" class="nav-link text-white">
                <i class="fas fa-map-marker-alt me-2"></i>
                Canchas
            </a>
        </li>
        <li>
            <a href="{% url 'torneos' %}" class="nav-link text-white">
                <i class="fas fa-trophy me-2"></i>
                Torneos
            </a>
        </li>
    </ul>
    <hr>
    <!-- Settings and logout -->
    <ul class="nav nav-pills flex-column">
        <!-- <li>
            <a href="{% url 'torneos' %}" class="nav-link text-white">
                <i class="fas fa-cog me-2"></i>
                Configuración
            </a>
        </li> -->
        <li>
            <form action="{% url 'logout' %}" method="post" class="w-20">
                {% csrf_token %}
                <button type="submit" class="btn btn-warning w-100">Cerrar Sesión</button>
            </form>
        </li>
    </ul>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Obtener todos los enlaces de navegación
    const navLinks = document.querySelectorAll('.sidebar .nav-link');
    
    // Obtener la URL actual
    const currentPath = window.location.pathname;
    
    // Primero, quitar la clase active de todos los enlaces
    navLinks.forEach(link => {
        link.classList.remove('active');
    });
    
    // Caso especial: Página de inicio (cuando la URL es "/" o contiene "/home")
    if (currentPath.includes('/home')) {

        const homeLink = document.querySelector('.sidebar .nav-link i.fas.fa-home').closest('.nav-link');
        if (homeLink) {
            homeLink.classList.add('active');
            return; // Si estamos en inicio, no necesitamos verificar otros enlaces
        }
    }
    
    // Para otras páginas, buscar coincidencias por URL
    // Mapeo de rutas a identificadores de menú
    const routeMappings = {
        '/buscar_partidos': '.fas.fa-search',
        '/crear_partidos': '.fas.fa-plus-circle',
        '/estadisticas': '.fas.fa-calendar-alt:first-of-type',
        '/equipos': '.fas.fa-users',
        '/mis_partidos': '.fas.fa-calendar-alt:nth-of-type(2)',
        '/canchas': '.fas.fa-map-marker-alt',
        '/torneos': '.fas.fa-trophy',
        '/configuracion': '.fas.fa-cog',
        '/logout': '.fas.fa-sign-out-alt'
    };
    
    // Buscar coincidencia de ruta
    for (const [route, iconSelector] of Object.entries(routeMappings)) {
        if (currentPath.includes(route)) {
            const link = document.querySelector(`.sidebar .nav-link i${iconSelector}`).closest('.nav-link');
            if (link) {
                link.classList.add('active');
                break; // Una vez encontrada la coincidencia, salimos del bucle
            }
        }
    }
});
</script>

================
File: app/templates/components/top_nav.html
================
<!-- Top Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark p-3" style="background-color: #1E293B;">
    <div class="container-fluid">
        <!-- Sidebar Toggle -->
        <button class="btn btn-dark d-lg-none me-3" type="button">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Search Bar -->
        <form class="d-flex flex-grow-1 me-auto mb-2 mb-lg-0 mx-lg-3">
            <div class="input-group">
                <span class="input-group-text bg-dark border-0 text-success">
                    <i class="fas fa-search"></i>
                </span>
            </div>
        </form>
    
        
        <!-- User dropdown -->
        <div class="dropdown">
            <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                {% if current_user_avatar_url %}
                    <img src="{{ current_user_avatar_url }}" alt="Avatar" width="32" height="32" class="rounded-circle me-2">
                {% else %}
                    <img src="https://via.placeholder.com/32" alt="Avatar" width="32" height="32" class="rounded-circle me-2"> {# Fallback por si algo falla #}
                {% endif %}
                <span>{{ current_user_nombre|default:user.username }}</span> {# Muestra el nombre, o el email si el nombre no está #}
            </a>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark text-small" aria-labelledby="userDropdown">
                <li><a class="dropdown-item" href="{% url 'perfil' %}">Mi perfil</a></li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <form action="{% url 'logout' %}" method="post" class="dropdown-item p-0">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-link text-white-50 w-100 text-start px-3">Cerrar Sesión</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</nav>

================
File: app/templates/home.html
================
{% extends 'base.html' %}
{% block base %}
<!-- Dashboard Layout -->
<div class="d-flex flex-column flex-lg-row vh-100 overflow-hidden" style="background-color: #0F172A;">
    <!--  Nav -->
    {% include "components/nav.html" %}
    

    <!-- Main Content Area -->
    <div class="flex-grow-1 overflow-auto p-0 bg-black">
        {% include "components/top_nav.html" %}
        
        <!-- Dashboard Hero/Welcome Section -->
        <div class="container-fluid p-4">
            <!-- Welcome Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card border-0 shadow-sm" style="background-color: #2d3748; border-radius: 15px;">
                        <div class="card-body p-4">
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

================
File: app/templates/landing.html
================
{% extends 'base.html' %}
{% block base %}
<!-- Navbar -->
{% include "components/landing_nav.html" %}

<!-- Hero Section -->
<section id="hero" class="position-relative bg-black text-white overflow-hidden d-flex align-items-center" style="min-height: 85vh;">
    <!-- Overlay con gradiente dinámico -->
    <div class="position-absolute w-100 h-100 top-0 start-0" style="background: linear-gradient(135deg, rgba(0,0,0,0.92) 0%, rgba(19,38,19,0.85) 100%); z-index: 1;"></div>
    
    <!-- Patrón de fondo estilo cancha -->
    <div class="position-absolute w-100 h-100 top-0 start-0" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iNTAwIiB4PSIxMDAiIHk9IjI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iNTAwIiBjeT0iNTAwIiByPSI4MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDQwLDE2Nyw2OSwwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3Qgd2lkdGg9IjE4MCIgaGVpZ2h0PSIzMDAiIHg9IjEwMCIgeT0iMzUwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoNDAsMTY3LDY5LDAuMDUpIiBzdHJva2Utd2lkdGg9IjIiLz48cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjMwMCIgeD0iNzIwIiB5PSIzNTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSg0MCwxNjcsNjksMC4wNSkiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg=='); background-size: cover; background-position: center; z-index: 1; opacity: 0.1;"></div>
    
    <!-- Líneas de balón animadas -->
    <div class="position-absolute w-100 h-100" style="z-index: 1; opacity: 0.05;">
        <div class="position-absolute" style="top: 20%; left: 10%;">
            <div style="width: 200px; height: 200px; border: 2px dashed rgba(40,167,69,0.5); border-radius: 50%; transform: rotate(25deg);"></div>
        </div>
        <div class="position-absolute" style="bottom: 15%; right: 15%; animation: float 6s ease-in-out infinite 1s;">
            <div style="width: 150px; height: 150px; border: 2px dashed rgba(40,167,69,0.5); border-radius: 50%; transform: rotate(-15deg);"></div>
        </div>
    </div>
    
    <!-- Imagen de Ronaldo con efectos -->
    <div class="position-absolute w-100 h-100 top-0 end-0" style="width: 22%; z-index: 1; opacity: 0.75; animation: fadeInRight 1.2s ease-out forwards;">
        <img src="https://sportrenders.com/wp-content/uploads/2024/03/Ronaldo-Nazario-PNG-Inter-Football-Render.png" alt="Ronaldo" class="position-absolute end-0 bottom-0 h-100" style="object-fit: contain; filter: drop-shadow(0 0 20px rgba(40,167,69,0.3));">
        
        <!-- Efecto de resplandor detrás de Ronaldo -->
        <div class="position-absolute top-50 end-0 translate-middle-y" style="width: 200px; height: 500px; background: radial-gradient(ellipse at center, rgba(40,167,69,0.2) 0%, rgba(40,167,69,0) 70%); z-index: -1; filter: blur(20px);"></div>
    </div>
    
    <!-- Content con animaciones secuenciales -->
    <div class="container py-5 text-center position-relative" style="z-index: 2;">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                       
                <h1 class="display-3 fw-bold mb-4" style= "text-shadow: 0 4px 15px rgba(0,0,0,0.5);">
                    <span class="d-inline-block">Conecta,</span>
                    <span class="d-inline-block">Juega,</span>
                    <span class="d-inline-block text-success">Gana</span>
                </h1>
                
                <p class="lead mb-5">Encuentra partidos de fútbol cerca de ti, conecta con otros jugadores y disfruta del deporte rey sin preocuparte por nada más que <span class="typed-text fw-bold text-success">jugar y ganar.</span></p>
                
                <div class="d-flex justify-content-center gap-3">
                    <!-- Botón principal con efecto de pulso -->
                    <a href="{% url 'login' %}" class="btn btn-success btn-lg px-4 py-3 position-relative" style="box-shadow: 0 8px 25px rgba(40,167,69,0.3); overflow: hidden;">
                        <span class="position-absolute top-0 start-0 w-100 h-100 rounded" style="background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%); z-index: 0;"></span>
                        <span class="position-relative" style="z-index: 1;"><i class="fas fa-futbol me-2"></i> Únete ahora</span>
                    </a>
                    
                    <!-- Botón secundario con efecto de borde animado -->
                    <a href="{% url 'home' %}" class="btn btn-outline-light btn-lg px-4 py-3 position-relative" style="border-width: 2px; overflow: hidden;">
                        <span class="position-relative" style="z-index: 1;"><i class="fas fa-info-circle me-2"></i> Cómo funciona</span>
                    </a>
                </div>
                
                
            </div>
        </div>
    </div>
    
    <!-- Divisor de onda SVG animado -->
    <div class="position-absolute bottom-0 start-0 w-100" style="z-index: 3;">
        <svg id="wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 120" preserveAspectRatio="none" style="width: 100%; height: 80px;">
            <path fill="#1a202c" fill-opacity="1" d="M0,64L48,80C96,96,192,128,288,128C384,128,480,96,576,80C672,64,768,64,864,69.3C960,75,1056,85,1152,80C1248,75,1344,53,1392,42.7L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z"></path>
        </svg>
    </div>
</section>



<section id="caracteristicas" class="py-5 position-relative overflow-hidden" style="background-color: #1a202c !important; min-height: 55vh;">
    <!-- Decorative Elements - Soccer Elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1; opacity: 0.05;">
        <div class="position-absolute" style="top: 10%; left: 5%;">
            <i class="fas fa-futbol fa-5x"></i>
        </div>
        <div class="position-absolute" style="top: 80%; left: 25%;">
            <i class="fas fa-trophy fa-3x"></i>
        </div>
        <div class="position-absolute" style="top: 60%; right: 10%;">
            <i class="fas fa-futbol fa-4x"></i>
        </div>
        <div class="position-absolute" style="top: 20%; right: 15%;">
            <i class="fas fa-whistle fa-3x"></i>
        </div>
    </div>


<!-- Features Section - Retro-Modern Style with Side Image -->
<section id="caracteristicas" class="py-5 position-relative overflow-hidden" style="background-color: #1a202c !important; min-height: 55vh;">
    <!-- Left Side Background Image -->
    <div class="position-absolute h-100 w-100 d-none d-lg-block" style="width: 22%; z-index: 1; opacity: 0.65;">
        <img src="https://sportrenders.com/wp-content/uploads/2023/10/Ronaldo-PNG-Render-Transparent-Brazil-Free-Image-World-Cup-Football-Sport-Renders-1.png" alt="Ronaldo el de verdad" class="h-100 w-100" style="object-fit: contain; object-position: left center;">
    </div>

    <!-- Decorative Elements - Soccer Elements -->
    <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 1; opacity: 0.05;">
        <div class="position-absolute" style="top: 10%; left: 5%;">
            <i class="fas fa-futbol fa-5x"></i>
        </div>
        <div class="position-absolute" style="top: 80%; left: 25%;">
            <i class="fas fa-trophy fa-3x"></i>
        </div>
        <div class="position-absolute" style="top: 60%; right: 10%;">
            <i class="fas fa-futbol fa-4x"></i>
        </div>
        <div class="position-absolute" style="top: 20%; right: 15%;">
            <i class="fas fa-whistle fa-3x"></i>
        </div>
    </div>

    <div class="container position-relative" style="z-index: 2;">
        <!-- Section Header -->
        <div class="text-center mb-5">
            <h2 class="fw-bold text-white display-5 mb-3">El fútbol de los 90 con la tecnología del presente</h2>
            <p class="lead text-white-50 mb-5">Recupera la esencia del fútbol callejero con herramientas digitales que facilitan la organización</p>
        </div>
        
        <!-- Features Cards -->
        <div class="row g-4">
            <!-- Feature 1 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 bg-dark text-white shadow-lg" style="background-color: #2d3748 !important; border-radius: 1rem; overflow: hidden; transition: transform 0.3s;">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                            {% include 'components/svg/landing_location.html' %}
                        </div>
                        <h4 class="card-title">Encuentra partidos cercanos</h4>
                        <p class="card-text text-white-50">Localiza partidos de barrio en tu zona, como en los viejos tiempos pero sin tener que recorrer las calles para encontrarlos.</p>
                    </div>
                </div>
            </div>
            
            <!-- Feature 2 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 bg-dark text-white shadow-lg wow animate__animated animate__fadeInUp" data-wow-delay="0.3s" style="background-color: #2d3748 !important; border-radius: 1rem; overflow: hidden; transition: transform 0.3s;">
                    <div class="card-body text-center p-4">

                        <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                            {% include 'components/svg/landing_team.html' %}
                        </div>

                        <h4 class="card-title">Crea tu equipo de barrio</h4>
                        <p class="card-text text-white-50">Forma tu propio equipo con amigos o conoce nuevos jugadores, como cuando armábamos equipos improvisados en la plaza.</p>
                    </div>
                    
                </div>
            </div>
            
            <!-- Feature 3 -->
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 bg-dark text-white shadow-lg " style="background-color: #2d3748 !important; border-radius: 1rem; overflow: hidden; transition: transform 0.3s;">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle mx-auto d-flex align-items-center justify-content-center mb-4" style="width: 80px; height: 80px;">
                            {% include 'components/svg/landing_player.html' %}
                        </div>
                        <h4 class="card-title">Organiza partidos sin complicaciones</h4>
                        <p class="card-text text-white-50">Programa tus partidos sin las llamadas infinitas de antaño. Reserva canchas y confirma asistencia con un solo clic.</p>
                    </div>
                    
                </div>
            </div>
        </div>        
    </div>
</section>

<!-- How It Works Section -->
 <section id="como-funciona" class="py-5" style="background-color: #111827 !important;">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold text-white">¿Cómo funciona?</h2>
            <p class="lead text-white-50">Es muy sencillo comenzar a usar FútbolConnect</p>
        </div>
        
        <div class="row align-items-center">
            <div class="col-lg-6">
                <!-- <img src="https://phantom-marca.uecdn.es/a2289a02c290eab98d75ead5f5236422/f/webp/assets/multimedia/imagenes/2020/03/26/15852159092839.jpg" alt="App Screenshot" class="img-fluid rounded mb-4 mb-lg-0"> -->
                <img src="https://pbs.twimg.com/media/DWL7apFXcAAutkq.jpg" alt="" class="img-fluid rounded mb-4 mb-lg-0">
            </div>
            <div class="col-lg-6">
                <div class="d-flex mb-4">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>1</strong>
                    </div>
                    <div>
                        <h5 class="text-white">Crea tu perfil</h5>
                        <p class="text-white-50">Regístrate y completa tu perfil con tu posición, nivel y disponibilidad.</p>
                    </div>
                </div>
                
                <div class="d-flex mb-4 wow animate__animated animate__fadeInRight" data-wow-delay="0.3s">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>2</strong>
                    </div>
                    <div>
                        <h5 class="text-white">Busca partidos</h5>
                        <p class="text-white-50">Encuentra partidos cercanos usando el mapa o crea tu propio partido.</p>
                    </div>
                </div>
                
                <div class="d-flex mb-4 wow animate__animated animate__fadeInRight" data-wow-delay="0.5s">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>3</strong>
                    </div>
                    <div>
                        <h5 class="text-white">Únete o invita</h5>
                        <p class="text-white-50">Solicita unirte a un partido existente o invita a otros jugadores al tuyo.</p>
                    </div>
                </div>
                
                <div class="d-flex wow animate__animated animate__fadeInRight" data-wow-delay="0.7s">
                    <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white me-3" style="min-width: 50px; height: 50px;">
                        <strong>4</strong>
                    </div>
                    <div>
                        <h5 class="text-white">¡A jugar!</h5>
                        <p class="text-white-50">Disfruta del partido y después valora a tus compañeros.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer Mejorado -->
<footer class="py-5" style="background-color: #0a0a0a;">
    <div class="container">
        <!-- Main Footer Content -->
        <div class="row mb-4">
            <!-- Brand Column -->
            <div class="col-lg-4 mb-4 mb-lg-0">
                <div class="d-flex align-items-center mb-3">
                    {% include 'components/svg/logo.html' %}
                    <h3 class="text-white fw-bold mb-0">FútbolConnect</h3>
                </div>
                <p class="text-white-50 mb-4">Conectando jugadores desde el barrio hasta el estadio.</p>

                <p class="text-white-50 mb-4">Reviviendo la pasión del fútbol callejero con la tecnología de hoy.</p>
                <div class="d-flex gap-3 mb-3">
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-facebook-f text-success"></i>
                    </a>
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-instagram text-success"></i>
                    </a>
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-twitter text-success"></i>
                    </a>
                    <a href="#" class="btn btn-dark btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width: 38px; height: 38px; transition: all 0.3s;">
                        <i class="fab fa-youtube text-success"></i>
                    </a>
                </div>
            </div>
            
            <!-- Quick Links -->
            <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                <h5 class="text-white mb-4">Enlaces</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="#inicio" class="text-white-50 text-decoration-none hover-success">Inicio</a></li>
                    <li class="mb-2"><a href="#caracteristicas" class="text-white-50 text-decoration-none hover-success">Características</a></li>
                    <li class="mb-2"><a href="#como-funciona" class="text-white-50 text-decoration-none hover-success">Cómo Funciona</a></li>
                    <li class="mb-2"><a href="#testimonios" class="text-white-50 text-decoration-none hover-success">Testimonios</a></li>
                </ul>
            </div>
            
            <!-- Legal Links -->
            <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                <h5 class="text-white mb-4">Legal</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">Privacidad</a></li>
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">Términos</a></li>
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">Cookies</a></li>
                    <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none hover-success">FAQ</a></li>
                </ul>
            </div>
            
            <!-- Contact / Newsletter -->
            <div class="col-lg-4">
                <h5 class="text-white mb-4">¡Mantente conectado!</h5>
                <p class="text-white-50 mb-3">Suscríbete para recibir novedades, partidos destacados y promociones.</p>
                <div class="input-group mb-3">
                    <input type="email" class="form-control bg-dark border-success text-white" placeholder="Tu email" aria-label="Email" style="border-top-right-radius: 0; border-bottom-right-radius: 0;">
                    <button class="btn btn-success" type="button" style="border-top-left-radius: 0; border-bottom-left-radius: 0;">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Footer Bottom / Copyright -->
        <div class="border-top border-secondary pt-4">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="text-white-50 small mb-0">© 2025 XXX. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="text-white-50 small mb-0">Reviviendo el fútbol callejero</p>
                </div>
            </div>
        </div>
    </div>
</footer>
<style>
    /* Animaciones básicas */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeInLeft {
        from { opacity: 0; transform: translateX(-30px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(50px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
    /* Animaciones avanzadas */
    @keyframes pulse {
        0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(40,167,69,0.7); }
        70% { transform: scale(1); box-shadow: 0 0 0 15px rgba(40,167,69,0); }
        100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(40,167,69,0); }
    }
    
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
        100% { transform: translateY(0px); }
    }
    
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }
    
    @keyframes shimmer {
        0% { opacity: 0.8; }
        50% { opacity: 1; }
        100% { opacity: 0.8; }
    }
    
    @keyframes borderMove {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(300%); }
    }
    
    /* Estilos para botones con efecto hover */
    .btn {
        transition: all 0.3s ease;
    }
    
    .btn-success:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(40,167,69,0.4) !important;
    }
    
    .btn-outline-light:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(255,255,255,0.1) !important;
    }
</style>

{% endblock %}

================
File: app/models.py
================
from datetime import timedelta
from django.utils import timezone
from django.db import models
from django.contrib.auth.models import AbstractUser
from django.utils.translation import gettext_lazy as _
from django.core.validators import MinValueValidator
import uuid


from django.db import models


#EXPLICAR JI EL PORQUÉ DE LOS ID, ASÍ SE PUEDE 'ENGAÑAR AL USUARIO'

class User(AbstractUser):
    TIPO_GENERO = [
        ('MASCULINO', 'Masculino'),
        ('FEMENINO', 'Femenino'),
        ('NO_ESPECIFICADO', 'Prefiero no decirlo'),
        ('OTRO', 'Otro'),
    ]

    TIPO_POSICION = [
        ('DELANTERO', 'Delantero'),
        ('CENTROCAMPISTA', 'Centrocampista'),
        ('DEFENSA', 'Defensa'),
        ('PORTERO', 'Portero')
    ]

    username = models.EmailField(max_length=150, unique=True, verbose_name="email", help_text="Introduce un email válido",)
    nombre = models.CharField(max_length=150)
    fecha_nacimiento = models.DateField(null=True, blank=True)

    genero = models.CharField(max_length=20, choices=TIPO_GENERO, default='NO_ESPECIFICADO', blank=True, null=True)
    
    posicion = models.CharField(max_length=50,choices=TIPO_POSICION, blank=True, null=True)
    partidos_jugados = models.IntegerField(default=0)
    victorias = models.IntegerField(default=0)
    derrotas = models.IntegerField(default=0)
    empates = models.IntegerField(default=0)
     
    calificacion = models.FloatField(default=1000.0)  # ELO

    imagen_perfil = models.ImageField(upload_to='profile_pictures/', blank=True, null=True)
    banner_perfil = models.ImageField(upload_to='banner_perfil/', blank=True, null=True)
    ubicacion = models.CharField(max_length=255, blank=True, null=True)
    #HAY QUE MANEJAR LA FOTO DE PERFIL Y BANNER POR DEFECTO Y SI NO LA PONE
    #QUE SE PONGA UNA SEGUN EL NIVEL QUE TENGA DE UN JUGADOR U OTRO


    def __str__(self):
        return self.nombre
    
    def save(self, *args, **kwargs):
        #CASO DE QUE USUARIO CAMBIE DE EMAIL POR PERDIDA DE CONTRASEÑA
        if self.pk:  # Si ya es un usuario existente
            originalUser = User.objects.get(pk=self.pk)
            if originalUser.email != self.email:  # si cambia el email
                self.username = self.email  # actualizo el username

        super().save(*args, **kwargs)


class Cancha(models.Model):
    TIPO_CHOICES = [
        ('SALA', 'Fútbol Sala'),
        ('F7', 'Fútbol 7'),
        ('F11', 'Fútbol 11'),
    ]
    
    PROPIEDAD_CHOICES = [
        ('PUBLICA', 'Pública'),
        ('PRIVADA', 'Privada'),
    ]

    SUPERFICIE_CHOICES = [
        ('FUTBOL SALA','Fútbol sala'),
        ('CESPED ARTIFICIAL','Césped artificial'),
        ('CESPED NATURAL','Césped natural'),
        ('TIERRA','Tierra'),
        ('CEMENTO','Cemento')
    ]
    
    id_cancha = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    nombre_cancha = models.CharField(max_length=100)
    ubicacion = models.CharField(max_length=255)
    tipo = models.CharField(max_length=4, choices=TIPO_CHOICES)
    superficie = models.CharField(max_length=50,choices=SUPERFICIE_CHOICES)
    propiedad = models.CharField(max_length=7, choices=PROPIEDAD_CHOICES)
    costo_partido = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    descripcion = models.TextField(null=True, blank=True)
    disponible = models.BooleanField(default=True, null=True, blank=True)
    imagen = models.ImageField(upload_to='images/canchas_pictures/', null=True, blank=True)
    
    def __str__(self):
        return f"{self.nombre_cancha} - {self.get_tipo_display()}"
    

class Equipo(models.Model):

    TIPO_EQUIPO_CHOICES = [
        ('PARTIDO', 'Equipo para un partido'),
        ('TORNEO', 'Equipo para torneo'),
        ('PERMANENTE', 'Equipo permanente'),
    ]
    
    id_equipo = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    nombre_equipo = models.CharField(max_length=100)
    capitan = models.ForeignKey(User, on_delete=models.CASCADE, related_name='get_user_captain')
    jugadores = models.ManyToManyField(User, related_name='equipos')
    fecha_creacion = models.DateTimeField(auto_now_add=True)
    descripcion = models.TextField(blank=True)
    team_shield = models.ImageField(upload_to='team_shield/', null=True, blank=True)
    team_banner = models.ImageField(upload_to='banner_perfil/', blank=True, null=True)
    tipo_equipo = models.CharField(max_length=10, choices=TIPO_EQUIPO_CHOICES)
    activo = models.BooleanField(default=True)
    
    def __str__(self):
        return self.nombre
    
    def calificacion_promedio(self):
        jugadores = self.jugadores.all()
        if not jugadores.exists():
            return 1000.0
        return sum(j.calificacion for j in jugadores) / jugadores.count() 

class Torneo(models.Model):
    ESTADO_CHOICES = [
        ('PENDIENTE', 'Pendiente'),
        ('EN_CURSO', 'En curso'),
        ('FINALIZADO', 'Finalizado'),
        ('CANCELADO', 'Cancelado'),
    ]
    
    TIPO_CHOICES = [
        ('SALA', 'Fútbol Sala'),
        ('F7', 'Fútbol 7'),
        ('F11', 'Fútbol 11'),
    ]
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    nombre_torneo = models.CharField(max_length=100)
    descripcion = models.TextField()
    fecha_inicio = models.DateField()
    fecha_fin = models.DateField()
    equipos = models.ManyToManyField(Equipo, related_name='torneos')
    estado = models.CharField(max_length=10, choices=ESTADO_CHOICES, default='PENDIENTE')
    tipo = models.CharField(max_length=4, choices=TIPO_CHOICES)
    costo_inscripcion = models.DecimalField(max_digits=10, decimal_places=2, default=0)
    premio = models.CharField(max_length=255, blank=True)
    num_max_equipos = models.PositiveIntegerField(default=8)
    
    def __str__(self):
        return f"{self.nombre} ({self.get_estado_display()})"

class Partido(models.Model):
    TIPO_CHOICES = [
        ('SALA', 'Fútbol Sala'),
        ('F7', 'Fútbol 7'),
        ('F11', 'Fútbol 11'),
    ]
    
    MODALIDAD_CHOICES = [
        ('AMISTOSO', 'Amistoso'),
        ('COMPETITIVO', 'Competitivo'),
        ('TORNEO', 'Partido de Torneo'),
    ]
    
    NIVEL_CHOICES = [ 
        ('', 'Cualquier nivel'),
        ('PRINCIPIANTE', 'Principiante'),
        ('INTERMEDIO', 'Intermedio'),
        ('AVANZADO', 'Avanzado'),
        ('PRO', 'Profesional/Muy Alto'),
    ]

    ESTADO_CHOICES = [
        ('PROGRAMADO', 'Programado'),
        ('EN_CURSO', 'En curso'),
        ('FINALIZADO', 'Finalizado'),
        ('CANCELADO', 'Cancelado'),
    ]
    
    METODO_PAGO_CHOICES = [
        ('EFECTIVO', 'Efectivo'),
        ('Bizum', 'Bizum'),
        ('GRATIS', 'Gratuito'),
    ]

    id_partido = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    fecha = models.DateTimeField(verbose_name="Fecha y Hora de Inicio")
    fecha_limite_inscripcion = models.DateTimeField(
        verbose_name="Fecha Límite de Inscripción",
        blank=True, null=True,
        help_text="Hasta cuándo se pueden inscribir los jugadores. Si se deja en blanco, se calculará una hora antes del partido."
    )

    cancha = models.ForeignKey(Cancha, on_delete=models.CASCADE, related_name='get_cancha_partido')
    tipo = models.CharField(max_length=4, choices=TIPO_CHOICES)
    nivel = models.CharField(max_length=50, choices=NIVEL_CHOICES, blank=True, null=True)
    modalidad = models.CharField(max_length=11, choices=MODALIDAD_CHOICES, blank=True, null=True)
    max_jugadores = models.PositiveIntegerField(validators=[MinValueValidator(2)])
    costo = models.DecimalField(max_digits=10, decimal_places=2, default=0, blank=True, null=True)
    metodo_pago = models.CharField(max_length=13, choices=METODO_PAGO_CHOICES, blank=True, null=True)
    creador = models.ForeignKey(User, on_delete=models.CASCADE, related_name='get_user_creador')
    jugadores = models.ManyToManyField(User, related_name='partidos', blank=True)
    equipo_local = models.ForeignKey(Equipo, on_delete=models.SET_NULL, null=True, blank=True, related_name='get_equipo_local')
    equipo_visitante = models.ForeignKey(Equipo, on_delete=models.SET_NULL, null=True, blank=True, related_name='get_equipo_visitante')
    goles_local = models.PositiveIntegerField(null=True, blank=True)
    goles_visitante = models.PositiveIntegerField(null=True, blank=True)
    estado = models.CharField(max_length=10, choices=ESTADO_CHOICES, default='PROGRAMADO')
    torneo = models.ForeignKey(Torneo, on_delete=models.SET_NULL, null=True, blank=True, related_name='get_torneo_partido')
    calificacion_actualizada = models.BooleanField(default=False)
    comentarios = models.TextField(blank=True, null=True)

    @property
    def fecha_fin_calculada(self): # Propiedad para calcular la hora de finalización (1 hora después)
        if self.fecha:
            return self.fecha + timedelta(hours=1)
        return None
    
    @property
    def inscripcion_abierta(self): #Determina si la inscripción al partido sigue abierta.
        
        ahora = timezone.now()
        limite = self.fecha_limite_inscripcion_efectiva
        return self.estado == 'PROGRAMADO' and ahora < limite and self.jugadores.count() < self.max_jugadores
    
    @property
    def fecha_limite_inscripcion_efectiva(self): #Devuelve la fecha límite de inscripción, calculándola si no está definida.
        
        if self.fecha_limite_inscripcion:
            return self.fecha_limite_inscripcion
        if self.fecha:
            return self.fecha - timedelta(hours=1) # Por defecto, 1 hora antes del partido
        return None
    
    def save(self, *args, **kwargs): # Calcular fecha_limite_inscripcion por defecto si no se provee

        if not self.fecha_limite_inscripcion and self.fecha:
            self.fecha_limite_inscripcion = self.fecha - timedelta(hours=1)
        super().save(*args, **kwargs)


    def actualizar_calificaciones(self):
        if self.calificacion_actualizada or self.modalidad == 'AMISTOSO':
            return

        if not self.equipo_local or not self.equipo_visitante:
            return  

        if self.goles_local is None or self.goles_visitante is None:
            return

        K = 32  # Constante de sensibilidad ELO

        rating_local = self.equipo_local.calificacion_promedio()
        rating_visitante = self.equipo_visitante.calificacion_promedio()

        if self.goles_local > self.goles_visitante:
            score_local = 1
        elif self.goles_local < self.goles_visitante:
            score_local = 0
        else:
            score_local = 0.5

        score_visitante = 1 - score_local

        expected_local = 1 / (1 + 10 ** ((rating_visitante - rating_local) / 400))
        expected_visitante = 1 - expected_local

        for jugador in self.equipo_local.jugadores.all():
            calificacion_antes = jugador.calificacion
            jugador.calificacion += K * (score_local - expected_local)
            jugador.save()

            HistorialELO.objects.create(
                user=jugador,
                partido=self,
                calificacion_antes=calificacion_antes,
                calificacion_despues=jugador.calificacion
            )

        for jugador in self.equipo_visitante.jugadores.all():
            calificacion_antes = jugador.calificacion
            jugador.calificacion += K * (score_visitante - expected_visitante)
            jugador.save()

            HistorialELO.objects.create(
                user=jugador,
                partido=self,
                calificacion_antes=calificacion_antes,
                calificacion_despues=jugador.calificacion
            )

        self.calificacion_actualizada = True
        self.save(update_fields=['calificacion_actualizada'])



    def __str__(self):
        hora_inicio_str = self.fecha.strftime('%d/%m/%Y %H:%M') if self.fecha else "Fecha no definida"
        hora_fin_str = self.fecha_fin_calculada.strftime('%H:%M') if self.fecha_fin_calculada else ""
        nombre_cancha_str = self.cancha.nombre_cancha if self.cancha else "Cancha no definida"
        
        return f"Partido en {nombre_cancha_str} - {hora_inicio_str} a {hora_fin_str}"
    
    def __str__(self):
        if self.equipo_local and self.equipo_visitante:
            return f"{self.equipo_local} vs {self.equipo_visitante} - {self.fecha.strftime('%d/%m/%Y %H:%M')}"
        return f"Partido en {self.cancha.nombre} - {self.fecha.strftime('%d/%m/%Y %H:%M')}"

class Resultado(models.Model):
    partido = models.OneToOneField(Partido, on_delete=models.CASCADE, related_name='get_partido_resultado')
    goles_local = models.PositiveIntegerField(default=0)
    goles_visitante = models.PositiveIntegerField(default=0)
    fecha_registro = models.DateTimeField(auto_now_add=True)
    
    def __str__(self):
        return f"Resultado: {self.partido}"

class Inscripcion(models.Model):
    TIPO_CHOICES = [
        ('JUGADOR_PARTIDO', 'Jugador a Partido'),
        ('EQUIPO_TORNEO', 'Equipo a Torneo'),
    ]
    
    ESTADO_CHOICES = [
        ('PENDIENTE', 'Pendiente'),
        ('ACEPTADA', 'Aceptada'),
        ('RECHAZADA', 'Rechazada'),
    ]
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    tipo = models.CharField(max_length=15, choices=TIPO_CHOICES)
    fecha_inscripcion = models.DateTimeField(auto_now_add=True)
    estado = models.CharField(max_length=10, choices=ESTADO_CHOICES, default='PENDIENTE')
    
    # Para inscripciones de jugadores a partidos
    jugador = models.ForeignKey(User, on_delete=models.CASCADE, null=True, blank=True, related_name='get_jugador_inscripcion')
    partido = models.ForeignKey(Partido, on_delete=models.CASCADE, null=True, blank=True, related_name='get_partido_inscripcion')
    
    # Para inscripciones de equipos a torneos
    equipo = models.ForeignKey(Equipo, on_delete=models.CASCADE, null=True, blank=True, related_name='get_equipo_inscripcionTorneo')
    torneo = models.ForeignKey(Torneo, on_delete=models.CASCADE, null=True, blank=True, related_name='get_jugador_inscripcionTorneo')
    
    pago_confirmado = models.BooleanField(default=False)
    comentarios = models.TextField(blank=True)
    
    def __str__(self):
        if self.tipo == 'JUGADOR_PARTIDO':
            return f"{self.jugador.username} - {self.partido}"
        return f"{self.equipo.nombre} - {self.torneo.nombre}"

class HistorialELO(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='get_user_historialElo')
    partido = models.ForeignKey(Partido, on_delete=models.CASCADE, related_name='get_partido_historialElo')
    calificacion_antes = models.FloatField()
    calificacion_despues = models.FloatField()
    fecha = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"{self.user.nombre} ({self.fecha.strftime('%d/%m/%Y')}) - {self.calificacion_antes} → {self.calificacion_despues}"

================
File: app/forms.py
================
from django import forms
from .models import *
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth import get_user_model
from django.utils import timezone as django_timezone
from datetime import datetime, time, timezone
from django.utils.timezone import make_aware

class UserRegisterForm(UserCreationForm):
    class Meta:
        model = get_user_model()
        fields = ( 'username', 'nombre')


    def clean_email(self):
        email = self.cleaned_data.get('email')  
        if email and User.objects.filter(email=email).exclude(id=self.instance.id).exists():
            raise forms.ValidationError('El email introducido ya está registrado, ¡debes introducir otro!')
        return email

class UserUpdateProfilelForm(forms.ModelForm):

    fecha_nacimiento = forms.DateField(widget=forms.DateInput(attrs={'type': 'date'}),required=False)
    imagen_perfil = forms.ImageField(required=False) 
    banner_perfil = forms.ImageField(required=False)
    
    class Meta:
        model = User
        fields = ('nombre','fecha_nacimiento', 'genero','posicion','ubicacion', 'imagen_perfil', 'banner_perfil' )

    def __init__(self, *args, **kwargs):

        super(UserUpdateProfilelForm, self).__init__(*args, **kwargs)
        
        self.fields['nombre'].widget.attrs.update({'placeholder': 'Tu nombre completo'})

        self.fields['ubicacion'].widget.attrs.update({'placeholder': 'Ciudad, Provincia'})

class PartidoForm(forms.ModelForm):
    
    dia_partido = forms.DateField(
        widget=forms.DateInput(
            attrs={
                'type': 'date',
                'class': 'form-control bg-dark text-white border-secondary',
                
            }
        ),
        label="Día del Partido"
    )

    HORARIOS_CHOICES = [] #PONER TAMBIEN EN EL MODELO
    for hora in range(10, 23): 
        HORARIOS_CHOICES.append((time(hora, 0).strftime('%H:%M'), f"{hora:02d}:00"))
        

    hora_inicio_partido = forms.ChoiceField(
        choices=HORARIOS_CHOICES,
        widget=forms.Select(attrs={'class': 'form-select bg-dark text-white border-secondary'}),
        label="Hora de Inicio del Partido"
    )

    cancha = forms.ModelChoiceField(
        queryset=Cancha.objects.filter(disponible=True).order_by('nombre_cancha'),
        widget=forms.Select(attrs={'class': 'form-select bg-dark text-white border-secondary'}),
        label="Cancha",
        empty_label="Selecciona una cancha"
    )
    
    nivel = forms.ChoiceField(
        choices=Partido.NIVEL_CHOICES,
        required=False,
        widget=forms.Select(),
        label="Nivel Estimado del Partido"
    )

    class Meta:
        model = Partido
        fields = [
            'cancha', 'tipo', 'nivel', 'modalidad',
            'max_jugadores', 'costo', 'metodo_pago', 'comentarios'
        ]

    def clean(self):
        cleaned_data = super().clean()
        dia = cleaned_data.get('dia_partido')
        hora_str = cleaned_data.get('hora_inicio_partido') 
        cancha = cleaned_data.get('cancha')

        dia_limite_str = cleaned_data.get('fecha_limite_inscripcion_dia')
        hora_limite_str = cleaned_data.get('fecha_limite_inscripcion_hora')


        if not dia:
            self.add_error('dia_partido', "Debes seleccionar un día para el partido.")
            return cleaned_data
        
        if not hora_str:
            self.add_error('hora_inicio_partido', "Debes seleccionar una hora de inicio.")
            return cleaned_data

        # Convertir la hora_str a un objeto time
        try:
            hora_obj = datetime.strptime(hora_str, '%H:%M').time()
        except ValueError:
            self.add_error('hora_inicio_partido', "Hora de inicio inválida.")
            return cleaned_data

        # Combinar día y hora para crear el datetime de inicio
        naive_datetime = datetime.combine(dia, hora_obj)
        fecha_inicio = make_aware(naive_datetime)

        # Validar que la fecha de inicio no sea en el pasado
        if fecha_inicio < django_timezone.now():
            self.add_error('dia_partido', 'La fecha y hora de inicio del partido no puede ser en el pasado.')
            self.add_error('hora_inicio_partido', 'La fecha y hora de inicio del partido no puede ser en el pasado.')
            return cleaned_data # Detener si la fecha es inválida

        # Guardar el datetime combinado en cleaned_data para que la vista lo use
        cleaned_data['fecha'] = fecha_inicio

        if dia_limite_str and hora_limite_str: # Si el usuario proporcionó ambos
            try:
                hora_limite_obj = datetime.strptime(hora_limite_str, '%H:%M').time()
                naive_limite_dt = datetime.combine(dia_limite_str, hora_limite_obj)
                fecha_limite = django_timezone.make_aware(naive_limite_dt)
                if fecha_limite >= fecha_inicio:
                    self.add_error('fecha_limite_inscripcion_dia', 'La fecha límite de inscripción debe ser anterior a la fecha del partido.')
                else:
                    cleaned_data['fecha_limite_inscripcion'] = fecha_limite
            except ValueError:
                self.add_error('fecha_limite_inscripcion_hora', 'Hora límite de inscripción inválida.')
        elif dia_limite_str or hora_limite_str: # Si solo proporcionó uno
             self.add_error('fecha_limite_inscripcion_dia', 'Debes proporcionar tanto el día como la hora para la fecha límite, o dejar ambos en blanco para usar el valor por defecto (1h antes del partido).')
        else:
            # Si se dejan en blanco, el modelo lo calculará en save()
            cleaned_data['fecha_limite_inscripcion'] = None # Indicar que se use el default del modelo/save

        
        if cancha: 
            fecha_fin_propuesta = fecha_inicio + timedelta(hours=1)

            partidos_conflictivos_query = Partido.objects.filter(
                cancha=cancha,
                estado__in=['PROGRAMADO', 'EN_CURSO'],
                fecha__lt=fecha_fin_propuesta, 
            )

            if self.instance and self.instance.pk: 
                partidos_conflictivos_query = partidos_conflictivos_query.exclude(pk=self.instance.pk)
            
            for partido_existente in partidos_conflictivos_query:
                fin_existente = partido_existente.fecha + timedelta(hours=1)
                if fin_existente > fecha_inicio:
                    self.add_error('hora_inicio_partido', forms.ValidationError(
                        f"La cancha '{cancha.nombre_cancha}' ya está reservada de "
                        f"{partido_existente.fecha.strftime('%H:%M')} a {fin_existente.strftime('%H:%M')} "
                        f"el {partido_existente.fecha.strftime('%d/%m/%Y')}. "
                        f"Por favor, elige otro horario o cancha.",
                        code='solapamiento'
                    ))
                    self.add_error('cancha', "Horario no disponible.")
                    break 
        
        # Lógica de costo y método de pago 
        costo = cleaned_data.get("costo")
        metodo_pago = cleaned_data.get("metodo_pago")
        if costo is not None:
            if costo > 0 and metodo_pago == 'GRATIS':
                self.add_error('metodo_pago', 'Si el partido tiene un costo, el método de pago no puede ser "Gratis".')
            elif costo == 0 and metodo_pago != 'GRATIS' and metodo_pago is not None:
                 cleaned_data['metodo_pago'] = 'GRATIS'
        elif metodo_pago != 'GRATIS' and metodo_pago is not None:
             self.add_error('costo', 'Debes especificar un costo o seleccionar "Gratis" como método de pago si el campo costo está vacío.')

        return cleaned_data
    
class AsignarEquiposForm(forms.Form):
    def __init__(self, *args, **kwargs):
        jugadores_inscritos = kwargs.pop('jugadores_inscritos', None)
        partido = kwargs.pop('partido', None)
        super().__init__(*args, **kwargs)

        EQUIPO_CHOICES = [
            ('', 'Sin Asignar'), 
            ('local', 'Equipo Local'),
            ('visitante', 'Equipo Visitante'),
        ]

        if jugadores_inscritos:
            for jugador in jugadores_inscritos:
                initial_assignment = ''
                if partido and partido.equipo_local and jugador in partido.equipo_local.jugadores.all():
                    initial_assignment = 'local'
                elif partido and partido.equipo_visitante and jugador in partido.equipo_visitante.jugadores.all():
                    initial_assignment = 'visitante'
                

                self.fields[f'jugador_{jugador.id}'] = forms.ChoiceField(
                    choices=EQUIPO_CHOICES,
                    required=False,
                    label=jugador.nombre,
                    initial=initial_assignment,
                    widget=forms.Select(attrs={'class': 'form-select form-select-sm mb-1 d-none player-assignment-select', 'data-jugador-id': jugador.id}) 
                )
    

class ResultadoPartidoForm(forms.Form):
    goles_local = forms.IntegerField(
        label="Goles del Equipo Local",
        min_value=0,
        widget=forms.NumberInput(attrs={'class': 'form-control bg-dark text-white border-secondary', 'placeholder': '0'})
    )
    goles_visitante = forms.IntegerField(
        label="Goles del Equipo Visitante",
        min_value=0,
        widget=forms.NumberInput(attrs={'class': 'form-control bg-dark text-white border-secondary', 'placeholder': '0'})
    )

    
class CanchasForm(forms.ModelForm):
    class Meta:
        model = Cancha
        fields = ['nombre_cancha', 'ubicacion', 'tipo', 'propiedad', 'superficie',
                 'costo_partido', 'descripcion', 'disponible', 'imagen']
        
        def __init__(self, *args, **kwargs):
            super(CanchasForm, self).__init__(*args, **kwargs)
        
            # Nombres personalizados para los campos
            self.fields['nombre_cancha'].label = "Nombre de la cancha"
            self.fields['ubicacion'].label = "Dirección completa"
            self.fields['tipo'].label = "Tipo de cancha"
            self.fields['propiedad'].label = "Tipo de propiedad"
            self.fields['costo_por_hora'].label = "Precio por hora"
            self.fields['descripcion'].label = "Descripción"
            self.fields['disponible'].label = "Disponible para reservas"
            self.fields['imagen'].label = "Imagen de la cancha"

================
File: app/urls.py
================
from django.urls import path
from .views import *

urlpatterns = [
    path('', Landing.as_view(), name='landing'),

#REGISTRO
    path('registro',UserRegister.as_view(), name='registro' ),

#PERFIL
    path('perfil', Perfil.as_view(), name='perfil'),
    path('update_profile',UserUpdateProfile.as_view(), name='update_profile'),
    
#PARTIDOS
    path('crear_partidos', CrearPartidos.as_view(), name='crear_partidos'),

    path('buscar_partidos/', BuscarPartidos.as_view(), name='buscar_partidos'),
    path('partido/<uuid:partido_id>/inscribirse/', InscribirsePartidoView.as_view(), name='inscribirse_partido'),
    path('partido/<uuid:pk>/', DetallePartidoView.as_view(), name='detalle_partido'),
    path('partido/<uuid:pk>/registrar_resultado/', RegistrarResultadoPartidoView.as_view(), name='registrar_resultado_partido'),



    path('home', Home.as_view(), name='home'),
    #SECCIONES



    #CANCHAS
    path('canchas/', CanchasView.as_view(), name='canchas_lista'), 
    path('canchas/registrar/', RegistrarCanchaView.as_view(), name='canchas_registrar'),
    path('cancha/<uuid:pk_cancha>/', DetalleCanchaView.as_view(), name='detalle_cancha'),


    path('torneos', Torneos.as_view(), name='torneos'),
    
    path('estadisticas', Estadisticas.as_view(), name='estadisticas'),


    



]

================
File: app/views.py
================
from datetime import timezone
from django.shortcuts import render
from django.urls import reverse_lazy
from django.views.generic import ListView ,TemplateView, CreateView, DetailView, UpdateView, DeleteView, FormView, View
from django.contrib import messages
from django.contrib.auth.views import LoginView
from django.db.models import Count, Case, When, BooleanField
from django.shortcuts import get_object_or_404, redirect

from django.contrib.auth import get_user_model


from .forms import *
from .models import *
from django.contrib.auth.mixins import LoginRequiredMixin
from django.contrib.auth.forms import *
User = get_user_model() 

# LANDING
class Landing(TemplateView):
    template_name = 'landing.html'

#REGISTRO
class UserRegister(CreateView):
    form_class = UserRegisterForm
    template_name = 'registration/registro.html'
    success_url = reverse_lazy('home')


    def form_valid(self, form):
        
        return super().form_valid(form)
    
    
#HOME
class Home(LoginRequiredMixin, TemplateView):
    template_name = 'home.html'

#PERFIL
class Perfil(LoginRequiredMixin, TemplateView):
    model = User
    template_name = 'perfil/perfil.html'

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        return context

class UserUpdateProfile(LoginRequiredMixin, UpdateView):

    model = User
    form_class = UserUpdateProfilelForm
    template_name = 'perfil/update_profile.html'
    success_url = reverse_lazy('perfil')

    def get_object(self, queryset=None):
        return self.request.user
    
    def form_valid(self, form):

        messages.success(self.request, '¡Tu perfil ha sido actualizado con éxito!')

        return super().form_valid(form)
    
    def form_invalid(self, form):

        messages.error(self.request, 'No ha sido posible actuliazar tu perfil, revisa los campos que has querido actulizar por que debe haber un error.')

        return super().form_invalid(form)



#PARTIDOS
class CrearPartidos(LoginRequiredMixin, CreateView):
    model = Partido
    form_class = PartidoForm
    template_name = 'partidos/crear_partidos.html'
    success_url = reverse_lazy('buscar_partidos')

    def form_valid(self, form):
        form.instance.creador = self.request.user
        
        if 'fecha' in form.cleaned_data:
            form.instance.fecha = form.cleaned_data['fecha']
        else:
            messages.error(self.request, "Error: Fecha del partido no procesada.")
            return self.form_invalid(form)

        # Asignar fecha_limite_inscripcion si vino del formulario
        # Si es None, el método save() del modelo Partido lo calculará por defecto
        if 'fecha_limite_inscripcion' in form.cleaned_data:
            form.instance.fecha_limite_inscripcion = form.cleaned_data['fecha_limite_inscripcion']
        
        response = super().form_valid(form)
        
        if self.object:
            self.object.jugadores.add(self.request.user)
        
        messages.success(self.request, f"¡Partido en '{self.object.cancha.nombre_cancha}' creado con éxito para el {self.object.fecha.strftime('%d/%m/%Y a las %H:%M')}!")
        return response
    

class BuscarPartidos(LoginRequiredMixin, ListView):
    model = Partido
    template_name = 'partidos/buscar_partidos.html'
    context_object_name = 'partidos_info_list' # Cambiado para evitar confusión con el original
    paginate_by = 9

    def get_queryset(self):
        ahora = django_timezone.now()
        # Partidos programados que aún no han pasado su fecha límite de inscripción efectiva
        # y que tienen plazas disponibles.
        queryset = Partido.objects.filter(
            estado='PROGRAMADO',
            # fecha_limite_inscripcion_efectiva > ahora (esto se hará con annotate y Case/When)
            # o podemos filtrar después de anotar
        ).annotate(
            num_jugadores_inscritos=Count('jugadores'),
            # Calculamos la fecha_limite_efectiva aquí para poder filtrar
            # Si fecha_limite_inscripcion es NULL, usamos fecha - 1 hora
            limite_inscripcion_calculada=Case(
                When(fecha_limite_inscripcion__isnull=False, then=models.F('fecha_limite_inscripcion')),
                default=models.ExpressionWrapper(models.F('fecha') - timedelta(hours=1), output_field=models.DateTimeField())
            )
        ).filter(
            limite_inscripcion_calculada__gt=ahora, # Inscripción aún no ha cerrado
            num_jugadores_inscritos__lt=models.F('max_jugadores') # Plazas disponibles
        ).order_by('fecha')
        
        # No excluimos los partidos del usuario aquí, lo manejaremos en el contexto

        return queryset
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs) # Esto ya poblará 'partidos_info_list'
        context['titulo_pagina'] = "Encuentra Partidos"
        
        # Procesar la lista de partidos para añadir información contextual
        partidos_procesados = []
        # 'object_list' es el nombre por defecto que ListView usa para el queryset paginado
        # si no se define context_object_name o si se quiere el queryset original.
        # En nuestro caso, ListView ya usa 'partidos_info_list' por context_object_name.
        for partido in context['partidos_info_list']: 
            es_creador = (partido.creador == self.request.user)
            esta_inscrito = self.request.user in partido.jugadores.all()
            
            # Usamos la propiedad del modelo para determinar si la inscripción está abierta
            # La propiedad ya considera el estado, el límite y las plazas.
            inscripcion_esta_abierta = partido.inscripcion_abierta 

            plazas_disponibles = partido.max_jugadores - partido.num_jugadores_inscritos

            partidos_procesados.append({
                'partido': partido,
                'es_creador': es_creador,
                'esta_inscrito': esta_inscrito,
                'inscripcion_esta_abierta': inscripcion_esta_abierta,
                'plazas_disponibles': plazas_disponibles,
            })
        context['partidos_info_list'] = partidos_procesados # Reemplazamos con la lista procesada
        return context

class DetallePartidoView(LoginRequiredMixin, DetailView): # DetailView puede manejar POST si lo sobrescribes
    model = Partido
    template_name = 'partidos/detalle_partido.html'
    context_object_name = 'partido'
    pk_url_kwarg = 'pk' 

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        partido = self.get_object()
        usuario_actual = self.request.user

        context['titulo_pagina'] = f"Detalles: {partido.cancha.nombre_cancha} - {partido.fecha.strftime('%d/%m %H:%M')}"
        context['es_creador'] = (partido.creador == usuario_actual)
        context['esta_inscrito'] = usuario_actual in partido.jugadores.all()
        context['inscripcion_esta_abierta'] = partido.inscripcion_abierta
        
        jugadores_inscritos_list = partido.jugadores.all().order_by('nombre')
        context['jugadores_inscritos_list'] = jugadores_inscritos_list
        context['plazas_disponibles'] = partido.max_jugadores - partido.jugadores.count()

        if context['es_creador'] and partido.estado == 'PROGRAMADO':
            # Pasar el formulario de asignación de equipos al contexto
            # Pasamos los jugadores inscritos y el partido para pre-rellenar si ya hay equipos
            context['form_asignar_equipos'] = AsignarEquiposForm(
                jugadores_inscritos=jugadores_inscritos_list,
                partido=partido 
            )
        return context

    def post(self, request, *args, **kwargs):
        partido = self.get_object()
        usuario_actual = request.user

        if partido.creador != usuario_actual:
            messages.error(request, "No tienes permiso para modificar este partido.")
            return redirect('detalle_partido', pk=partido.id_partido)

        if partido.estado != 'PROGRAMADO':
            messages.error(request, "Solo se pueden asignar equipos a partidos programados.")
            return redirect('detalle_partido', pk=partido.id_partido)

        # Procesar el formulario de asignación de equipos
        form_asignar = AsignarEquiposForm(request.POST, jugadores_inscritos=partido.jugadores.all(), partido=partido)

        if form_asignar.is_valid():
            jugadores_equipo_local_ids = []
            jugadores_equipo_visitante_ids = []

            for jugador_obj in partido.jugadores.all(): # 'jugador_obj' para evitar confusión con la variable 'jugador' del bucle en el template
                asignacion = form_asignar.cleaned_data.get(f'jugador_{jugador_obj.id}')
                if asignacion == 'local':
                    jugadores_equipo_local_ids.append(jugador_obj.id)
                elif asignacion == 'visitante':
                    jugadores_equipo_visitante_ids.append(jugador_obj.id)
            
            

            # Crear o actualizar equipos temporales para el partido
            # Equipo Local
            if partido.equipo_local:
                equipo_local = partido.equipo_local
                
                equipo_local.jugadores.set(User.objects.filter(id__in=jugadores_equipo_local_ids))
            else:
                equipo_local = Equipo.objects.create(
                    nombre_equipo=f"Locales - {partido.cancha.nombre_cancha} {partido.fecha.strftime('%d%m%y%H%M')}",
                    capitan=partido.creador,
                    tipo_equipo='PARTIDO'
                )
                equipo_local.jugadores.set(User.objects.filter(id__in=jugadores_equipo_local_ids)) # Igual aquí
                partido.equipo_local = equipo_local

            # Equipo Visitante
            if partido.equipo_visitante:
                equipo_visitante = partido.equipo_visitante
                equipo_visitante.jugadores.set(User.objects.filter(id__in=jugadores_equipo_visitante_ids)) # Igual aquí
            else:
                equipo_visitante = Equipo.objects.create(
                    nombre_equipo=f"Visitantes - {partido.cancha.nombre_cancha} {partido.fecha.strftime('%d%m%y%H%M')}",
                    capitan=partido.creador, 
                    tipo_equipo='PARTIDO'
                )
                equipo_visitante.jugadores.set(User.objects.filter(id__in=jugadores_equipo_visitante_ids)) # Igual aquí
                partido.equipo_visitante = equipo_visitante
            
            partido.save()
            messages.success(request, "Equipos asignados correctamente al partido.")
            return redirect('detalle_partido', pk=partido.id_partido)
        else:
            # Si el formulario no es válido, re-renderizar la página con los errores
            # Es un poco más complejo pasar el form con errores de vuelta al DetailView
            # Una forma es guardar los errores en messages o re-renderizar el contexto.
            for field, errors in form_asignar.errors.items():
                for error in errors:
                    messages.error(request, f"Error en asignación: {error}")
            # Recargamos el contexto para que el formulario con errores se muestre
            context = self.get_context_data(**kwargs) # Obtener contexto base
            context['form_asignar_equipos'] = form_asignar # Sobrescribir con el form con errores
            return self.render_to_response(context)


    
class InscribirsePartidoView(LoginRequiredMixin, View):
    def post(self, request, *args, **kwargs):
        partido_id = kwargs.get('partido_id') # Asumiendo que pasas el ID del partido en la URL
        partido = get_object_or_404(Partido, id_partido=partido_id, estado='PROGRAMADO') # Usar id_partido
        usuario = request.user

        # Verificar si ya está inscrito (doble check, aunque el queryset de búsqueda ya lo excluye)
        if usuario in partido.jugadores.all():
            messages.warning(request, "Ya estás inscrito en este partido.")
            return redirect('buscar_partidos') # O a la página de detalle del partido

        # Verificar si hay plazas
        if partido.jugadores.count() >= partido.max_jugadores:
            messages.error(request, "Lo sentimos, este partido ya está lleno.")
            return redirect('buscar_partidos')

        # Crear la inscripción (o simplemente añadir al ManyToManyField)
        # Opción 1: Solo añadir al ManyToManyField 'jugadores' del Partido
        partido.jugadores.add(usuario)
        messages.success(request, f"¡Te has inscrito correctamente al partido en {partido.cancha.nombre_cancha}!")

        return redirect('buscar_partidos') # O a 'mis_partidos' o detalle del partido
    
class RegistrarResultadoPartidoView(LoginRequiredMixin, FormView):
    form_class = ResultadoPartidoForm
    template_name = 'partidos/registrar_resultado.html' # Nueva plantilla

    def dispatch(self, request, *args, **kwargs):
        """
        Asegura que solo el creador del partido pueda acceder y
        que el partido esté en un estado adecuado (PROGRAMADO o EN_CURSO).
        """
        self.partido = get_object_or_404(Partido, id_partido=kwargs['pk'])
        if self.partido.creador != request.user:
            messages.error(request, "No tienes permiso para registrar el resultado de este partido.")
            return redirect('detalle_partido', pk=self.partido.id_partido)
        if self.partido.estado == 'FINALIZADO':
            messages.info(request, "Este partido ya ha finalizado y tiene un resultado registrado.")
            return redirect('detalle_partido', pk=self.partido.id_partido)
        if self.partido.estado == 'CANCELADO':
            messages.warning(request, "No se puede registrar resultado para un partido cancelado.")
            return redirect('detalle_partido', pk=self.partido.id_partido)
        return super().dispatch(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['partido'] = self.partido
        context['titulo_pagina'] = f"Registrar Resultado para: Partido en {self.partido.cancha.nombre_cancha}"
        # Pre-rellenar el formulario si ya hay goles (aunque no debería si no está finalizado)
        if self.partido.goles_local is not None:
            context['form'].fields['goles_local'].initial = self.partido.goles_local
        if self.partido.goles_visitante is not None:
            context['form'].fields['goles_visitante'].initial = self.partido.goles_visitante
        return context

    def form_valid(self, form):
        goles_local = form.cleaned_data['goles_local']
        goles_visitante = form.cleaned_data['goles_visitante']

        partido = self.partido
        partido.goles_local = goles_local
        partido.goles_visitante = goles_visitante
        partido.estado = 'FINALIZADO'
        partido.save() # Guardar los goles y el nuevo estado

        # Actualizar calificaciones ELO
        # Solo si la modalidad no es AMISTOSO y los equipos están definidos
        if partido.modalidad != 'AMISTOSO' and partido.equipo_local and partido.equipo_visitante:
            partido.actualizar_calificaciones() # Llama a tu método del modelo
            messages.success(self.request, "Resultado registrado y calificaciones ELO actualizadas.")
        else:
            if partido.modalidad == 'AMISTOSO':
                messages.success(self.request, "Resultado del partido amistoso registrado (ELO no afectado).")
            else:
                messages.warning(self.request, "Resultado registrado, pero no se pudieron actualizar las calificaciones ELO (faltan equipos o es amistoso).")
        
        return redirect('detalle_partido', pk=partido.id_partido)

    def get_success_url(self):
        # Este método es llamado por FormView si no se especifica en form_valid un redirect
        # pero como ya hacemos redirect en form_valid, podemos omitirlo o hacerlo más genérico.
        return reverse_lazy('detalle_partido', kwargs={'pk': self.partido.id_partido})



    
#CANCHAS
class CanchasView(LoginRequiredMixin, ListView):
    model = Cancha
    template_name = 'canchas/canchas_lista.html' # Nueva plantilla para listar
    context_object_name = 'canchas_list'
    paginate_by = 9 # O el número que prefieras

    def get_queryset(self):
        
        return Cancha.objects.filter(disponible=True).order_by('nombre_cancha')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = "Descubre Nuestras Canchas"
        return context
    
class RegistrarCanchaView(LoginRequiredMixin, CreateView):
    model = Cancha
    form_class = CanchasForm
    template_name = 'canchas/registro_canchas.html' 
    success_url = reverse_lazy('canchas_lista') 

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['titulo_pagina'] = "Registrar Nueva Cancha"
        return context

    def form_valid(self, form):
        # Aquí podrías añadir lógica si el usuario que crea es el "propietario"
        # form.instance.propietario = self.request.user # Si tuvieras un campo así en el modelo Cancha
        cancha = form.save()
        messages.success(self.request, f"¡Cancha '{cancha.nombre_cancha}' registrada con éxito!")
        return super().form_valid(form)

    def form_invalid(self, form):
        messages.error(self.request, "Hubo errores al registrar la cancha. Por favor, revisa el formulario.")
        return super().form_invalid(form)

class DetalleCanchaView(LoginRequiredMixin, DetailView):
    model = Cancha
    template_name = 'canchas/detalle_cancha.html' # Nueva plantilla
    context_object_name = 'cancha'
    pk_url_kwarg = 'pk_cancha' # Para que coincida con la URL

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        cancha = self.get_object()
        context['titulo_pagina'] = f"Detalles de la Cancha: {cancha.nombre_cancha}"
        
        # Próximos partidos en esta cancha
        context['proximos_partidos'] = Partido.objects.filter(
            cancha=cancha,
            fecha__gte=django_timezone.now(), # Usar django_timezone.now()
            estado='PROGRAMADO'
        ).order_by('fecha')[:10] # Limitar a los próximos 10, por ejemplo

        # Podrías añadir un formulario para reservar directamente si es privada y lo implementas
        # context['form_reserva'] = ...
        return context
    

#SECCIONES


class Torneos(LoginRequiredMixin, TemplateView):
    template_name = 'torneos.html'


class Estadisticas(LoginRequiredMixin, TemplateView):
    template_name = 'estadisticas.html'



    # def historial_elo(self):

    #     return self.get_user_historialElo.order_by('fecha')[:30]







    # @receiver(post_save, sender=Partido)
    # def actualizar_calificaciones_post_save(sender, instance, created, **kwargs):
    #     if instance.estado == 'FINALIZADO' and not instance.calificacion_actualizada:
    #         instance.actualizar_calificaciones()




    # def finalizar_partido(request, partido_id):
    #     partido = get_object_or_404(Partido, id=partido_id)

    #     if partido.estado != 'FINALIZADO':
    #         partido.estado = 'FINALIZADO'
    #         partido.save()

    #         if not partido.calificacion_actualizada:
    #             partido.actualizar_calificaciones()
    #             messages.success(request, 'El partido fue finalizado y se actualizaron las calificaciones.')
    #         else:
    #             messages.info(request, 'Este partido ya tenía las calificaciones actualizadas.')

    #     else:
    #         messages.warning(request, 'Este partido ya estaba finalizado.')

    #     return redirect('detalle_partido', partido_id=partido.id)




================================================================
End of Codebase
================================================================
